"use strict";var $d=Object.create;var Xi=Object.defineProperty;var Wd=Object.getOwnPropertyDescriptor;var Kd=Object.getOwnPropertyNames;var Xd=Object.getPrototypeOf,Qd=Object.prototype.hasOwnProperty;var Ht=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),Yd=(e,i)=>{for(var t in i)Xi(e,t,{get:i[t],enumerable:!0})},Dc=(e,i,t,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let u of Kd(i))!Qd.call(e,u)&&u!==t&&Xi(e,u,{get:()=>i[u],enumerable:!(n=Wd(i,u))||n.enumerable});return e};var Nr=(e,i,t)=>(t=e!=null?$d(Xd(e)):{},Dc(i||!e||!e.__esModule?Xi(t,"default",{value:e,enumerable:!0}):t,e)),Zd=e=>Dc(Xi({},"__esModule",{value:!0}),e);var ba=Ht((Qi,xc)=>{(function(e,i){typeof Qi=="object"&&typeof xc<"u"?i(Qi):typeof define=="function"&&define.amd?define(["exports"],i):(e=typeof globalThis<"u"?globalThis:e||self,i((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{},e.Microsoft.ApplicationInsights.Shims={})))})(Qi,function(e){"use strict";var i="function",t="object",n="undefined",u="prototype",a="hasOwnProperty",o="default",r=Object,s=r[u],l=r.assign,f=r.create,c=r.defineProperty,p=s[a],v=null;function m(W){return W===void 0&&(W=!0),(!v||!W)&&(typeof globalThis!==n&&globalThis&&(v=globalThis),typeof self!==n&&self&&(v=self),typeof window!==n&&window&&(v=window),typeof global!==n&&global&&(v=global)),v}function g(W){throw new TypeError(W)}function E(W){var ee=f;if(ee)return ee(W);if(W==null)return{};var re=typeof W;re!==t&&re!==i&&g("Object prototype may only be an Object:"+W);function ve(){}return ve[u]=W,new ve}var T=(m()||{}).Symbol,O=(m()||{}).Reflect,P=!!O,A="decorate",M="metadata",j="getOwnPropertySymbols",G="iterator",B=function(W){for(var ee,re=1,ve=arguments.length;re<ve;re++){ee=arguments[re];for(var Ve in ee)s[a].call(ee,Ve)&&(W[Ve]=ee[Ve])}return W},Y=l||B,ne=function(W,ee){return ne=r.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,ve){re.__proto__=ve}||function(re,ve){for(var Ve in ve)ve[a](Ve)&&(re[Ve]=ve[Ve])},ne(W,ee)};function ye(W,ee){typeof ee!==i&&ee!==null&&g("Class extends value "+String(ee)+" is not a constructor or null"),ne(W,ee);function re(){this.constructor=W}W[u]=ee===null?E(ee):(re[u]=ee[u],new re)}function Re(W,ee){var re={};for(var ve in W)p.call(W,ve)&&ee.indexOf(ve)<0&&(re[ve]=W[ve]);if(W!=null&&typeof r[j]===i)for(var Ve=0,Ae=r[j](W);Ve<Ae.length;Ve++)ee.indexOf(Ae[Ve])<0&&s.propertyIsEnumerable.call(W,Ae[Ve])&&(re[Ae[Ve]]=W[Ae[Ve]]);return re}function st(W,ee,re,ve){var Ve=arguments.length,Ae=Ve<3?ee:ve===null?ve=r.getOwnPropertyDescriptor(ee,re):ve,Ne;if(P&&typeof O[A]===i)Ae=O[A](W,ee,re,ve);else for(var Qe=W.length-1;Qe>=0;Qe--)(Ne=W[Qe])&&(Ae=(Ve<3?Ne(Ae):Ve>3?Ne(ee,re,Ae):Ne(ee,re))||Ae);return Ve>3&&Ae&&c(ee,re,Ae),Ae}function ot(W,ee){return function(re,ve){ee(re,ve,W)}}function Dt(W,ee){if(P&&O[M]===i)return O[M](W,ee)}function at(W,ee){for(var re in W)re!==o&&!p.call(ee,re)&&oe(ee,W,re)}function oe(W,ee,re,ve){ve===void 0&&(ve=re),f?c(W,ve,{enumerable:!0,get:function(){return ee[re]}}):W[ve]=ee[re]}function ge(W){var ee=typeof T===i&&T[G],re=ee&&W[ee],ve=0;if(re)return re.call(W);if(W&&typeof W.length=="number")return{next:function(){return W&&ve>=W.length&&(W=void 0),{value:W&&W[ve++],done:!W}}};g(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(W,ee){var re=typeof T===i&&W[T[G]];if(!re)return W;var ve=re.call(W),Ve,Ae=[],Ne;try{for(;(ee===void 0||ee-- >0)&&!(Ve=ve.next()).done;)Ae.push(Ve.value)}catch(Qe){Ne={error:Qe}}finally{try{Ve&&!Ve.done&&(re=ve.return)&&re.call(ve)}finally{if(Ne)throw Ne.error}}return Ae}function Ue(){for(var W=arguments,ee=0,re=0,ve=W.length;re<ve;re++)ee+=W[re].length;for(var Ve=Array(ee),Ae=0,re=0;re<ve;re++)for(var Ne=W[re],Qe=0,At=Ne.length;Qe<At;Qe++,Ae++)Ve[Ae]=Ne[Qe];return Ve}function X(W,ee){for(var re=0,ve=ee.length,Ve=W.length;re<ve;re++,Ve++)W[Ve]=ee[re];return W}function Ee(W,ee){return c?c(W,"raw",{value:ee}):W.raw=ee,W}function se(W){if(W&&W.__esModule)return W;var ee={};if(W!=null)for(var re in W)re!==o&&Object.prototype.hasOwnProperty.call(W,re)&&oe(ee,W,re);return f?c(ee,o,{enumerable:!0,value:W}):ee[o]=W,ee}function $e(W){return W&&W.__esModule?W:{strDefault:W}}function rt(){var W=m()||{};(function(ee,re,ve,Ve){ee.__assign||(ee.__assign=l||re),ee.__extends||(ee.__extends=ve),ee.__createBinding||(ee.__createBinding=Ve)})(W,Y,ye,oe),__assign||(__assign=W.__assign),__extends||(__extends=W.__extends),__createBinding||(__createBinding=W.__createBinding)}e.ObjAssign=l,e.ObjClass=r,e.ObjCreate=f,e.ObjDefineProperty=c,e.ObjHasOwnProperty=p,e.ObjProto=s,e.__assignFn=Y,e.__createBindingFn=oe,e.__decorateFn=st,e.__exportStarFn=at,e.__exposeGlobalTsLib=rt,e.__extendsFn=ye,e.__importDefaultFn=$e,e.__importStarFn=se,e.__makeTemplateObjectFn=Ee,e.__metadataFn=Dt,e.__paramFn=ot,e.__readFn=le,e.__restFn=Re,e.__spreadArrayFn=X,e.__spreadArraysFn=Ue,e.__valuesFn=ge,e.getGlobal=m,e.objCreateFn=E,e.strDefault=o,e.strShimFunction=i,e.strShimHasOwnProperty=a,e.strShimObject=t,e.strShimPrototype=u,e.strShimUndefined=n,e.throwTypeError=g,function(W,ee,re){var ve=Object.defineProperty;if(ve)try{return ve(W,ee,re)}catch{}return re&&typeof re.value!==void 0&&(W[ee]=re.value),W}(e,"__esModule",{value:!0})})});var Mc=Ht((Yi,Nc)=>{(function(e,i){typeof Yi=="object"&&typeof Nc<"u"?i(Yi):typeof define=="function"&&define.amd?define(["exports"],i):(e=typeof globalThis<"u"?globalThis:e||self,i((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Yi,function(e){"use strict";var i=100,t="function",n="object",u="undefined",a="prototype",o="hasOwnProperty",r=Object,s=r[a],l=r.assign,f=r.create,c=r.defineProperty,p=s[o],v=null;function m(h){return h===void 0&&(h=!0),(!v||!h)&&(typeof globalThis!==u&&globalThis&&(v=globalThis),typeof self!==u&&self&&(v=self),typeof window!==u&&window&&(v=window),typeof global!==u&&global&&(v=global)),v}function g(h){throw new TypeError(h)}function E(h){var y=f;if(y)return y(h);if(h==null)return{};var b=typeof h;b!==n&&b!==t&&g("Object prototype may only be an Object:"+h);function I(){}return I[a]=h,new I}(m()||{}).Symbol,(m()||{}).Reflect;var T=function(h,y){return T=r.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,I){b.__proto__=I}||function(b,I){for(var w in I)I[o](w)&&(b[w]=I[w])},T(h,y)};function O(h,y){typeof y!==t&&y!==null&&g("Class extends value "+String(y)+" is not a constructor or null"),T(h,y);function b(){this.constructor=h}h[a]=y===null?E(y):(b[a]=y[a],new b)}function P(h,y){for(var b=0,I=y.length,w=h.length;b<I;b++,w++)h[w]=y[b];return h}var A="",M="processTelemetry",j="priority",G="setNextPlugin",B="isInitialized",Y="teardown",ne="core",ye="update",Re="disabled",st="_doTeardown",ot="processNext",Dt="resume",at="pause",oe="NotificationListener",ge="add"+oe,le="remove"+oe,Ue="eventsSent",X="eventsDiscarded",Ee="eventsSendRequest",se="perfEvent",$e="toISOString",rt="endsWith",W="startsWith",ee="indexOf",re="map",ve="reduce",Ve="trim",Ae="toString",Ne="__proto__",Qe="constructor",At=c,gr=r.freeze,dr=r.seal,ue=r.keys,_r=String[a],tr=_r[Ve],Vt=_r[rt],Ut=_r[W],or=Date[a],rr=or[$e],yr=Array.isArray,ie=s[Ae],K=p[Ae],xe=K.call(r),Te=/-([a-z])/g,ht=/([^\w\d_$])/g,Ke=/^(\d+[\w\d_$])/,He=Object.getPrototypeOf;function We(h){if(h){if(He)return He(h);var y=h[Ne]||h[a]||h[Qe];if(y)return y}return null}function St(h){return ie.call(h)}function Tt(h,y){return typeof h===y}function Oe(h){return h===void 0||typeof h===u}function Ye(h){return!Oe(h)}function ae(h){return h===null||Oe(h)}function we(h){return!ae(h)}function Le(h,y){return!!(h&&p.call(h,y))}function he(h){return!!(h&&typeof h===n)}function ut(h){return!!(h&&typeof h===t)}function qt(h){var y=h;return y&&pe(y)&&(y=y.replace(Te,function(b,I){return I.toUpperCase()}),y=y.replace(ht,"_"),y=y.replace(Ke,function(b,I){return"_"+I})),y}function Ze(h,y){if(h)for(var b in h)p.call(h,b)&&y.call(h,b,h[b])}function $t(h,y){var b=!1;return h&&y&&!(b=h===y)&&(b=Vt?h[rt](y):pr(h,y)),b}function pr(h,y){var b=!1,I=y?y.length:0,w=h?h.length:0;if(I&&w&&w>=I&&!(b=h===y)){for(var N=w-1,U=I-1;U>=0;U--){if(h[N]!=y[U])return!1;N--}b=!0}return b}function Er(h,y){var b=!1;return h&&y&&!(b=h===y)&&(b=Ut?h[W](y):Me(h,y)),b}function Me(h,y){var b=!1,I=y?y.length:0;if(h&&I&&h.length>=I&&!(b=h===y)){for(var w=0;w<I;w++)if(h[w]!==y[w])return!1;b=!0}return b}function je(h,y){return h&&y?h.indexOf(y)!==-1:!1}function Se(h){return!!(h&&ie.call(h)==="[object Date]")}var Z=yr||et;function et(h){return!!(h&&ie.call(h)==="[object Array]")}function ze(h){return!!(h&&ie.call(h)==="[object Error]")}function pe(h){return typeof h=="string"}function vt(h){return typeof h=="number"}function Et(h){return typeof h=="boolean"}function Pt(h){return typeof h=="symbol"}function Bt(h){var y=!1;if(h&&typeof h=="object"){var b=He?He(h):We(h);b?(b[Qe]&&p.call(b,Qe)&&(b=b[Qe]),y=typeof b===t&&K.call(b)===xe):y=!0}return y}function zt(h){if(h)return rr?h[$e]():jt(h)}function jt(h){if(h&&h.getUTCFullYear){var y=function(b){var I=String(b);return I.length===1&&(I="0"+I),I};return h.getUTCFullYear()+"-"+y(h.getUTCMonth()+1)+"-"+y(h.getUTCDate())+"T"+y(h.getUTCHours())+":"+y(h.getUTCMinutes())+":"+y(h.getUTCSeconds())+"."+String((h.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function nt(h,y,b){var I=h.length;try{for(var w=0;w<I&&!(w in h&&y.call(b||h,h[w],w,h)===-1);w++);}catch{}}function Ct(h,y,b){if(h){if(h[ee])return h[ee](y,b);var I=h.length,w=b||0;try{for(var N=Math.max(w>=0?w:I-Math.abs(w),0);N<I;N++)if(N in h&&h[N]===y)return N}catch{}}return-1}function ct(h,y,b){var I;if(h){if(h[re])return h[re](y,b);var w=h.length,N=b||h;I=new Array(w);try{for(var U=0;U<w;U++)U in h&&(I[U]=y.call(N,h[U],h))}catch{}}return I}function mt(h,y,b){var I;if(h){if(h[ve])return h[ve](y,b);var w=h.length,N=0;if(arguments.length>=3)I=arguments[2];else{for(;N<w&&!(N in h);)N++;I=h[N++]}for(;N<w;)N in h&&(I=y(I,h[N],N,h)),N++}return I}function d(h){return h&&(h=tr&&h[Ve]?h[Ve]():h.replace?h.replace(/^\s+|\s+$/g,""):h),h}var _=!{toString:null}.propertyIsEnumerable("toString"),S=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function C(h){var y=typeof h;if(y!==t&&(y!==n||h===null)&&g("objKeys called on non-object"),!_&&ue)return ue(h);var b=[];for(var I in h)h&&p.call(h,I)&&b.push(I);if(_)for(var w=S.length,N=0;N<w;N++)h&&p.call(h,S[N])&&b.push(S[N]);return b}function R(h,y,b,I){if(At)try{var w={enumerable:!0,configurable:!0};return b&&(w.get=b),I&&(w.set=I),At(h,y,w),!0}catch{}return!1}function k(h){return h}function L(h){return gr&&Ze(h,function(y,b){(Z(b)||he(b))&&gr(b)}),Q(h)}var Q=gr||k,te=dr||k;function Fe(){var h=Date;return h.now?h.now():new h().getTime()}function lt(h){return ze(h)?h.name:A}function qe(h,y,b,I,w){var N=b;return h&&(N=h[y],N!==b&&(!w||w(N))&&(!I||I(b))&&(N=b,h[y]=N)),N}function it(h,y,b){var I;return h?(I=h[y],!I&&ae(I)&&(I=Oe(b)?{}:b,h[y]=I)):I=Oe(b)?{}:b,I}function dt(h){return!h}function bt(h){return!!h}function Ft(h){throw new Error(h)}function Lr(h,y){var b=null,I=null;return ut(h)?b=h:I=h,function(){var w=arguments;if(b&&(I=b()),I)return I[y].apply(I,w)}}function cr(h,y,b){if(h&&y&&he(h)&&he(y)){var I=function(N){if(pe(N)){var U=y[N];ut(U)?(!b||b(N,!0,y,h))&&(h[N]=Lr(y,N)):(!b||b(N,!1,y,h))&&(Le(h,N)&&delete h[N],R(h,N,function(){return y[N]},function($){y[N]=$})||(h[N]=U))}};for(var w in y)I(w)}return h}function hr(h,y,b,I,w){h&&y&&b&&(w!==!1||Oe(h[y]))&&(h[y]=Lr(b,I))}function Hr(h,y,b,I){return h&&y&&he(h)&&Z(b)&&nt(b,function(w){pe(w)&&hr(h,w,y,w,I)}),h}function jr(h){return function(){function y(){var b=this;h&&Ze(h,function(I,w){b[I]=w})}return y}()}function Qr(h){return h&&l&&(h=r(l({},h))),h}function nr(h,y,b,I,w,N){var U=arguments,$=U[0]||{},V=U.length,be=!1,J=1;for(V>0&&Et($)&&(be=$,$=U[J]||{},J++),he($)||($={});J<V;J++){var Ie=U[J],De=Z(Ie),de=he(Ie);for(var Ge in Ie){var _t=De&&Ge in Ie||de&&p.call(Ie,Ge);if(!!_t){var yt=Ie[Ge],Nt=void 0;if(be&&yt&&((Nt=Z(yt))||Bt(yt))){var xt=$[Ge];Nt?Z(xt)||(xt=[]):Bt(xt)||(xt={}),yt=nr(be,xt,yt)}yt!==void 0&&($[Ge]=yt)}}}return $}function wr(h){var y={};return Ze(h,function(b,I){y[b]=I,y[I]=b}),L(y)}function qr(h){var y={};return Ze(h,function(b,I){y[b]=b,y[I]=b}),L(y)}function Ar(h){var y={};return Ze(h,function(b,I){y[b]=I[1],y[I[0]]=I[1]}),L(y)}var br=wr({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});var Or="constructor",Sr="prototype",Br="function",Fr="_dynInstFuncs",Yr="_isDynProxy",Pr="_dynClass",Zr="_dynCls$",Gr="_dynInstChk",Cr=Gr,Tr="_dfOpts",Jr="_unknown_",H="__proto__",me="_dyn"+H,_e="_dynInstProto",Pe="useBaseInst",Xe="setInstFuncs",It=Object,gt=It.getPrototypeOf,Ot=It.getOwnPropertyNames,wt=0;function Je(h,y){return h&&It[Sr].hasOwnProperty.call(h,y)}function q(h){return h&&(h===It[Sr]||h===Array[Sr])}function ce(h){return q(h)||h===Function[Sr]}function fe(h){var y;if(h){if(gt)return gt(h);var b=h[H]||h[Sr]||(h[Or]?h[Or][Sr]:null);y=h[me]||b,Je(h,me)||(delete h[_e],y=h[me]=h[_e]||h[me],h[_e]=b)}return y}function Ce(h,y){var b=[];if(Ot)b=Ot(h);else for(var I in h)typeof I=="string"&&Je(h,I)&&b.push(I);if(b&&b.length>0)for(var w=0;w<b.length;w++)y(b[w])}function ft(h,y,b){return y!==Or&&typeof h[y]===Br&&(b||Je(h,y))}function pt(h){throw new TypeError("DynamicProto: "+h)}function Wt(h){var y={};return Ce(h,function(b){!y[b]&&ft(h,b,!1)&&(y[b]=h[b])}),y}function Zt(h,y){for(var b=h.length-1;b>=0;b--)if(h[b]===y)return!0;return!1}function vr(h,y,b,I){function w(V,be,J){var Ie=be[J];if(Ie[Yr]&&I){var De=V[Fr]||{};De[Cr]!==!1&&(Ie=(De[be[Pr]]||{})[J]||Ie)}return function(){return Ie.apply(V,arguments)}}var N={};Ce(b,function(V){N[V]=w(y,b,V)});for(var U=fe(h),$=[];U&&!ce(U)&&!Zt($,U);)Ce(U,function(V){!N[V]&&ft(U,V,!gt)&&(N[V]=w(y,U,V))}),$.push(U),U=fe(U);return N}function Rr(h,y,b,I){var w=null;if(h&&Je(b,Pr)){var N=h[Fr]||{};if(w=(N[b[Pr]]||{})[y],w||pt("Missing ["+y+"] "+Br),!w[Gr]&&N[Cr]!==!1){for(var U=!Je(h,y),$=fe(h),V=[];U&&$&&!ce($)&&!Zt(V,$);){var be=$[y];if(be){U=be===I;break}V.push($),$=fe($)}try{U&&(h[y]=w),w[Gr]=1}catch{N[Cr]=!1}}}return w}function an(h,y,b){var I=y[h];return I===b&&(I=fe(y)[h]),typeof I!==Br&&pt("["+h+"] is not a "+Br),I}function Wn(h,y,b,I,w){function N(V,be){var J=function(){var Ie=Rr(this,be,V,J)||an(be,V,J);return Ie.apply(this,arguments)};return J[Yr]=1,J}if(!q(h)){var U=b[Fr]=b[Fr]||{},$=U[y]=U[y]||{};U[Cr]!==!1&&(U[Cr]=!!w),Ce(b,function(V){ft(b,V,!1)&&b[V]!==I[V]&&($[V]=b[V],delete b[V],(!Je(h,V)||h[V]&&!h[V][Yr])&&(h[V]=N(h,V)))})}}function D(h,y){if(gt){for(var b=[],I=fe(y);I&&!ce(I)&&!Zt(b,I);){if(I===h)return!0;b.push(I),I=fe(I)}return!1}return!0}function F(h,y){return Je(h,Sr)?h.name||y||Jr:((h||{})[Or]||{}).name||y||Jr}function z(h,y,b,I){Je(h,Sr)||pt("theClass is an invalid class definition.");var w=h[Sr];D(w,y)||pt("["+F(h)+"] is not in class hierarchy of ["+F(y)+"]");var N=null;Je(w,Pr)?N=w[Pr]:(N=Zr+F(h,"_")+"$"+wt,wt++,w[Pr]=N);var U=z[Tr],$=!!U[Pe];$&&I&&I[Pe]!==void 0&&($=!!I[Pe]);var V=Wt(y),be=vr(w,y,V,$);b(y,be);var J=!!gt&&!!U[Xe];J&&I&&(J=!!I[Xe]),Wn(w,N,y,V,J!==!1)}var tt={setInstFuncs:!0,useBaseInst:!0};z[Tr]=tt;var kt="window",Gt="document",Kt="documentMode",Lt="navigator",Xt="history",Dr="location",Ir="console",Tn="performance",Rn="JSON",Kn="crypto",Ci="msCrypto",Tf="ReactNative",ko="msie",Lo="trident/",Ks="XMLHttpRequest",jo=null,Fo=null,Xs=!1,Dn=null,Uo=null;function Qs(h,y){var b=!1;if(h){try{if(b=y in h,!b){var I=h[a];I&&(b=y in I)}}catch{}if(!b)try{var w=new h;b=!Oe(w[y])}catch{}}return b}function If(h){Xs=h}function lr(h){var y=m();return y&&y[h]?y[h]:h===kt&&Ho()?window:null}function Ho(){return Boolean(typeof window===n&&window)}function qo(){return Ho()?window:lr(kt)}function Ys(){return Boolean(typeof document===n&&document)}function sn(){return Ys()?document:lr(Gt)}function Bo(){return Boolean(typeof navigator===n&&navigator)}function In(){return Bo()?navigator:lr(Lt)}function Zs(){return Boolean(typeof history===n&&history)}function wf(){return Zs()?history:lr(Xt)}function Js(h){if(h&&Xs){var y=lr("__mockLocation");if(y)return y}return typeof location===n&&location?location:lr(Dr)}function eu(){return typeof console!==u?console:lr(Ir)}function Go(){return lr(Tn)}function Ri(){return Boolean(typeof JSON===n&&JSON||lr(Rn)!==null)}function Vo(){return Ri()?JSON||lr(Rn):null}function tu(){return lr(Kn)}function ru(){return lr(Ci)}function Af(){var h=In();return h&&h.product?h.product===Tf:!1}function Xn(){var h=In();if(h&&(h.userAgent!==Fo||jo===null)){Fo=h.userAgent;var y=(Fo||A).toLowerCase();jo=je(y,ko)||je(y,Lo)}return jo}function Of(h){if(h===void 0&&(h=null),!h){var y=In()||{};h=y?(y.userAgent||A).toLowerCase():A}var b=(h||A).toLowerCase();if(je(b,ko)){var I=sn()||{};return Math.max(parseInt(b.split(ko)[1]),I[Kt]||0)}else if(je(b,Lo)){var w=parseInt(b.split(Lo)[1]);if(w)return w+4}return null}function un(h){var y=Object[a].toString.call(h),b=A;return y==="[object Error]"?b="{ stack: '"+h.stack+"', message: '"+h.message+"', name: '"+h.name+"'":Ri()&&(b=Vo().stringify(h)),y+b}function Pf(h){if(!h||!pe(h)){var y=In()||{};h=y?(y.userAgent||A).toLowerCase():A}var b=(h||A).toLowerCase();return b.indexOf("safari")>=0}function Cf(){return Uo===null&&(Uo=Bo()&&Boolean(In().sendBeacon)),Uo}function Rf(h){var y=!1;try{y=!!lr("fetch");var b=lr("Request");y&&h&&b&&(y=Qs(b,"keepalive"))}catch{}return y}function Df(){return Dn===null&&(Dn=typeof XDomainRequest!==u,Dn&&nu()&&(Dn=Dn&&!Qs(lr(Ks),"withCredentials"))),Dn}function nu(){var h=!1;try{var y=lr(Ks);h=!!y}catch{}return h}function iu(h,y){if(h)for(var b=0;b<h.length;b++){var I=h[b];if(I.name&&I.name===y)return I}return{}}function ou(h){var y=sn();return y&&h?iu(y.querySelectorAll("meta"),h).content:null}function au(h){var y,b=Go();if(b){var I=b.getEntriesByType("navigation")||[];y=iu((I.length>0?I[0]:{}).serverTiming,h).description}return y}var zo=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Di=null,xi;function xf(h,y){return function(){var b=arguments,I=$o(y);if(I){var w=I.listener;w&&w[h]&&w[h].apply(w,b)}}}function Nf(){var h=lr("Microsoft");return h&&(Di=h.ApplicationInsights),Di}function $o(h){var y=Di;return!y&&h.disableDbgExt!==!0&&(y=Di||Nf()),y?y.ChromeDbgExt:null}function su(h){if(!xi){xi={};for(var y=0;y<zo.length;y++)xi[zo[y]]=xf(zo[y],h)}return xi}var Mf="AI (Internal): ",kf="AI: ",Lf="AITR_",jf="errorToConsole",Ff="warnToConsole";function uu(h){return h?'"'+h.replace(/\"/g,A)+'"':A}function cu(h,y){var b=eu();if(b){var I="log";b[h]&&(I=h),ut(b[I])&&b[I](y)}}var Ni=function(){function h(y,b,I,w){I===void 0&&(I=!1);var N=this;N.messageId=y,N.message=(I?kf:Mf)+y;var U=A;Ri()&&(U=Vo().stringify(w));var $=(b?" message:"+uu(b):A)+(w?" props:"+uu(U):A);N.message+=$}return h.dataType="MessageData",h}();function lu(h,y){return(h||{}).logger||new xn(y)}var xn=function(){function h(y){this.identifier="DiagnosticLogger",this.queue=[];var b=0,I={};z(h,this,function(w){ae(y)&&(y={}),w.consoleLoggingLevel=function(){return N("loggingLevelConsole",0)},w.telemetryLoggingLevel=function(){return N("loggingLevelTelemetry",1)},w.maxInternalMessageLimit=function(){return N("maxMessageLimit",25)},w.enableDebugExceptions=function(){return N("enableDebugExceptions",!1)},w.throwInternal=function(V,be,J,Ie,De){De===void 0&&(De=!1);var de=new Ni(be,J,De,Ie);if(w.enableDebugExceptions())throw un(de);var Ge=V===1?jf:Ff;if(Oe(de.message))$("throw"+(V===1?"Critical":"Warning"),de);else{var _t=w.consoleLoggingLevel();if(De){var yt=+de.messageId;!I[yt]&&_t>=V&&(w[Ge](de.message),I[yt]=!0)}else _t>=V&&w[Ge](de.message);w.logInternalMessage(V,de)}},w.warnToConsole=function(V){cu("warn",V),$("warning",V)},w.errorToConsole=function(V){cu("error",V),$("error",V)},w.resetInternalMessageCount=function(){b=0,I={}},w.logInternalMessage=function(V,be){if(!U()){var J=!0,Ie=Lf+be.messageId;if(I[Ie]?J=!1:I[Ie]=!0,J&&(V<=w.telemetryLoggingLevel()&&(w.queue.push(be),b++,$(V===1?"error":"warn",be)),b===w.maxInternalMessageLimit())){var De="Internal events throttle limit per PageView reached for this app.",de=new Ni(23,De,!1);w.queue.push(de),V===1?w.errorToConsole(De):w.warnToConsole(De)}}};function N(V,be){var J=y[V];return ae(J)?be:J}function U(){return b>=w.maxInternalMessageLimit()}function $(V,be){var J=$o(y);J&&J.diagLog&&J.diagLog(V,be)}})}return h}();function fu(h){return h||new xn}function wn(h,y,b,I,w,N){N===void 0&&(N=!1),(h||new xn).throwInternal(y,b,I,w,N)}function du(h,y){fu(h).warnToConsole(y)}function Uf(h,y,b){fu(h).logInternalMessage(y,b)}var Nn="ctx",pu=null,Qn=function(){function h(y,b,I){var w=this,N=!1;if(w.start=Fe(),w.name=y,w.isAsync=I,w.isChildEvt=function(){return!1},ut(b)){var U;N=R(w,"payload",function(){return!U&&ut(b)&&(U=b(),b=null),U})}w.getCtx=function($){return $?$===h.ParentContextKey||$===h.ChildrenContextKey?w[$]:(w[Nn]||{})[$]:null},w.setCtx=function($,V){if($)if($===h.ParentContextKey)w[$]||(w.isChildEvt=function(){return!0}),w[$]=V;else if($===h.ChildrenContextKey)w[$]=V;else{var be=w[Nn]=w[Nn]||{};be[$]=V}},w.complete=function(){var $=0,V=w.getCtx(h.ChildrenContextKey);if(Z(V))for(var be=0;be<V.length;be++){var J=V[be];J&&($+=J.time)}w.time=Fe()-w.start,w.exTime=w.time-$,w.complete=function(){},!N&&ut(b)&&(w.payload=b())}}return h.ParentContextKey="parent",h.ChildrenContextKey="childEvts",h}(),hu=function(){function h(y){this.ctx={},z(h,this,function(b){b.create=function(I,w,N){return new Qn(I,w,N)},b.fire=function(I){I&&(I.complete(),y&&ut(y.perfEvent)&&y.perfEvent(I))},b.setCtx=function(I,w){if(I){var N=b[Nn]=b[Nn]||{};N[I]=w}},b.getCtx=function(I){return(b[Nn]||{})[I]}})}return h}(),Wo="CoreUtils.doPerf";function Ko(h,y,b,I,w){if(h){var N=h;if(ut(N.getPerfMgr)&&(N=N.getPerfMgr()),N){var U=void 0,$=N.getCtx(Wo);try{if(U=N.create(y(),I,w),U){if($&&U.setCtx&&(U.setCtx(Qn.ParentContextKey,$),$.getCtx&&$.setCtx)){var V=$.getCtx(Qn.ChildrenContextKey);V||(V=[],$.setCtx(Qn.ChildrenContextKey,V)),V.push(U)}return N.setCtx(Wo,U),b(U)}}catch(be){U&&U.setCtx&&U.setCtx("exception",be)}finally{U&&N.fire(U),N.setCtx(Wo,$)}}}return b()}function Hf(h){pu=h}function vu(){return pu}var mu=4294967296,cn=4294967295,gu=!1,Yn=123456789,Zn=987654321;function _u(h){h<0&&(h>>>=0),Yn=123456789+h&cn,Zn=987654321-h&cn,gu=!0}function yu(){try{var h=Fe()&2147483647;_u((Math.random()*mu^h)+h)}catch{}}function Xo(h){return h>0?Math.floor(An()/cn*(h+1))>>>0:0}function An(h){var y=0,b=tu()||ru();return b&&b.getRandomValues&&(y=b.getRandomValues(new Uint32Array(1))[0]&cn),y===0&&Xn()&&(gu||yu(),y=Qo()&cn),y===0&&(y=Math.floor(mu*Math.random()|0)),h||(y>>>=0),y}function Eu(h){h?_u(h):yu()}function Qo(h){Zn=36969*(Zn&65535)+(Zn>>16)&cn,Yn=18e3*(Yn&65535)+(Yn>>16)&cn;var y=(Zn<<16)+(Yn&65535)>>>0&cn|0;return h||(y>>>=0),y}function Yo(h){h===void 0&&(h=22);for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=An()>>>0,I=0,w=A;w.length<h;)I++,w+=y.charAt(b&63),b>>>=6,I===5&&(b=(An()<<2&4294967295|b&3)>>>0,I=0);return w}var bu=c,Su="2.8.4",qf="."+Yo(6),Bf=0;function Gf(h,y,b){if(bu)try{return bu(h,y,{value:b,enumerable:!1,configurable:!0}),!0}catch{}return!1}function Tu(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType}function Vf(h,y){var b=y[h.id];if(!b){b={};try{Tu(y)&&(Gf(y,h.id,b)||(y[h.id]=b))}catch{}}return b}function Jn(h,y){return y===void 0&&(y=!1),qt(h+Bf+++(y?"."+Su:"")+qf)}function Iu(h){var y={id:Jn("_aiData-"+(h||"")+"."+Su),accept:function(b){return Tu(b)},get:function(b,I,w,N){var U=b[y.id];return U?U[qt(I)]:(N&&(U=Vf(y,b),U[qt(I)]=w),w)},kill:function(b,I){if(b&&b[I])try{delete b[I]}catch{}}};return y}var wu="toGMTString",Au="toUTCString",Zo="cookie",Jo="expires",ea="enabled",Ou="isCookieUseDisabled",Pu="disableCookiesUsage",ln="_ckMgr",Mi=null,ta=null,Cu=null,ei=sn(),Ru={},ki={};function Du(h,y){var b=Mn[ln]||ki[ln];return b||(b=Mn[ln]=Mn(h,y),ki[ln]=b),b}function Li(h){return h?h.isEnabled():!0}function zf(h){var y=h.cookieCfg=h.cookieCfg||{};if(qe(y,"domain",h.cookieDomain,we,ae),qe(y,"path",h.cookiePath||"/",null,ae),ae(y[ea])){var b=void 0;Oe(h[Ou])||(b=!h[Ou]),Oe(h[Pu])||(b=!h[Pu]),y[ea]=b}return y}function $f(h,y){var b;if(h)b=h.getCookieMgr();else if(y){var I=y.cookieCfg;I[ln]?b=I[ln]:b=Mn(y)}return b||(b=Du(y,(h||{}).logger)),b}function Mn(h,y){var b=zf(h||ki),I=b.path||"/",w=b.domain,N=b[ea]!==!1,U={isEnabled:function(){var $=N&&ra(y),V=ki[ln];return $&&V&&U!==V&&($=Li(V)),$},setEnabled:function($){N=$!==!1},set:function($,V,be,J,Ie){var De=!1;if(Li(U)){var de={},Ge=d(V||A),_t=Ge.indexOf(";");if(_t!==-1&&(Ge=d(V.substring(0,_t)),de=xu(V.substring(_t+1))),qe(de,"domain",J||w,bt,Oe),!ae(be)){var yt=Xn();if(Oe(de[Jo])){var Nt=Fe(),xt=Nt+be*1e3;if(xt>0){var ar=new Date;ar.setTime(xt),qe(de,Jo,Nu(ar,yt?wu:Au)||Nu(ar,yt?wu:Au)||A,bt)}}yt||qe(de,"max-age",A+be,null,Oe)}var sr=Js();sr&&sr.protocol==="https:"&&(qe(de,"secure",null,null,Oe),ta===null&&(ta=!Lu((In()||{}).userAgent)),ta&&qe(de,"SameSite","None",null,Oe)),qe(de,"path",Ie||I,null,Oe);var Be=b.setCookie||ku;Be($,Mu(Ge,de)),De=!0}return De},get:function($){var V=A;return Li(U)&&(V=(b.getCookie||Wf)($)),V},del:function($,V){var be=!1;return Li(U)&&(be=U.purge($,V)),be},purge:function($,V){var be,J=!1;if(ra(y)){var Ie=(be={},be.path=V||"/",be[Jo]="Thu, 01 Jan 1970 00:00:01 GMT",be);Xn()||(Ie["max-age"]="0");var De=b.delCookie||ku;De($,Mu(A,Ie)),J=!0}return J}};return U[ln]=U,U}function ra(h){if(Mi===null){Mi=!1;try{var y=ei||{};Mi=y[Zo]!==void 0}catch(b){wn(h,2,68,"Cannot access document.cookie - "+lt(b),{exception:un(b)})}}return Mi}function xu(h){var y={};if(h&&h.length){var b=d(h).split(";");nt(b,function(I){if(I=d(I||A),I){var w=I.indexOf("=");w===-1?y[I]=null:y[d(I.substring(0,w))]=d(I.substring(w+1))}})}return y}function Nu(h,y){return ut(h[y])?h[y]():null}function Mu(h,y){var b=h||A;return Ze(y,function(I,w){b+="; "+I+(ae(w)?A:"="+w)}),b}function Wf(h){var y=A;if(ei){var b=ei[Zo]||A;Cu!==b&&(Ru=xu(b),Cu=b),y=d(Ru[h]||A)}return y}function ku(h,y){ei&&(ei[Zo]=h+"="+y)}function Lu(h){return pe(h)?!!(je(h,"CPU iPhone OS 12")||je(h,"iPad; CPU OS 12")||je(h,"Macintosh; Intel Mac OS X 10_14")&&je(h,"Version/")&&je(h,"Safari")||je(h,"Macintosh; Intel Mac OS X 10_14")&&$t(h,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||je(h,"Chrome/5")||je(h,"Chrome/6")||je(h,"UnrealEngine")&&!je(h,"Chrome")||je(h,"UCBrowser/12")||je(h,"UCBrowser/11")):!1}var ju="on",Fu="attachEvent",Uu="addEventListener",Hu="detachEvent",qu="removeEventListener",ji="events",ti="visibilitychange",Fi="pagehide",Bu="pageshow",Gu="unload",Vu="beforeunload",zu=Jn("aiEvtPageHide"),$u=Jn("aiEvtPageShow"),Kf=/\.[\.]+/g,Xf=/[\.]+$/,Qf=1,ri=Iu("events"),Yf=/^([^.]*)(?:\.(.+)|)/;function Wu(h){return h&&h.replace?h.replace(/^\s*\.*|\.*\s*$/g,""):h}function Ui(h,y){if(y){var b="";Z(y)?(b="",nt(y,function(w){w=Wu(w),w&&(w[0]!=="."&&(w="."+w),b+=w)})):b=Wu(y),b&&(b[0]!=="."&&(b="."+b),h=(h||"")+b)}var I=Yf.exec(h||"")||[];return{type:I[1],ns:(I[2]||"").replace(Kf,".").replace(Xf,"").split(".").sort().join(".")}}function Zf(h,y,b){var I=[],w=ri.get(h,ji,{},!1),N=Ui(y,b);return Ze(w,function(U,$){nt($,function(V){(!N.type||N.type===V.evtName.type)&&(!N.ns||N.ns===N.ns)&&I.push({name:V.evtName.type+(V.evtName.ns?"."+V.evtName.ns:""),handler:V.handler})})}),I}function Ku(h,y,b){b===void 0&&(b=!0);var I=ri.get(h,ji,{},b),w=I[y];return w||(w=I[y]=[]),w}function Xu(h,y,b,I){h&&y&&y.type&&(h[qu]?h[qu](y.type,b,I):h[Hu]&&h[Hu](ju+y.type,b))}function Jf(h,y,b,I){var w=!1;return h&&y&&y.type&&b&&(h[Uu]?(h[Uu](y.type,b,I),w=!0):h[Fu]&&(h[Fu](ju+y.type,b),w=!0)),w}function Qu(h,y,b,I){for(var w=y.length;w--;){var N=y[w];N&&(!b.ns||b.ns===N.evtName.ns)&&(!I||I(N))&&(Xu(h,N.evtName,N.handler,N.capture),y.splice(w,1))}}function ed(h,y,b){if(y.type)Qu(h,Ku(h,y.type),y,b);else{var I=ri.get(h,ji,{});Ze(I,function(w,N){Qu(h,N,y,b)}),C(I).length===0&&ri.kill(h,ji)}}function ni(h,y){var b;return y?(Z(y)?b=[h].concat(y):b=[h,y],b=Ui("xx",b).ns.split(".")):b=h,b}function ii(h,y,b,I,w){w===void 0&&(w=!1);var N=!1;if(h)try{var U=Ui(y,I);if(N=Jf(h,U,b,w),N&&ri.accept(h)){var $={guid:Qf++,evtName:U,handler:b,capture:w};Ku(h,U.type).push($)}}catch{}return N}function oi(h,y,b,I,w){if(w===void 0&&(w=!1),h)try{var N=Ui(y,I),U=!1;ed(h,N,function($){return N.ns&&!b||$.handler===b?(U=!0,!0):!1}),U||Xu(h,N,b,w)}catch{}}function na(h,y,b,I){return I===void 0&&(I=!1),ii(h,y,b,null,I)}function ia(h,y,b,I){I===void 0&&(I=!1),oi(h,y,b,null,I)}function oa(h,y,b){var I=!1,w=qo();w&&(I=ii(w,h,y,b),I=ii(w.body,h,y,b)||I);var N=sn();return N&&(I=ii(N,h,y,b)||I),I}function Yu(h,y,b){var I=qo();I&&(oi(I,h,y,b),oi(I.body,h,y,b));var w=sn();w&&oi(w,h,y,b)}function kn(h,y,b,I){var w=!1;return y&&h&&h.length>0&&nt(h,function(N){N&&(!b||Ct(b,N)===-1)&&(w=oa(N,y,I)||w)}),w}function Zu(h,y,b,I){var w=!1;return y&&h&&Z(h)&&(w=kn(h,y,b,I),!w&&b&&b.length>0&&(w=kn(h,y,null,I))),w}function Ln(h,y,b){h&&Z(h)&&nt(h,function(I){I&&Yu(I,y,b)})}function td(h,y,b){return Zu([Vu,Gu,Fi],h,y,b)}function rd(h,y){Ln([Vu,Gu,Fi],h,y)}function Ju(h,y,b){function I(U){var $=sn();h&&$&&$.visibilityState==="hidden"&&h(U)}var w=ni(zu,b),N=kn([Fi],h,y,w);return(!y||Ct(y,ti)===-1)&&(N=kn([ti],I,y,w)||N),!N&&y&&(N=Ju(h,null,b)),N}function nd(h,y){var b=ni(zu,y);Ln([Fi],h,b),Ln([ti],null,b)}function ec(h,y,b){function I(U){var $=sn();h&&$&&$.visibilityState==="visible"&&h(U)}var w=ni($u,b),N=kn([Bu],h,y,w);return N=kn([ti],I,y,w)||N,!N&&y&&(N=ec(h,null,b)),N}function id(h,y){var b=ni($u,y);Ln([Bu],h,b),Ln([ti],null,b)}var ai=null,si,od=u;function tc(){function h(){return Xo(15)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(ad,function(y){var b=h()|0,I=y==="x"?b:b&3|8;return I.toString(16)})}function rc(){var h=Go();return h&&h.now?h.now():Fe()}function Hi(){for(var h=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],y=A,b,I=0;I<4;I++)b=An(),y+=h[b&15]+h[b>>4&15]+h[b>>8&15]+h[b>>12&15]+h[b>>16&15]+h[b>>20&15]+h[b>>24&15]+h[b>>28&15];var w=h[8+(An()&3)|0];return y.substr(0,8)+y.substr(9,4)+"4"+y.substr(13,3)+w+y.substr(16,3)+y.substr(19,12)}var aa={_canUseCookies:void 0,isTypeof:Tt,isUndefined:Oe,isNullOrUndefined:ae,hasOwnProperty:Le,isFunction:ut,isObject:he,isDate:Se,isArray:Z,isError:ze,isString:pe,isNumber:vt,isBoolean:Et,toISOString:zt,arrForEach:nt,arrIndexOf:Ct,arrMap:ct,arrReduce:mt,strTrim:d,objCreate:E,objKeys:C,objDefineAccessors:R,addEventHandler:oa,dateNow:Fe,isIE:Xn,disableCookies:nc,newGuid:tc,perfNow:rc,newId:Yo,randomValue:Xo,random32:An,mwcRandomSeed:Eu,mwcRandom32:Qo,generateW3CId:Hi},ad=/[xy]/g,sd={Attach:na,AttachEvent:na,Detach:ia,DetachEvent:ia};function jn(h,y){var b=Du(h,y),I=aa._canUseCookies;return ai===null&&(ai=[],si=I,R(aa,"_canUseCookies",function(){return si},function(w){si=w,nt(ai,function(N){N.setEnabled(w)})})),Ct(ai,b)===-1&&ai.push(b),Et(I)&&b.setEnabled(I),Et(si)&&b.setEnabled(si),b}function nc(){jn().setEnabled(!1)}function ud(h){return jn(null,h).isEnabled()}function cd(h,y){return jn(null,h).get(y)}function ld(h,y,b,I){jn(null,h).set(y,b,null,I)}function fd(h,y){return jn(null,h).del(y)}var dd=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,sa="00",ua="ff",qi="00000000000000000000000000000000",Bi="0000000000000000",ic=1;function en(h,y,b){return h&&h.length===y&&h!==b?!!h.match(/^[\da-f]*$/):!1}function oc(h,y,b){return en(h,y)?h:b}function ac(h){(isNaN(h)||h<0||h>255)&&(h=1);for(var y=h.toString(16);y.length<2;)y="0"+y;return y}function pd(h,y,b,I){return{version:en(I,2,ua)?I:sa,traceId:la(h)?h:Hi(),spanId:fa(y)?y:Hi().substr(0,16),traceFlags:b>=0&&b<=255?b:1}}function ca(h){if(!h||(Z(h)&&(h=h[0]||""),!h||!pe(h)||h.length>8192))return null;var y=dd.exec(d(h));return!y||y[1]===ua||y[2]===qi||y[3]===Bi?null:{version:y[1],traceId:y[2],spanId:y[3],traceFlags:parseInt(y[4],16)}}function la(h){return en(h,32,qi)}function fa(h){return en(h,16,Bi)}function sc(h){return!(!h||!en(h.version,2,ua)||!en(h.traceId,32,qi)||!en(h.spanId,16,Bi)||!en(ac(h.traceFlags),2))}function hd(h){return sc(h)?(h.traceFlags&ic)===ic:!1}function vd(h){if(h){var y=ac(h.traceFlags);en(y,2)||(y="01");var b=h.version||sa;return b!=="00"&&b!=="ff"&&(b=sa),"".concat(b,"-").concat(oc(h.traceId,32,qi),"-").concat(oc(h.spanId,16,Bi),"-").concat(y)}return""}function md(){var h="traceparent",y=ca(ou(h));return y||(y=ca(au(h))),y}var gd="_doUnload",_d=Iu("plugin");function On(h){return _d.get(h,"state",{},!0)}function da(h,y){for(var b=[],I=null,w=h.getNext(),N;w;){var U=w.getPlugin();if(U){I&&ut(I[G])&&ut(U[M])&&I[G](U);var $=!1;ut(U[B])?$=U[B]():(N=On(U),$=N[B]),$||b.push(U),I=U,w=w.getNext()}}nt(b,function(V){var be=h.core();V.initialize(h.getCfg(),be,y,h.getNext()),N=On(V),!V[ne]&&!N[ne]&&(N[ne]=be),N[B]=!0,delete N[Y]})}function Gi(h){return h.sort(function(y,b){var I=0;if(b){var w=ut(b[M]);ut(y[M])?I=w?y[j]-b[j]:1:w&&(I=-1)}else I=y?1:-1;return I})}function yd(h,y,b,I){var w=0;function N(){for(;w<h.length;){var U=h[w++];if(U){var $=U[gd]||U[st];if(ut($)&&$.call(U,y,b,N)===!0)return!0}}}return N()}function Ed(h){var y={};return{getName:function(){return y.name},setName:function(b){h&&h.setName(b),y.name=b},getTraceId:function(){return y.traceId},setTraceId:function(b){h&&h.setTraceId(b),la(b)&&(y.traceId=b)},getSpanId:function(){return y.spanId},setSpanId:function(b){h&&h.setSpanId(b),fa(b)&&(y.spanId=b)},getTraceFlags:function(){return y.traceFlags},setTraceFlags:function(b){h&&h.setTraceFlags(b),y.traceFlags=b}}}var bd="TelemetryPluginChain",uc="_hasRun",cc="_getTelCtx",lc=0;function Sd(h,y,b){for(;h;){if(h.getPlugin()===b)return h;h=h.getNext()}return fn([b],y.config||{},y)}function pa(h,y,b,I){var w=null,N=[];I!==null&&(w=I?Sd(h,b,I):h);var U={_next:V,ctx:{core:function(){return b},diagLog:function(){return lu(b,y)},getCfg:function(){return y},getExtCfg:be,getConfig:J,hasNext:function(){return!!w},getNext:function(){return w},setNext:function(De){w=De},iterate:Ie,onComplete:$}};function $(De,de){for(var Ge=[],_t=2;_t<arguments.length;_t++)Ge[_t-2]=arguments[_t];De&&N.push({func:De,self:Oe(de)?U.ctx:de,args:Ge})}function V(){var De=w;if(w=De?De.getNext():null,!De){var de=N;de&&de.length>0&&(nt(de,function(Ge){try{Ge.func.call(Ge.self,Ge.args)}catch(_t){wn(b.logger,2,73,"Unexpected Exception during onComplete - "+un(_t))}}),N=[])}return De}function be(De,de,Ge){de===void 0&&(de={}),Ge===void 0&&(Ge=0);var _t;if(y){var yt=y.extensionConfig;yt&&De&&(_t=yt[De])}if(!_t)_t=de;else if(he(de)&&Ge!==0){var Nt=nr(!0,de,_t);y&&Ge===2&&Ze(de,function(xt){if(ae(Nt[xt])){var ar=y[xt];ae(ar)||(Nt[xt]=ar)}}),_t=Nt}return _t}function J(De,de,Ge){Ge===void 0&&(Ge=!1);var _t,yt=be(De,null);return yt&&!ae(yt[de])?_t=yt[de]:y&&!ae(y[de])&&(_t=y[de]),ae(_t)?Ge:_t}function Ie(De){for(var de;de=U._next();){var Ge=de.getPlugin();Ge&&De(Ge)}}return U}function tn(h,y,b,I){var w=pa(h,y,b,I),N=w.ctx;function U(V){var be=w._next();return be&&be.processTelemetry(V,N),!be}function $(V,be){return V===void 0&&(V=null),Z(V)&&(V=fn(V,y,b,be)),tn(V||N.getNext(),y,b,be)}return N.processNext=U,N.createNew=$,N}function Vi(h,y,b){var I=y.config||{},w=pa(h,I,y,b),N=w.ctx;function U(V){var be=w._next();return be&&be.unload(N,V),!be}function $(V,be){return V===void 0&&(V=null),Z(V)&&(V=fn(V,I,y,be)),Vi(V||N.getNext(),y,be)}return N.processNext=U,N.createNew=$,N}function ha(h,y,b){var I=y.config||{},w=pa(h,I,y,b),N=w.ctx;function U(V){return N.iterate(function(be){ut(be.update)&&be.update(N,V)})}function $(V,be){return V===void 0&&(V=null),Z(V)&&(V=fn(V,I,y,be)),ha(V||N.getNext(),y,be)}return N.processNext=U,N.createNew=$,N}function fn(h,y,b,I){var w=null,N=!I;if(Z(h)&&h.length>0){var U=null;nt(h,function($){if(!N&&I===$&&(N=!0),N&&$&&ut($.processTelemetry)){var V=Td($,y,b);w||(w=V),U&&U._setNext(V),U=V}})}return I&&!w?fn([I],y,b):w}function Td(h,y,b){var I=null,w=ut(h.processTelemetry),N=ut(h.setNextPlugin),U;h?U=h.identifier+"-"+h.priority+"-"+lc++:U="Unknown-0-"+lc++;var $={getPlugin:function(){return h},getNext:function(){return I},processTelemetry:J,unload:Ie,update:De,_id:U,_setNext:function(de){I=de}};function V(){var de;return h&&ut(h[cc])&&(de=h[cc]()),de||(de=tn($,y,b)),de}function be(de,Ge,_t,yt,Nt){var xt=!1,ar=h?h.identifier:bd,sr=de[uc];return sr||(sr=de[uc]={}),de.setNext(I),h&&Ko(de[ne](),function(){return ar+":"+_t},function(){sr[U]=!0;try{var Be=I?I._id:A;Be&&(sr[Be]=!1),xt=Ge(de)}catch(Fn){var ui=I?sr[I._id]:!0;ui&&(xt=!0),(!I||!ui)&&wn(de.diagLog(),1,73,"Plugin ["+ar+"] failed during "+_t+" - "+un(Fn)+", run flags: "+un(sr))}},yt,Nt),xt}function J(de,Ge){Ge=Ge||V();function _t(yt){if(!h||!w)return!1;var Nt=On(h);return Nt.teardown||Nt[Re]?!1:(N&&h.setNextPlugin(I),h.processTelemetry(de,yt),!0)}be(Ge,_t,"processTelemetry",function(){return{item:de}},!de.sync)||Ge.processNext(de)}function Ie(de,Ge){function _t(){var yt=!1;if(h){var Nt=On(h),xt=h[ne]||Nt.core;h&&(!xt||xt===de[ne]())&&!Nt[Y]&&(Nt[ne]=null,Nt[Y]=!0,Nt[B]=!1,h[Y]&&h[Y](de,Ge)===!0&&(yt=!0))}return yt}be(de,_t,"unload",function(){},Ge.isAsync)||de.processNext(Ge)}function De(de,Ge){function _t(){var yt=!1;if(h){var Nt=On(h),xt=h[ne]||Nt.core;h&&(!xt||xt===de[ne]())&&!Nt[Y]&&h[ye]&&h[ye](de,Ge)===!0&&(yt=!0)}return yt}be(de,_t,"update",function(){},!1)||de.processNext(Ge)}return Q($)}var Id=function(){function h(y,b,I,w){var N=this,U=tn(y,b,I,w);Hr(N,U,C(U))}return h}(),wd="iKey",fc="extensionConfig",zi=500,Ad="Channel has invalid priority - ";function dc(h,y,b,I){y&&Z(y)&&y.length>0&&(y=y.sort(function(w,N){return w.priority-N.priority}),nt(y,function(w){w.priority<zi&&Ft(Ad+w.identifier)}),h.push({queue:Q(y),chain:fn(y,b,I)}))}function Od(h,y){var b;function I(){return tn(null,y.config,y,null)}function w(J,Ie,De,de){var Ge=J?J.length+1:1;function _t(){Ge--,Ge===0&&(de&&de(),de=null)}Ge>0&&nt(J,function(yt){if(yt&&yt.queue.length>0){var Nt=yt.chain,xt=Ie.createNew(Nt);xt.onComplete(_t),De(xt)}else Ge--}),_t()}function N(J,Ie){var De=Ie||{reason:0};return w(h,J,function(de){de[ot](De)},function(){J[ot](De)}),!0}function U(J,Ie){var De=Ie||{reason:0,isAsync:!1};return w(h,J,function(de){de[ot](De)},function(){J[ot](De),V=!1}),!0}function $(J){var Ie=null;return h&&h.length>0&&nt(h,function(De){if(De&&De.queue.length>0&&(nt(De.queue,function(de){if(de.identifier===J)return Ie=de,-1}),Ie))return-1}),Ie}var V=!1,be=(b={identifier:"ChannelControllerPlugin",priority:zi,initialize:function(J,Ie,De,de){V=!0,nt(h,function(Ge){Ge&&Ge.queue.length>0&&da(tn(Ge.chain,J,Ie),De)})},isInitialized:function(){return V},processTelemetry:function(J,Ie){w(h,Ie||I(),function(De){De[ot](J)},function(){Ie[ot](J)})},update:N},b[at]=function(){w(h,I(),function(J){J.iterate(function(Ie){Ie[at]&&Ie[at]()})},null)},b[Dt]=function(){w(h,I(),function(J){J.iterate(function(Ie){Ie[Dt]&&Ie[Dt]()})},null)},b[Y]=U,b.getChannel=$,b.flush=function(J,Ie,De,de){var Ge=1,_t=!1,yt=null;de=de||5e3;function Nt(){Ge--,_t&&Ge===0&&(yt&&(clearTimeout(yt),yt=null),Ie&&Ie(_t),Ie=null)}return w(h,I(),function(xt){xt.iterate(function(ar){if(ar.flush){Ge++;var sr=!1;ar.flush(J,function(){sr=!0,Nt()},De)||sr||(J&&yt==null?yt=setTimeout(function(){yt=null,Nt()},de):Nt())}})},function(){_t=!0,Nt()}),!0},b._setQueue=function(J){h=J},b);return be}function Pd(h,y,b,I){var w=[];if(h&&nt(h,function(U){return dc(w,U,b,I)}),y){var N=[];nt(y,function(U){U.priority>zi&&N.push(U)}),dc(w,N,b,I)}return w}function va(){var h=[];function y(I){I&&h.push(I)}function b(I,w){nt(h,function(N){try{N(I,w)}catch(U){wn(I.diagLog(),2,73,"Unexpected error calling unload handler - "+un(U))}}),h=[]}return{add:y,run:b}}var dn="getPlugin",pc=function(){function h(){var y=this,b,I,w,N,U;be(),z(h,y,function(J){J.initialize=function(Ie,De,de,Ge){V(Ie,De,Ge),b=!0},J.teardown=function(Ie,De){var de=J.core;if(!de||Ie&&de!==Ie.core())return;var Ge,_t=!1,yt=Ie||Vi(null,de,w&&w[dn]?w[dn]():w),Nt=De||{reason:0,isAsync:!1};function xt(){_t||(_t=!0,N.run(yt,De),nt(U,function(ar){ar.rm()}),U=[],Ge===!0&&yt.processNext(Nt),be())}return!J[st]||J[st](yt,Nt,xt)!==!0?xt():Ge=!0,Ge},J.update=function(Ie,De){var de=J.core;if(!de||Ie&&de!==Ie.core())return;var Ge,_t=!1,yt=Ie||ha(null,de,w&&w[dn]?w[dn]():w),Nt=De||{reason:0};function xt(){_t||(_t=!0,V(yt.getCfg(),yt.core(),yt.getNext()))}return!J._doUpdate||J._doUpdate(yt,Nt,xt)!==!0?xt():Ge=!0,Ge},J._addHook=function(Ie){Ie&&(Z(Ie)?U=U.concat(Ie):U.push(Ie))},hr(J,"_addUnloadCb",function(){return N},"add")}),y.diagLog=function(J){return $(J).diagLog()},y[B]=function(){return b},y.setInitialized=function(J){b=J},y[G]=function(J){w=J},y.processNext=function(J,Ie){Ie?Ie.processNext(J):w&&ut(w.processTelemetry)&&w.processTelemetry(J,null)},y._getTelCtx=$;function $(J){J===void 0&&(J=null);var Ie=J;if(!Ie){var De=I||tn(null,{},y.core);w&&w[dn]?Ie=De.createNew(null,w[dn]):Ie=De.createNew(null,w)}return Ie}function V(J,Ie,De){J&&qe(J,fc,[],null,ae),!De&&Ie&&(De=Ie.getProcessTelContext().getNext());var de=w;w&&w[dn]&&(de=w[dn]()),y.core=Ie,I=tn(De,J,Ie,de)}function be(){b=!1,y.core=null,I=null,w=null,U=[],N=va()}}return h}(),Cd=function(h){O(y,h);function y(){var b=h.call(this)||this;b.identifier="TelemetryInitializerPlugin",b.priority=199;var I,w;N(),z(y,b,function(U,$){U.addTelemetryInitializer=function(V){var be={id:I++,fn:V};w.push(be);var J={remove:function(){nt(w,function(Ie,De){if(Ie.id===be.id)return w.splice(De,1),-1})}};return J},U.processTelemetry=function(V,be){for(var J=!1,Ie=w.length,De=0;De<Ie;++De){var de=w[De];if(de)try{if(de.fn.apply(null,[V])===!1){J=!0;break}}catch(Ge){wn(be.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+lt(Ge),{exception:un(Ge)},!0)}}J||U.processNext(V,be)},U[st]=function(){N()}});function N(){I=0,w=[]}return b}return y}(pc),hc="Plugins must provide initialize method",vc="_notificationManager",mc="SDK is still unloading...",Rd="SDK is not initialized",Dd={loggingLevelConsole:1};function xd(h,y){return new hu(y)}function Nd(h,y,b){var I=[],w={};return nt(b,function(N){(ae(N)||ae(N.initialize))&&Ft(hc);var U=N.priority,$=N.identifier;N&&U&&(ae(w[U])?w[U]=$:du(h,"Two extensions have same priority #"+U+" - "+w[U]+", "+$)),(!U||U<y)&&I.push(N)}),{all:b,core:I}}function gc(h,y){var b=!1;return nt(y,function(I){if(I===h)return b=!0,-1}),b}function Md(){var h;return E((h={},h[ge]=function(y){},h[le]=function(y){},h[Ue]=function(y){},h[X]=function(y,b){},h[Ee]=function(y,b){},h))}var _c=function(){function h(){var y,b,I,w,N,U,$,V,be,J,Ie,De,de,Ge,_t,yt,Nt,xt,ar,sr=0;z(h,this,function(Be){ui(),Be.isInitialized=function(){return y},Be.initialize=function(ke,Mt,Qt,Rt){de&&Ft(mc),Be.isInitialized()&&Ft("Core should not be initialized more than once"),(!ke||ae(ke.instrumentationKey))&&Ft("Please provide instrumentation key"),I=Rt,Be[vc]=Rt,Be.config=ke||{},Bd(ke),Gd(ke),ke.extensions=ae(ke.extensions)?[]:ke.extensions,Vd(ke),Qt&&(Be.logger=Qt),V=[],V.push.apply(V,P(P([],Mt,!1),ke.extensions)),Ie=(ke||{}).channels,ya(ke,null),(!De||De.length===0)&&Ft("No channels available"),y=!0,Be.releaseQueue()},Be.getTransmissionControls=function(){var ke=[];return De&&nt(De,function(Mt){ke.push(Mt.queue)}),Q(ke)},Be.track=function(ke){qe(ke,wd,Be.config.instrumentationKey,null,dt),qe(ke,"time",zt(new Date),null,dt),qe(ke,"ver","4.0",null,ae),!de&&Be.isInitialized()?Fn().processNext(ke):b.push(ke)},Be.getProcessTelContext=Fn,Be.getNotifyMgr=function(){return I||(I=Md(),Be[vc]=I),I},Be[ge]=function(ke){I&&I[ge](ke)},Be[le]=function(ke){I&&I[le](ke)},Be.getCookieMgr=function(){return U||(U=Mn(Be.config,Be.logger)),U},Be.setCookieMgr=function(ke){U=ke},Be.getPerfMgr=function(){return!w&&!N&&Be.config&&Be.config.enablePerfMgr&&ut(Be.config.createPerfMgr)&&(N=Be.config.createPerfMgr(Be,Be.getNotifyMgr())),w||N||vu()},Be.setPerfMgr=function(ke){w=ke},Be.eventCnt=function(){return b.length},Be.releaseQueue=function(){if(y&&b.length>0){var ke=b;b=[],nt(ke,function(Mt){Fn().processNext(Mt)})}},Be.pollInternalLogs=function(ke){_t=ke||null;var Mt=Be.config.diagnosticLogInterval;return(!Mt||!(Mt>0))&&(Mt=1e4),sr&&clearInterval(sr),sr=setInterval(function(){Ac()},Mt),sr},Be.stopPollingInternalLogs=function(){sr&&(clearInterval(sr),sr=0,Ac())},Hr(Be,function(){return Ge},["addTelemetryInitializer"]),Be.unload=function(ke,Mt,Qt){ke===void 0&&(ke=!0),y||Ft(Rd),de&&Ft(mc);var Rt={reason:50,isAsync:ke,flushComplete:!1},fr=Vi(Ea(),Be);fr.onComplete(function(){ui(),Mt&&Mt(Rt)},Be);function xr(rn){Rt.flushComplete=rn,de=!0,Nt.run(fr,Rt),Be.stopPollingInternalLogs(),fr.processNext(Rt)}Oc(ke,xr,6,Qt)||xr(!1)},Be.getPlugin=Ic,Be.addPlugin=function(ke,Mt,Qt,Rt){if(!ke){Rt&&Rt(!1),Pc(hc);return}var fr=Ic(ke.identifier);if(fr&&!Mt){Rt&&Rt(!1),Pc("Plugin ["+ke.identifier+"] is already loaded!");return}var xr={reason:16};function rn(Ki){V.push(ke),xr.added=[ke],ya(Be.config,xr),Rt&&Rt(!0)}if(fr){var pn=[fr.plugin],Un={reason:2,isAsync:!!Qt};wc(pn,Un,function(Ki){Ki?(xr.removed=pn,xr.reason|=32,rn()):Rt&&Rt(!1)})}else rn()},Be.evtNamespace=function(){return yt},Be.flush=Oc,Be.getTraceCtx=function(ke){return ar||(ar=Ed()),ar},Be.setTraceCtx=function(ke){ar=ke||null},hr(Be,"addUnloadCb",function(){return Nt},"add");function ui(){y=!1,Be.config=nr(!0,{},Dd),Be.logger=new xn(Be.config),Be._extensions=[],Ge=new Cd,b=[],I=null,w=null,N=null,U=null,$=null,be=null,V=[],J=null,Ie=null,De=null,de=!1,_t=null,yt=Jn("AIBaseCore",!0),Nt=va(),ar=null}function Fn(){return tn(Ea(),Be.config,Be)}function ya(ke,Mt){var Qt=Nd(Be.logger,zi,V);be=Qt.core,$=null;var Rt=Qt.all;if(De=Q(Pd(Ie,Rt,ke,Be)),J){var fr=Ct(Rt,J);fr!==-1&&Rt.splice(fr,1),fr=Ct(be,J),fr!==-1&&be.splice(fr,1),J._setQueue(De)}else J=Od(De,Be);Rt.push(J),be.push(J),Be._extensions=Gi(Rt),J.initialize(ke,Be,Rt),da(Fn(),Rt),Be._extensions=Q(Gi(be||[])).slice(),Mt&&zd(Mt)}function Ic(ke){var Mt=null,Qt=null;return nt(Be._extensions,function(Rt){if(Rt.identifier===ke&&Rt!==J&&Rt!==Ge)return Qt=Rt,-1}),!Qt&&J&&(Qt=J.getChannel(ke)),Qt&&(Mt={plugin:Qt,setEnabled:function(Rt){On(Qt)[Re]=!Rt},isEnabled:function(){var Rt=On(Qt);return!Rt[Y]&&!Rt[Re]},remove:function(Rt,fr){Rt===void 0&&(Rt=!0);var xr=[Qt],rn={reason:1,isAsync:Rt};wc(xr,rn,function(pn){pn&&ya(Be.config,{reason:32,removed:xr}),fr&&fr(pn)})}}),Mt}function Ea(){if(!$){var ke=(be||[]).slice();Ct(ke,Ge)===-1&&ke.push(Ge),$=fn(Gi(ke),Be.config,Be)}return $}function wc(ke,Mt,Qt){if(ke&&ke.length>0){var Rt=fn(ke,Be.config,Be),fr=Vi(Rt,Be);fr.onComplete(function(){var xr=!1,rn=[];nt(V,function(Un,Ki){gc(Un,ke)?xr=!0:rn.push(Un)}),V=rn;var pn=[];Ie&&(nt(Ie,function(Un,Ki){var Cc=[];nt(Un,function(Rc){gc(Rc,ke)?xr=!0:Cc.push(Rc)}),pn.push(Cc)}),Ie=pn),Qt&&Qt(xr)}),fr.processNext(Mt)}else Qt(!1)}function Ac(){var ke=Be.logger?Be.logger.queue:[];ke&&(nt(ke,function(Mt){var Qt={name:_t||"InternalMessageId: "+Mt.messageId,iKey:Be.config.instrumentationKey,time:zt(new Date),baseType:Ni.dataType,baseData:{message:Mt.message}};Be.track(Qt)}),ke.length=0)}function Oc(ke,Mt,Qt,Rt){return J?J.flush(ke,Mt,Qt||6,Rt):(Mt&&Mt(!1),!0)}function Bd(ke){ke.disableDbgExt===!0&&xt&&(I[le](xt),xt=null),I&&!xt&&ke.disableDbgExt!==!0&&(xt=su(ke),I[ge](xt))}function Gd(ke){!ke.enablePerfMgr&&N&&(N=null),ke.enablePerfMgr&&qe(Be.config,"createPerfMgr",xd)}function Vd(ke){var Mt=it(ke,fc);Mt.NotificationManager=I}function zd(ke){var Mt=ha(Ea(),Be);(!Be._updateHook||Be._updateHook(Mt,ke)!==!0)&&Mt.processNext(ke)}function Pc(ke){var Mt=Be.logger;Mt?wn(Mt,2,73,ke):Ft(ke)}})}return h}();function $i(h,y,b,I){nt(h,function(w){if(w&&w[y])if(b)setTimeout(function(){return I(w)},0);else try{I(w)}catch{}})}var yc=function(){function h(y){this.listeners=[];var b=!!(y||{}).perfEvtsSendAll;z(h,this,function(I){I[ge]=function(w){I.listeners.push(w)},I[le]=function(w){for(var N=Ct(I.listeners,w);N>-1;)I.listeners.splice(N,1),N=Ct(I.listeners,w)},I[Ue]=function(w){$i(I.listeners,Ue,!0,function(N){N[Ue](w)})},I[X]=function(w,N){$i(I.listeners,X,!0,function(U){U[X](w,N)})},I[Ee]=function(w,N){$i(I.listeners,Ee,N,function(U){U[Ee](w,N)})},I[se]=function(w){w&&(b||!w.isChildEvt())&&$i(I.listeners,se,!1,function(N){w.isAsync?setTimeout(function(){return N[se](w)},0):N[se](w)})}})}return h}(),kd=function(h){O(y,h);function y(){var b=h.call(this)||this;return z(y,b,function(I,w){I.initialize=function($,V,be,J){w.initialize($,V,be||new xn($),J||new yc($))},I.track=function($){Ko(I.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){$===null&&(U($),Ft("Invalid telemetry item")),N($),w.track($)},function(){return{item:$}},!$.sync)};function N($){ae($.name)&&(U($),Ft("telemetry name required"))}function U($){var V=I.getNotifyMgr();V&&V.eventsDiscarded([$],2)}}),b}return y}(_c),Ld=wr({CRITICAL:1,WARNING:2}),jd=wr({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),Ec="_aiHooks",bc=["req","rsp","hkErr","fnErr"];function Wi(h,y){if(h)for(var b=0;b<h.length&&!y(h[b],b);b++);}function ma(h,y,b,I,w){w>=0&&w<=2&&Wi(h,function(N,U){var $=N.cbks,V=$[bc[w]];if(V){y.ctx=function(){var Ie=I[U]=I[U]||{};return Ie};try{V.apply(y.inst,b)}catch(Ie){var be=y.err;try{var J=$[bc[2]];J&&(y.err=Ie,J.apply(y.inst,b))}catch{}finally{y.err=be}}}})}function Fd(h){return function(){var y=this,b=arguments,I=h.h,w={name:h.n,inst:y,ctx:null,set:V},N=[],U=$([w],b);w.evt=lr("event");function $(J,Ie){return Wi(Ie,function(De){J.push(De)}),J}function V(J,Ie){b=$([],b),b[J]=Ie,U=$([w],b)}ma(I,w,U,N,0);var be=h.f;if(be)try{w.rslt=be.apply(y,b)}catch(J){throw w.err=J,ma(I,w,U,N,3),J}return ma(I,w,U,N,1),w.rslt}}function ga(h,y,b){var I=null;return h&&(Le(h,y)?I=h:b&&(I=ga(We(h),y,!1))),I}function Ud(h,y,b){return h?_a(h[a],y,b,!1):null}function Hd(h,y,b){return h?Tc(h[a],y,b,!1):null}function Sc(h,y,b,I){var w=b&&b[Ec];if(!w){w={i:0,n:y,f:b,h:[]};var N=Fd(w);N[Ec]=w,h[y]=N}var U={id:w.i,cbks:I,rm:function(){var $=this.id;Wi(w.h,function(V,be){if(V.id===$)return w.h.splice(be,1),1})}};return w.i++,w.h.push(U),U}function _a(h,y,b,I){if(I===void 0&&(I=!0),h&&y&&b){var w=ga(h,y,I);if(w){var N=w[y];if(typeof N===t)return Sc(w,y,N,b)}}return null}function Tc(h,y,b,I){I===void 0&&(I=!0);var w=null;return Wi(y,function(N){var U=_a(h,N,b,I);U&&(w||(w=[]),w.push(U))}),w}function qd(h,y,b,I){if(h&&y&&b){var w=ga(h,y,I)||h;if(w)return Sc(w,y,w[y],b)}return null}e.AppInsightsCore=kd,e.BaseCore=_c,e.BaseTelemetryPlugin=pc,e.CoreUtils=aa,e.DiagnosticLogger=xn,e.EventHelper=sd,e.EventsDiscardedReason=br,e.InstrumentEvent=qd,e.InstrumentFunc=_a,e.InstrumentFuncs=Tc,e.InstrumentProto=Ud,e.InstrumentProtos=Hd,e.LoggingSeverity=Ld,e.MinChannelPriorty=i,e.NotificationManager=yc,e.PerfEvent=Qn,e.PerfManager=hu,e.ProcessTelemetryContext=Id,e.Undefined=od,e._InternalLogMessage=Ni,e._InternalMessageId=jd,e.__getRegisteredEvents=Zf,e._legacyCookieMgr=jn,e._logInternalMessage=Uf,e._throwInternal=wn,e._warnToConsole=du,e.addEventHandler=oa,e.addEventListeners=Zu,e.addPageHideEventListener=Ju,e.addPageShowEventListener=ec,e.addPageUnloadEventListener=td,e.areCookiesSupported=ra,e.arrForEach=nt,e.arrIndexOf=Ct,e.arrMap=ct,e.arrReduce=mt,e.attachEvent=na,e.canUseCookies=ud,e.createClassFromInterface=jr,e.createCookieMgr=Mn,e.createEnumMap=qr,e.createEnumStyle=wr,e.createProcessTelemetryContext=tn,e.createTraceParent=pd,e.createUniqueNamespace=Jn,e.createUnloadHandlerContainer=va,e.createValueMap=Ar,e.dateNow=Fe,e.deepFreeze=L,e.deleteCookie=fd,e.detachEvent=ia,e.disableCookies=nc,e.doPerf=Ko,e.dumpObj=un,e.eventOff=oi,e.eventOn=ii,e.findMetaTag=ou,e.findNamedServerTiming=au,e.findW3cTraceParent=md,e.formatTraceParent=vd,e.generateW3CId=Hi,e.getConsole=eu,e.getCookie=cd,e.getCrypto=tu,e.getDebugExt=$o,e.getDebugListener=su,e.getDocument=sn,e.getExceptionName=lt,e.getGblPerfMgr=vu,e.getGlobal=m,e.getGlobalInst=lr,e.getHistory=wf,e.getIEVersion=Of,e.getJSON=Vo,e.getLocation=Js,e.getMsCrypto=ru,e.getNavigator=In,e.getPerformance=Go,e.getSetValue=it,e.getWindow=qo,e.hasDocument=Ys,e.hasHistory=Zs,e.hasJSON=Ri,e.hasNavigator=Bo,e.hasOwnProperty=Le,e.hasWindow=Ho,e.initializePlugins=da,e.isArray=Z,e.isBeaconsSupported=Cf,e.isBoolean=Et,e.isDate=Se,e.isError=ze,e.isFetchSupported=Rf,e.isFunction=ut,e.isIE=Xn,e.isNotNullOrUndefined=we,e.isNotTruthy=dt,e.isNotUndefined=Ye,e.isNullOrUndefined=ae,e.isNumber=vt,e.isObject=he,e.isReactNative=Af,e.isSafari=Pf,e.isSampledFlag=hd,e.isString=pe,e.isSymbol=Pt,e.isTruthy=bt,e.isTypeof=Tt,e.isUndefined=Oe,e.isValidSpanId=fa,e.isValidTraceId=la,e.isValidTraceParent=sc,e.isXhrSupported=nu,e.mergeEvtNamespace=ni,e.mwcRandom32=Qo,e.mwcRandomSeed=Eu,e.newGuid=tc,e.newId=Yo,e.normalizeJsName=qt,e.objCreate=E,e.objDefineAccessors=R,e.objExtend=nr,e.objForEachKey=Ze,e.objFreeze=Q,e.objKeys=C,e.objSeal=te,e.objToString=St,e.optimizeObject=Qr,e.parseTraceParent=ca,e.perfNow=rc,e.proxyAssign=cr,e.proxyFunctionAs=hr,e.proxyFunctions=Hr,e.random32=An,e.randomValue=Xo,e.removeEventHandler=Yu,e.removeEventListeners=Ln,e.removePageHideEventListener=nd,e.removePageShowEventListener=id,e.removePageUnloadEventListener=rd,e.safeGetCookieMgr=$f,e.safeGetLogger=lu,e.setCookie=ld,e.setEnableEnvMocks=If,e.setGblPerfMgr=Hf,e.setValue=qe,e.sortPlugins=Gi,e.strContains=je,e.strEndsWith=$t,e.strFunction=t,e.strObject=n,e.strPrototype=a,e.strStartsWith=Er,e.strTrim=d,e.strUndefined=u,e.throwError=Ft,e.toISOString=zt,e.uaDisallowsSameSiteNone=Lu,e.unloadComponents=yd,e.useXDomainRequest=Df,function(h,y,b){var I=Object.defineProperty;if(I)try{return I(h,y,b)}catch{}return b&&typeof b.value!==void 0&&(h[y]=b.value),h}(e,"__esModule",{value:!0})})});var Ia=Ht((Sa,Ta)=>{(function(e,i){typeof Sa=="object"&&typeof Ta<"u"?Ta.exports=i():typeof define=="function"&&define.amd?define(i):(e=typeof globalThis<"u"?globalThis:e||self,e.Microsoft=e.Microsoft||{},e.Microsoft["DynamicProto-JS"]=i())})(Sa,function(){"use strict";var e="constructor",i="prototype",t="function",n="_dynInstFuncs",u="_isDynProxy",a="_dynClass",o="_dynCls$",r="_dynInstChk",s=r,l="_dfOpts",f="_unknown_",c="__proto__",p="_dyn"+c,v="_dynInstProto",m="useBaseInst",g="setInstFuncs",E=Object,T=E.getPrototypeOf,O=E.getOwnPropertyNames,P=0;function A(X,Ee){return X&&E[i].hasOwnProperty.call(X,Ee)}function M(X){return X&&(X===E[i]||X===Array[i])}function j(X){return M(X)||X===Function[i]}function G(X){var Ee;if(X){if(T)return T(X);var se=X[c]||X[i]||(X[e]?X[e][i]:null);Ee=X[p]||se,A(X,p)||(delete X[v],Ee=X[p]=X[v]||X[p],X[v]=se)}return Ee}function B(X,Ee){var se=[];if(O)se=O(X);else for(var $e in X)typeof $e=="string"&&A(X,$e)&&se.push($e);if(se&&se.length>0)for(var rt=0;rt<se.length;rt++)Ee(se[rt])}function Y(X,Ee,se){return Ee!==e&&typeof X[Ee]===t&&(se||A(X,Ee))}function ne(X){throw new TypeError("DynamicProto: "+X)}function ye(X){var Ee={};return B(X,function(se){!Ee[se]&&Y(X,se,!1)&&(Ee[se]=X[se])}),Ee}function Re(X,Ee){for(var se=X.length-1;se>=0;se--)if(X[se]===Ee)return!0;return!1}function st(X,Ee,se,$e){function rt(ve,Ve,Ae){var Ne=Ve[Ae];if(Ne[u]&&$e){var Qe=ve[n]||{};Qe[s]!==!1&&(Ne=(Qe[Ve[a]]||{})[Ae]||Ne)}return function(){return Ne.apply(ve,arguments)}}var W={};B(se,function(ve){W[ve]=rt(Ee,se,ve)});for(var ee=G(X),re=[];ee&&!j(ee)&&!Re(re,ee);)B(ee,function(ve){!W[ve]&&Y(ee,ve,!T)&&(W[ve]=rt(Ee,ee,ve))}),re.push(ee),ee=G(ee);return W}function ot(X,Ee,se,$e){var rt=null;if(X&&A(se,a)){var W=X[n]||{};if(rt=(W[se[a]]||{})[Ee],rt||ne("Missing ["+Ee+"] "+t),!rt[r]&&W[s]!==!1){for(var ee=!A(X,Ee),re=G(X),ve=[];ee&&re&&!j(re)&&!Re(ve,re);){var Ve=re[Ee];if(Ve){ee=Ve===$e;break}ve.push(re),re=G(re)}try{ee&&(X[Ee]=rt),rt[r]=1}catch{W[s]=!1}}}return rt}function Dt(X,Ee,se){var $e=Ee[X];return $e===se&&($e=G(Ee)[X]),typeof $e!==t&&ne("["+X+"] is not a "+t),$e}function at(X,Ee,se,$e,rt){function W(ve,Ve){var Ae=function(){var Ne=ot(this,Ve,ve,Ae)||Dt(Ve,ve,Ae);return Ne.apply(this,arguments)};return Ae[u]=1,Ae}if(!M(X)){var ee=se[n]=se[n]||{},re=ee[Ee]=ee[Ee]||{};ee[s]!==!1&&(ee[s]=!!rt),B(se,function(ve){Y(se,ve,!1)&&se[ve]!==$e[ve]&&(re[ve]=se[ve],delete se[ve],(!A(X,ve)||X[ve]&&!X[ve][u])&&(X[ve]=W(X,ve)))})}}function oe(X,Ee){if(T){for(var se=[],$e=G(Ee);$e&&!j($e)&&!Re(se,$e);){if($e===X)return!0;se.push($e),$e=G($e)}return!1}return!0}function ge(X,Ee){return A(X,i)?X.name||Ee||f:((X||{})[e]||{}).name||Ee||f}function le(X,Ee,se,$e){A(X,i)||ne("theClass is an invalid class definition.");var rt=X[i];oe(rt,Ee)||ne("["+ge(X)+"] is not in class hierarchy of ["+ge(Ee)+"]");var W=null;A(rt,a)?W=rt[a]:(W=o+ge(X,"_")+"$"+P,P++,rt[a]=W);var ee=le[l],re=!!ee[m];re&&$e&&$e[m]!==void 0&&(re=!!$e[m]);var ve=ye(Ee),Ve=st(rt,Ee,ve,re);se(Ee,Ve);var Ae=!!T&&!!ee[g];Ae&&$e&&(Ae=!!$e[g]),at(rt,W,Ee,ve,Ae!==!1)}var Ue={setInstFuncs:!0,useBaseInst:!0};return le[l]=Ue,le})});var wa=Ht((Zi,kc)=>{(function(e,i){typeof Zi=="object"&&typeof kc<"u"?i(Zi,ba(),Mc(),Ia()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/applicationinsights-core-js","@microsoft/dynamicproto-js"],i):(e=typeof globalThis<"u"?globalThis:e||self,i(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.applicationinsightsCoreJs,e.dynamicProto))})(Zi,function(e,i,t,n){"use strict";function u(ie){return ie&&typeof ie=="object"&&"default"in ie?ie.default:ie}var a=u(n),o=t.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),r=t.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),s=t.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),l=t.createEnumStyle({Normal:1,Critical:2}),f=t.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),c=t.objFreeze(i.__assignFn(i.__assignFn({},t._InternalMessageId),t.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),p,v="3.2.3",m="1DS-Web-JS-"+v,g="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",E="withCredentials",T="timeout",O=(p={},p[0]=0,p[2]=6,p[1]=1,p[3]=7,p[4098]=6,p[4097]=1,p[4099]=7,p),P=null,A=Boolean(t.getDocument()),M=Boolean(t.getWindow());function j(ie){return!(ie===""||t.isNullOrUndefined(ie))}function G(ie){if(ie){var K=ie.indexOf("-");if(K>-1)return ie.substring(0,K)}return""}function B(){return P===null&&(P=!t.isUndefined(Uint8Array)&&!Ee()&&!t.isReactNative()),P}function Y(ie){return!!(ie&&t.isNumber(ie)&&ie>=1&&ie<=4)}function ne(ie,K,xe){if(!K&&!j(K)||typeof ie!="string")return null;var Te=typeof K;if(Te==="string"||Te==="number"||Te==="boolean"||t.isArray(K))K={value:K};else if(Te==="object"&&!K.hasOwnProperty("value"))K={value:xe?JSON.stringify(K):K};else if(t.isNullOrUndefined(K.value)||K.value===""||!t.isString(K.value)&&!t.isNumber(K.value)&&!t.isBoolean(K.value)&&!t.isArray(K.value))return null;if(t.isArray(K.value)&&!se(K.value))return null;if(!t.isNullOrUndefined(K.kind)){if(t.isArray(K.value)||!Ue(K.kind))return null;K.value=K.value.toString()}return K}function ye(ie,K,xe){var Te=-1;if(!t.isUndefined(ie))if(K>0&&(K===32?Te=1<<13:K<=13&&(Te=K<<5)),X(xe))Te===-1&&(Te=0),Te|=xe;else{var ht=O[rt(ie)]||-1;Te!==-1&&ht!==-1?Te|=ht:ht===6&&(Te=ht)}return Te}function Re(){t.safeGetCookieMgr(null).setEnabled(!1)}function st(ie,K,xe){t.areCookiesSupported(null)&&t.safeGetCookieMgr(null).set(ie,K,xe*86400,null,"/")}function ot(ie){t.areCookiesSupported(null)&&t.safeGetCookieMgr(null).del(ie)}function Dt(ie){return t.areCookiesSupported(null)?at(t.safeGetCookieMgr(null),ie):""}function at(ie,K,xe){xe===void 0&&(xe=!0);var Te;return ie&&(Te=ie.get(K),xe&&Te&&decodeURIComponent&&(Te=decodeURIComponent(Te))),Te||""}function oe(ie){ie===void 0&&(ie="D");var K=t.newGuid();return ie==="B"?K="{"+K+"}":ie==="P"?K="("+K+")":ie==="N"&&(K=K.replace(/-/g,"")),K}function ge(ie,K,xe,Te,ht){var Ke={},He=!1,We=0,St=arguments.length,Tt=Object[t.strPrototype],Oe=arguments;for(Tt.toString.call(Oe[0])==="[object Boolean]"&&(He=Oe[0],We++);We<St;We++){var ie=Oe[We];t.objForEachKey(ie,function(ae,we){He&&we&&t.isObject(we)?t.isArray(we)?(Ke[ae]=Ke[ae]||[],t.arrForEach(we,function(Le,he){Le&&t.isObject(Le)?Ke[ae][he]=ge(!0,Ke[ae][he],Le):Ke[ae][he]=Le})):Ke[ae]=ge(!0,Ke[ae],we):Ke[ae]=we})}return Ke}var le=t.perfNow;function Ue(ie){return ie===0||ie>0&&ie<=13||ie===32}function X(ie){return ie>=0&&ie<=9}function Ee(){var ie=t.getNavigator();if(!t.isUndefined(ie)&&ie.userAgent){var K=ie.userAgent.toLowerCase();if((K.indexOf("safari")>=0||K.indexOf("firefox")>=0)&&K.indexOf("chrome")<0)return!0}return!1}function se(ie){return ie.length>0}function $e(ie,K){var xe=ie;xe.timings=xe.timings||{},xe.timings.processTelemetryStart=xe.timings.processTelemetryStart||{},xe.timings.processTelemetryStart[K]=le()}function rt(ie){var K=0;if(ie!=null){var xe=typeof ie;xe==="string"?K=1:xe==="number"?K=2:xe==="boolean"?K=3:xe===i.strShimObject&&(K=4,t.isArray(ie)?(K=4096,ie.length>0&&(K|=rt(ie[0]))):t.hasOwnProperty(ie,"value")&&(K=8192|rt(ie.value)))}return K}var W={Version:v,FullVersionString:m,strUndefined:t.strUndefined,strObject:t.strObject,Undefined:t.strUndefined,arrForEach:t.arrForEach,arrIndexOf:t.arrIndexOf,arrMap:t.arrMap,arrReduce:t.arrReduce,objKeys:t.objKeys,toISOString:t.toISOString,isReactNative:t.isReactNative,isString:t.isString,isNumber:t.isNumber,isBoolean:t.isBoolean,isFunction:t.isFunction,isArray:t.isArray,isObject:t.isObject,strTrim:t.strTrim,isDocumentObjectAvailable:A,isWindowObjectAvailable:M,isValueAssigned:j,getTenantId:G,isBeaconsSupported:t.isBeaconsSupported,isUint8ArrayAvailable:B,isLatency:Y,sanitizeProperty:ne,getISOString:t.toISOString,useXDomainRequest:t.useXDomainRequest,getCommonSchemaMetaData:ye,cookieAvailable:t.areCookiesSupported,disallowsSameSiteNone:t.uaDisallowsSameSiteNone,setCookie:st,deleteCookie:ot,getCookie:Dt,createGuid:oe,extend:ge,getTime:le,isValueKind:Ue,isArrayValid:se,objDefineAccessors:t.objDefineAccessors,addPageUnloadEventListener:t.addPageUnloadEventListener,setProcessTelemetryTimings:$e,addEventHandler:t.addEventHandler,getFieldValueType:rt,strEndsWith:t.strEndsWith,objForEachKey:t.objForEachKey},ee={_canUseCookies:void 0,isTypeof:t.isTypeof,isUndefined:t.isUndefined,isNullOrUndefined:t.isNullOrUndefined,hasOwnProperty:t.hasOwnProperty,isFunction:t.isFunction,isObject:t.isObject,isDate:t.isDate,isArray:t.isArray,isError:t.isError,isString:t.isString,isNumber:t.isNumber,isBoolean:t.isBoolean,toISOString:t.toISOString,arrForEach:t.arrForEach,arrIndexOf:t.arrIndexOf,arrMap:t.arrMap,arrReduce:t.arrReduce,strTrim:t.strTrim,objCreate:i.objCreateFn,objKeys:t.objKeys,objDefineAccessors:t.objDefineAccessors,addEventHandler:t.addEventHandler,dateNow:t.dateNow,isIE:t.isIE,disableCookies:Re,newGuid:t.newGuid,perfNow:t.perfNow,newId:t.newId,randomValue:t.randomValue,random32:t.random32,mwcRandomSeed:t.mwcRandomSeed,mwcRandom32:t.mwcRandom32,generateW3CId:t.generateW3CId};function re(){return!!t.getGlobalInst("chrome")}function ve(ie,K,xe,Te,ht,Ke){Te===void 0&&(Te=!1),ht===void 0&&(ht=!1);function He(St,Tt,Oe){try{St[Tt]=Oe}catch{}}var We=new XMLHttpRequest;return Te&&He(We,g,Te),xe&&He(We,E,xe),We.open(ie,K,!ht),xe&&He(We,E,xe),!ht&&Ke&&He(We,T,Ke),We}var Ve="version",Ae="properties",Ne=function(ie){i.__extendsFn(K,ie);function K(){var xe=ie.call(this)||this;return xe.pluginVersionStringArr=[],xe.pluginVersionString="",a(K,xe,function(Te,ht){(!Te.logger||!Te.logger.queue)&&(Te.logger=new t.DiagnosticLogger({loggingLevelConsole:1})),Te.initialize=function(Ke,He,We,St){t.doPerf(Te,function(){return"AppInsightsCore.initialize"},function(){if(Ke){Ke.endpointUrl||(Ke.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var Tt=Ke.propertyStorageOverride;if(Tt&&(!Tt.getProperty||!Tt.setProperty))throw new Error("Invalid property storage override passed.");Ke.channels&&t.arrForEach(Ke.channels,function(ae){ae&&t.arrForEach(ae,function(we){if(we.identifier&&we.version){var Le=we.identifier+"="+we.version;Te.pluginVersionStringArr.push(Le)}})})}Te.getWParam=function(){return typeof document<"u"?0:-1},He&&t.arrForEach(He,function(ae){if(ae&&ae.identifier&&ae.version){var we=ae.identifier+"="+ae.version;Te.pluginVersionStringArr.push(we)}}),Te.pluginVersionString=Te.pluginVersionStringArr.join(";");try{ht.initialize(Ke,He,We,St),Te.pollInternalLogs("InternalLog")}catch(ae){var Oe=Te.logger,Ye=t.dumpObj(ae);Ye.indexOf("channels")!==-1&&(Ye+=`
 - Channels must be provided through config.channels only!`),Oe.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+Ye)}},function(){return{config:Ke,extensions:He,logger:We,notificationManager:St}})},Te.track=function(Ke){t.doPerf(Te,function(){return"AppInsightsCore.track"},function(){var He=Ke;if(He){He.timings=He.timings||{},He.timings.trackStart=le(),Y(He.latency)||(He.latency=1);var We=He.ext=He.ext||{};We.sdk=We.sdk||{},We.sdk.ver=m;var St=He.baseData=He.baseData||{};St[Ae]||(St[Ae]={});var Tt=St[Ae];Tt[Ve]||(Tt[Ve]=""),Te.pluginVersionString!==""&&(Tt[Ve]=Te.pluginVersionString)}ht.track(He)},function(){return{item:Ke}},!Ke.sync)}}),xe}return K}(t.AppInsightsCore),Qe=function(ie){i.__extendsFn(K,ie);function K(){var xe=ie.call(this)||this;return a(K,xe,function(Te,ht){Te.initialize=function(Ke,He,We,St){Ke&&!Ke.endpointUrl&&(Ke.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),Te.getWParam=function(){return A?0:-1};try{ht.initialize(Ke,He,We,St)}catch(Tt){t._throwInternal(Te.logger,1,514,"Initialization Failed: "+t.dumpObj(Tt)+`
 - Note: Channels must be provided through config.channels only`)}},Te.track=function(Ke){var He=Ke;if(He){var We=He.ext=He.ext||{};We.sdk=We.sdk||{},We.sdk.ver=m}ht.track(He)}}),xe}return K}(t.BaseCore),At=t.isFunction;function gr(ie,K,xe){return function(Te){ie[K]=Te,xe()}}var dr=function(){function ie(K){var xe=0,Te=null,ht=[];a(ie,this,function(Tt){Tt.then=function(Oe,Ye){return new ie(function(ae,we){Ke(Oe,Ye,ae,we)})},Tt.catch=function(Oe){return Tt.then(null,Oe)}});function Ke(Tt,Oe,Ye,ae){ht.push(function(){var we;try{xe===1?we=At(Tt)?Tt(Te):Te:we=At(Oe)?Oe(Te):Te,we instanceof ie?we.then(Ye,ae):xe===2&&!At(Oe)?ae(we):Ye(we)}catch(Le){ae(Le);return}}),xe!==0&&He()}function He(){if(ht.length>0){var Tt=ht.slice();ht=[],setTimeout(function(){for(var Oe=0,Ye=Tt.length;Oe<Ye;++Oe)try{Tt[Oe]()}catch{}},0)}}function We(Tt){xe===0&&(Te=Tt,xe=1,He())}function St(Tt){xe===0&&(Te=Tt,xe=2,He())}(function(){if(!At(K))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{K(We,St)}catch(Oe){St(Oe)}})()}return ie.resolve=function(K){return K instanceof ie?K:K&&At(K.then)?new ie(function(xe,Te){try{K.then(xe,Te)}catch(ht){Te(ht)}}):new ie(function(xe){xe(K)})},ie.reject=function(K){return new ie(function(xe,Te){Te(K)})},ie.all=function(K){if(!(!K||!K.length))return new ie(function(xe,Te){try{for(var ht=[],Ke=0,He=0;He<K.length;He++){var We=K[He];We&&At(We.then)?(Ke++,We.then(gr(ht,He,function(){--Ke===0&&xe(ht)}),Te)):ht[He]=We}Ke===0&&setTimeout(function(){xe(ht)},0)}catch(St){Te(St)}})},ie.race=function(K){return new ie(function(xe,Te){if(!(!K||!K.length))try{for(var ht=function(He){var We=K[He];We&&At(We.then)?We.then(xe,Te):setTimeout(function(){xe(We)},0)},Ke=0;Ke<K.length;Ke++)ht(Ke)}catch(He){Te(He)}})},ie}(),ue=6e5,_r=0,tr=[],Vt=[],Ut=[];function or(){return new Date().getTime()}var rr=function(){function ie(K,xe){var Te=0,ht=(K||"<unnamed>")+"."+_r;_r++,a(ie,this,function(We){var St=null,Tt=0;We.scheduleEvent=function(Ye,ae,we){var Le=ht+"."+Tt;Tt++,ae&&(Le+="-("+ae+")");var he=Le+"{"+Te+"}";Te++;var ut={evt:null,tm:or(),id:he,isRunning:!1,isAborted:!1};return St?ut.evt=je(ut,St):ut.evt=Me(ut),St=ut,St.evt._schId=he,ut.evt;function qt(Se){for(var Z=or(),et=Z-ue,ze=Se.length,pe=0;pe<ze;){var vt=Se[pe];if(vt&&vt.tm<et){var Et=null;vt.abort?(Et="Aborting ["+vt.id+"] due to Excessive runtime ("+(Z-vt.tm)+" ms)",vt.abort(Et)):Et="Removing ["+vt.id+"] due to Excessive runtime ("+(Z-vt.tm)+" ms)",He(Et),Se.splice(pe,1),ze--}else pe++}}function Ze(Se,Z){var et=!1,ze=Oe(tr,Se);if(ze||(ze=Oe(Ut,Se),et=!0),ze){ze.to&&(clearTimeout(ze.to),ze.to=null);var pe=or()-ze.tm;Z?et?He("Timed out event ["+Se+"] finally complete -- "+pe+" ms"):Ke("Promise ["+Se+"] Complete -- "+pe+" ms"):(Ut.push(ze),He("Event ["+Se+"] Timed out and removed -- "+pe+" ms"))}else Ke("Failed to remove ["+Se+"] from running queue");St&&St.id===Se&&(St=null),qt(tr),qt(Vt),qt(Ut)}function $t(Se,Z){return function(et){return Ze(Se,!0),Z&&Z(et),et}}function pr(Se,Z,et,ze){Z.then(function(pe){return pe instanceof dr?(Ke("Event ["+Se+"] returned a promise -- waiting"),pr(Se,pe,et,ze),pe):$t(Se,et)(pe)},$t(Se,ze))}function Er(Se,Z){var et=Se.id;return new dr(function(ze,pe){Ke("Event ["+et+"] Starting -- waited for "+(Se.wTm||"--")+" ms"),Se.isRunning=!0,Se.abort=function(Et){Se.abort=null,Se.isAborted=!0,Ze(et,!1),pe(new Error(Et))};var vt=Z(et);vt instanceof dr?(we&&(Se.to=setTimeout(function(){Ze(et,!1),pe(new Error("Timed out after ["+we+"] ms"))},we)),pr(et,vt,function(Et){Ke("Event ["+et+"] Resolving after "+(or()-Se.tm)+" ms"),ze(Et)},pe)):(Ke("Promise ["+et+"] Auto completed as the start action did not return a promise"),ze())})}function Me(Se){var Z=or();return Se.wTm=Z-Se.tm,Se.tm=Z,Se.isAborted?dr.reject(new Error("["+Le+"] was aborted")):(tr.push(Se),Er(Se,Ye))}function je(Se,Z){var et=new dr(function(ze,pe){var vt=or()-Z.tm,Et=Z.id;Ke("["+Le+"] is waiting for ["+Et+":"+vt+" ms] to complete before starting -- ["+Vt.length+"] waiting and ["+tr.length+"] running"),Se.abort=function(Pt){Se.abort=null,Oe(Vt,Le),Se.isAborted=!0,pe(new Error(Pt))},Z.evt.then(function(Pt){Oe(Vt,Le),Me(Se).then(ze,pe)},function(Pt){Oe(Vt,Le),Me(Se).then(ze,pe)})});return Vt.push(Se),et}};function Oe(Ye,ae){for(var we=0;we<Ye.length;we++)if(Ye[we].id===ae)return Ye.splice(we,1)[0];return null}});function Ke(We){var St=t.getGlobal();St&&St.QUnit&&console&&console.log("ESPromiseScheduler["+ht+"] "+We)}function He(We){xe&&xe.warnToConsole("ESPromiseScheduler["+ht+"] "+We)}}return ie.incomplete=function(){return tr},ie.waitingToStart=function(){return Vt},ie}(),yr=function(){function ie(K){var xe=this,Te={},ht=[],Ke=[];K&&Ke.push(K);function He(Oe,Ye){var ae,we=Te[Oe];if(we&&(ae=we[Ye]),!ae&&ae!==null){if(t.isString(Oe)&&t.isString(Ye))if(Ke.length>0){for(var Le=0;Le<Ke.length;Le++)if(Ke[Le].handleField(Oe,Ye)){ae={canHandle:!0,fieldHandler:Ke[Le]};break}}else ht.length===0&&(ae={canHandle:!0});if(!ae&&ae!==null){ae=null;for(var Le=0;Le<ht.length;Le++)if(ht[Le].handleField(Oe,Ye)){ae={canHandle:!0,handler:ht[Le],fieldHandler:null};break}}we||(we=Te[Oe]={}),we[Ye]=ae}return ae}xe.addSanitizer=function(Oe){Oe&&(ht.push(Oe),Te={})},xe.addFieldSanitizer=function(Oe){Oe&&(Ke.push(Oe),Te={})},xe.handleField=function(Oe,Ye){var ae=He(Oe,Ye);return ae?ae.canHandle:!1},xe.value=function(Oe,Ye,ae,we){var Le=He(Oe,Ye);if(Le&&Le.canHandle){if(!Le||!Le.canHandle)return null;if(Le.handler)return Le.handler.value(Oe,Ye,ae,we);if(!t.isString(Ye)||t.isNullOrUndefined(ae)||ae==="")return null;var he=null,ut=rt(ae);if((ut&8192)===8192){var qt=ut&-8193;if(he=ae,!j(he.value)||qt!==1&&qt!==2&&qt!==3&&(qt&4096)!==4096)return null}else ut===1||ut===2||ut===3||(ut&4096)===4096?he=St(Oe,Ye,ae):ut===4&&(he=St(Oe,Ye,we?JSON.stringify(ae):ae));if(he)return We(Le,Oe,Ye,ut,he,we)}return null},xe.property=function(Oe,Ye,ae,we){var Le=He(Oe,Ye);if(!Le||!Le.canHandle||!t.isString(Ye)||t.isNullOrUndefined(ae)||!j(ae.value))return null;var he=rt(ae.value);return he===0?null:We(Le,Oe,Ye,he,ae,we)};function We(Oe,Ye,ae,we,Le,he){if(Oe.handler)return Oe.handler.property(Ye,ae,Le,he);if(!t.isNullOrUndefined(Le.kind)){if((we&4096)===4096||!Ue(Le.kind))return null;Le.value=Le.value.toString()}return Tt(Oe.fieldHandler,Ye,ae,we,Le)}function St(Oe,Ye,ae){return j(ae)?{value:ae}:null}function Tt(Oe,Ye,ae,we,Le){if(Le&&Oe){var he=Oe.getSanitizer(Ye,ae,we,Le.kind,Le.propertyType);if(he)if(we===4){var ut={},qt=Le.value;t.objForEachKey(qt,function($t,pr){var Er=Ye+"."+ae;if(j(pr)){var Me=St(Er,$t,pr);Me=Tt(Oe,Er,$t,rt(pr),Me),Me&&(ut[$t]=Me.value)}}),Le.value=ut}else{var Ze={path:Ye,name:ae,type:we,prop:Le,sanitizer:xe};Le=he.call(xe,Ze)}}return Le}}return ie.getFieldType=rt,ie}();e.BaseTelemetryPlugin=t.BaseTelemetryPlugin,e.DiagnosticLogger=t.DiagnosticLogger,e.EventHelper=t.EventHelper,e.EventsDiscardedReason=t.EventsDiscardedReason,e.InternalAppInsightsCore=t.AppInsightsCore,e.InternalBaseCore=t.BaseCore,e.LoggingSeverity=t.LoggingSeverity,e.MinChannelPriorty=t.MinChannelPriorty,e.NotificationManager=t.NotificationManager,e.PerfEvent=t.PerfEvent,e.PerfManager=t.PerfManager,e.ProcessTelemetryContext=t.ProcessTelemetryContext,e.Undefined=t.strUndefined,e._InternalLogMessage=t._InternalLogMessage,e._InternalMessageId=t._InternalMessageId,e.__getRegisteredEvents=t.__getRegisteredEvents,e._throwInternal=t._throwInternal,e.addEventHandler=t.addEventHandler,e.addEventListeners=t.addEventListeners,e.addPageHideEventListener=t.addPageHideEventListener,e.addPageShowEventListener=t.addPageShowEventListener,e.addPageUnloadEventListener=t.addPageUnloadEventListener,e.areCookiesSupported=t.areCookiesSupported,e.arrForEach=t.arrForEach,e.arrIndexOf=t.arrIndexOf,e.arrMap=t.arrMap,e.arrReduce=t.arrReduce,e.attachEvent=t.attachEvent,e.cookieAvailable=t.areCookiesSupported,e.createCookieMgr=t.createCookieMgr,e.createEnumStyle=t.createEnumStyle,e.createProcessTelemetryContext=t.createProcessTelemetryContext,e.createTraceParent=t.createTraceParent,e.createUniqueNamespace=t.createUniqueNamespace,e.createUnloadHandlerContainer=t.createUnloadHandlerContainer,e.dateNow=t.dateNow,e.detachEvent=t.detachEvent,e.disallowsSameSiteNone=t.uaDisallowsSameSiteNone,e.doPerf=t.doPerf,e.dumpObj=t.dumpObj,e.eventOff=t.eventOff,e.eventOn=t.eventOn,e.findW3cTraceParent=t.findW3cTraceParent,e.formatTraceParent=t.formatTraceParent,e.generateW3CId=t.generateW3CId,e.getConsole=t.getConsole,e.getCrypto=t.getCrypto,e.getDocument=t.getDocument,e.getExceptionName=t.getExceptionName,e.getGlobal=t.getGlobal,e.getGlobalInst=t.getGlobalInst,e.getHistory=t.getHistory,e.getIEVersion=t.getIEVersion,e.getISOString=t.toISOString,e.getJSON=t.getJSON,e.getLocation=t.getLocation,e.getMsCrypto=t.getMsCrypto,e.getNavigator=t.getNavigator,e.getPerformance=t.getPerformance,e.getSetValue=t.getSetValue,e.getWindow=t.getWindow,e.hasDocument=t.hasDocument,e.hasHistory=t.hasHistory,e.hasJSON=t.hasJSON,e.hasNavigator=t.hasNavigator,e.hasOwnProperty=t.hasOwnProperty,e.hasWindow=t.hasWindow,e.isArray=t.isArray,e.isBeaconsSupported=t.isBeaconsSupported,e.isBoolean=t.isBoolean,e.isDate=t.isDate,e.isError=t.isError,e.isFetchSupported=t.isFetchSupported,e.isFunction=t.isFunction,e.isIE=t.isIE,e.isNotTruthy=t.isNotTruthy,e.isNullOrUndefined=t.isNullOrUndefined,e.isNumber=t.isNumber,e.isObject=t.isObject,e.isReactNative=t.isReactNative,e.isSampledFlag=t.isSampledFlag,e.isString=t.isString,e.isTruthy=t.isTruthy,e.isTypeof=t.isTypeof,e.isUndefined=t.isUndefined,e.isValidSpanId=t.isValidSpanId,e.isValidTraceId=t.isValidTraceId,e.isValidTraceParent=t.isValidTraceParent,e.isXhrSupported=t.isXhrSupported,e.mergeEvtNamespace=t.mergeEvtNamespace,e.newGuid=t.newGuid,e.newId=t.newId,e.normalizeJsName=t.normalizeJsName,e.objCreate=t.objCreate,e.objDefineAccessors=t.objDefineAccessors,e.objForEachKey=t.objForEachKey,e.objFreeze=t.objFreeze,e.objKeys=t.objKeys,e.objSeal=t.objSeal,e.optimizeObject=t.optimizeObject,e.parseTraceParent=t.parseTraceParent,e.perfNow=t.perfNow,e.proxyAssign=t.proxyAssign,e.proxyFunctionAs=t.proxyFunctionAs,e.proxyFunctions=t.proxyFunctions,e.random32=t.random32,e.randomValue=t.randomValue,e.removeEventHandler=t.removeEventHandler,e.removeEventListeners=t.removeEventListeners,e.removePageHideEventListener=t.removePageHideEventListener,e.removePageShowEventListener=t.removePageShowEventListener,e.removePageUnloadEventListener=t.removePageUnloadEventListener,e.safeGetCookieMgr=t.safeGetCookieMgr,e.safeGetLogger=t.safeGetLogger,e.setEnableEnvMocks=t.setEnableEnvMocks,e.setValue=t.setValue,e.strContains=t.strContains,e.strEndsWith=t.strEndsWith,e.strFunction=t.strFunction,e.strObject=t.strObject,e.strPrototype=t.strPrototype,e.strStartsWith=t.strStartsWith,e.strTrim=t.strTrim,e.strUndefined=t.strUndefined,e.throwError=t.throwError,e.toISOString=t.toISOString,e.useXDomainRequest=t.useXDomainRequest,e.AppInsightsCore=Ne,e.BaseCore=Qe,e.CoreUtils=ee,e.ESPromise=dr,e.ESPromiseScheduler=rr,e.EventLatency=r,e.EventPersistence=l,e.EventPropertyType=s,e.FullVersionString=m,e.TraceLevel=f,e.Utils=W,e.ValueKind=o,e.ValueSanitizer=yr,e.Version=v,e._ExtendedInternalMessageId=c,e.createGuid=oe,e.deleteCookie=ot,e.disableCookies=Re,e.extend=ge,e.getCommonSchemaMetaData=ye,e.getCookie=Dt,e.getCookieValue=at,e.getFieldValueType=rt,e.getTenantId=G,e.getTime=le,e.isArrayValid=se,e.isChromium=re,e.isDocumentObjectAvailable=A,e.isLatency=Y,e.isUint8ArrayAvailable=B,e.isValueAssigned=j,e.isValueKind=Ue,e.isWindowObjectAvailable=M,e.openXhr=ve,e.sanitizeProperty=ne,e.setCookie=st,e.setProcessTelemetryTimings=$e,function(ie,K,xe){var Te=Object.defineProperty;if(Te)try{return Te(ie,K,xe)}catch{}return xe&&typeof xe.value!==void 0&&(ie[K]=xe.value),ie}(e,"__esModule",{value:!0})})});var jc=Ht((Ji,Lc)=>{(function(e,i){typeof Ji=="object"&&typeof Lc<"u"?i(Ji,ba(),Ia(),wa()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/dynamicproto-js","@microsoft/1ds-core-js"],i):(e=typeof globalThis<"u"?globalThis:e||self,i(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.dynamicProto,e._1dsCoreJs))})(Ji,function(e,i,t,n){"use strict";function u(Me){return Me&&typeof Me=="object"&&"default"in Me?Me.default:Me}var a=u(t),o="REAL_TIME",r="NEAR_REAL_TIME",s="BEST_EFFORT",l="POST",f="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",c="drop",p="send",v="requeue",m="rspFail",g="oth",E="no-cache, no-store",T="application/x-json-stream",O="cache-control",P="content-type",A="kill-tokens",M="kill-duration",j="kill-duration-seconds",G="time-delta-millis",B="client-version",Y="client-id",ne="time-delta-to-apply-millis",ye="upload-time",Re="apikey",st="AuthMsaDeviceTicket",ot="AuthXToken",Dt="NoResponseBody",at="msfpc";function oe(Me){var je=(Me.ext||{}).intweb;return je&&n.isValueAssigned(je[at])?je[at]:null}function ge(Me){for(var je=null,Se=0;je===null&&Se<Me.length;Se++)je=oe(Me[Se]);return je}var le=function(){function Me(je,Se){var Z=Se?[].concat(Se):[],et=this,ze=ge(Z);et.iKey=function(){return je},et.Msfpc=function(){return ze||""},et.count=function(){return Z.length},et.events=function(){return Z},et.addEvent=function(pe){return pe?(Z.push(pe),ze||(ze=oe(pe)),!0):!1},et.split=function(pe,vt){var Et;if(pe<Z.length){var Pt=Z.length-pe;n.isNullOrUndefined(vt)||(Pt=vt<Pt?vt:Pt),Et=Z.splice(pe,Pt),ze=ge(Z)}return new Me(je,Et)}}return Me.create=function(je,Se){return new Me(je,Se)},Me}(),Ue=20,X=3984588,Ee=65e3,se=2e6,$e=Math.min(se,Ee),rt="metadata",W="f",ee=/\./,re=function(){function Me(je,Se,Z,et){var ze="data",pe="baseData",vt="ext",Et=!!et,Pt=!0,Bt=Se,zt={};a(Me,this,function(jt){jt.createPayload=function(ct,mt,d,_,S,C){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:ct,isTeardown:mt,isSync:d,isBeacon:_,sendType:C,sendReason:S}},jt.appendPayload=function(ct,mt,d){var _=ct&&mt&&!ct.overflow;return _&&n.doPerf(je,function(){return"Serializer:appendPayload"},function(){for(var S=mt.events(),C=ct.payloadBlob,R=ct.numEvents,k=!1,L=[],Q=[],te=ct.isBeacon,Fe=te?Ee:X,lt=te?$e:se,qe=0,it=0;qe<S.length;){var dt=S[qe];if(dt){if(R>=d){ct.overflow=mt.split(qe);break}var bt=jt.getEventBlob(dt);if(bt&&bt.length<=lt){var Ft=bt.length,Lr=C.length;if(Lr+Ft>Fe){ct.overflow=mt.split(qe);break}C&&(C+=`
`),C+=bt,it++,it>Ue&&(C.substr(0,1),it=0),k=!0,R++}else bt?L.push(dt):Q.push(dt),S.splice(qe,1),qe--}qe++}if(L&&L.length>0&&ct.sizeExceed.push(le.create(mt.iKey(),L)),Q&&Q.length>0&&ct.failedEvts.push(le.create(mt.iKey(),Q)),k){ct.batches.push(mt),ct.payloadBlob=C,ct.numEvents=R;var cr=mt.iKey();n.arrIndexOf(ct.apiKeys,cr)===-1&&ct.apiKeys.push(cr)}},function(){return{payload:ct,theBatch:{iKey:mt.iKey(),evts:mt.events()},max:d}}),_},jt.getEventBlob=function(ct){try{return n.doPerf(je,function(){return"Serializer.getEventBlob"},function(){var mt={};mt.name=ct.name,mt.time=ct.time,mt.ver=ct.ver,mt.iKey="o:"+n.getTenantId(ct.iKey);var d={},_=ct[vt];_&&(mt[vt]=d,n.objForEachKey(_,function(R,k){var L=d[R]={};Ct(k,L,"ext."+R,!0,null,null,!0)}));var S=mt[ze]={};S.baseType=ct.baseType;var C=S[pe]={};return Ct(ct.baseData,C,pe,!1,[pe],function(R,k,L){ve(d,R,k,L)},Pt),Ct(ct.data,S,ze,!1,[],function(R,k,L){ve(d,R,k,L)},Pt),JSON.stringify(mt)},function(){return{item:ct}})}catch{return null}};function nt(ct,mt){var d=zt[ct];return d===void 0&&(ct.length>=7&&(d=n.strStartsWith(ct,"ext.metadata")||n.strStartsWith(ct,"ext.web")),zt[ct]=d),d}function Ct(ct,mt,d,_,S,C,R){n.objForEachKey(ct,function(k,L){var Q=null;if(L||n.isValueAssigned(L)){var te=d,Fe=k,lt=S,qe=mt;if(Et&&!_&&ee.test(k)){var it=k.split("."),dt=it.length;if(dt>1){lt&&(lt=lt.slice());for(var bt=0;bt<dt-1;bt++){var Ft=it[bt];qe=qe[Ft]=qe[Ft]||{},te+="."+Ft,lt&&lt.push(Ft)}Fe=it[dt-1]}}var Lr=_&&nt(te);if(!Lr&&Bt&&Bt.handleField(te,Fe)?Q=Bt.value(te,Fe,L,Z):Q=n.sanitizeProperty(Fe,L,Z),Q){var cr=Q.value;if(qe[Fe]=cr,C&&C(lt,Fe,Q),R&&typeof cr=="object"&&!n.isArray(cr)){var hr=lt;hr&&(hr=hr.slice(),hr.push(Fe)),Ct(L,cr,te+"."+Fe,_,hr,C,R)}}}})}})}return Me}();function ve(Me,je,Se,Z){if(Z&&Me){var et=n.getCommonSchemaMetaData(Z.value,Z.kind,Z.propertyType);if(et>-1){var ze=Me[rt];ze||(ze=Me[rt]={f:{}});var pe=ze[W];if(pe||(pe=ze[W]={}),je)for(var vt=0;vt<je.length;vt++){var Et=je[vt];pe[Et]||(pe[Et]={f:{}});var Pt=pe[Et][W];Pt||(Pt=pe[Et][W]={}),pe=Pt}pe=pe[Se]={},n.isArray(Z.value)?pe.a={t:et}:pe.t=et}}}var Ve=.8,Ae=1.2,Ne=3e3,Qe=6e5;function At(Me){return!(Me>=300&&Me<500&&Me!=408&&Me!=429||Me==501||Me==505)}function gr(Me){var je=0,Se=Ne*Ve,Z=Ne*Ae,et=Math.floor(Math.random()*(Z-Se))+Se;return je=Math.pow(2,Me)*et,Math.min(je,Qe)}var dr=1e3,ue=function(){function Me(){var je={};function Se(Z){var et=[];return Z&&n.arrForEach(Z,function(ze){et.push(n.strTrim(ze))}),et}a(Me,this,function(Z){Z.setKillSwitchTenants=function(et,ze){if(et&&ze)try{var pe=Se(et.split(","));if(ze==="this-request-only")return pe;for(var vt=parseInt(ze,10)*dr,Et=0;Et<pe.length;++Et)je[pe[Et]]=n.dateNow()+vt}catch{return[]}return[]},Z.isTenantKilled=function(et){var ze=je,pe=n.strTrim(et);return ze[pe]!==void 0&&ze[pe]>n.dateNow()?!0:(delete ze[pe],!1)}})}return Me}(),_r=function(){function Me(){var je=!0,Se=!0,Z=!0,et="use-collector-delta",ze=!1;a(Me,this,function(pe){pe.allowRequestSending=function(){return je},pe.firstRequestSent=function(){Z&&(Z=!1,ze||(je=!1))},pe.shouldAddClockSkewHeaders=function(){return Se},pe.getClockSkewHeaderValue=function(){return et},pe.setClockSkew=function(vt){ze||(vt?(et=vt,Se=!0,ze=!0):Se=!1,je=!0)}})}return Me}(),tr,Vt="sendAttempt",Ut="&"+Dt+"=true",or=(tr={},tr[1]=v,tr[100]=v,tr[200]="sent",tr[8004]=c,tr[8003]=c,tr),rr={},yr={};function ie(Me,je,Se){rr[Me]=je,Se!==!1&&(yr[je]=Me)}ie(st,st,!1),ie(B,B),ie(Y,"Client-Id"),ie(Re,Re),ie(ne,ne),ie(ye,ye),ie(ot,ot);function K(Me){try{return Me.responseText}catch{}return""}function xe(Me,je){var Se=!1;if(Me&&je){var Z=n.objKeys(Me);if(Z&&Z.length>0)for(var et=je.toLowerCase(),ze=0;ze<Z.length;ze++){var pe=Z[ze];if(pe&&n.hasOwnProperty(je,pe)&&pe.toLowerCase()===et){Se=!0;break}}}return Se}function Te(Me,je,Se,Z){je&&Se&&Se.length>0&&(Z&&rr[je]?(Me.hdrs[rr[je]]=Se,Me.useHdrs=!0):Me.url+="&"+je+"="+Se)}var ht=function(){function Me(je,Se,Z,et,ze){this._responseHandlers=[];var pe="?cors=true&"+P.toLowerCase()+"="+T,vt=new ue,Et=!1,Pt=new _r,Bt=!1,zt=0,jt,nt,Ct,ct=!0,mt=[],d={},_=[],S=null,C=!1,R,k=!1,L=!1,Q,te;a(Me,this,function(Fe){var lt=!0;Fe.initialize=function(H,me,_e,Pe,Xe){var It;Xe||(Xe={}),pe=H+pe,L=n.isUndefined(Xe.avoidOptions)?!0:!Xe.avoidOptions,Ct=me,R=me.getCookieMgr(),C=!Ct.config.disableEventTimings;var gt=!!Ct.config.enableCompoundKey;jt=_e;var Ot=Xe.valueSanitizer,wt=Xe.stringifyObjects;n.isUndefined(Xe.enableCompoundKey)||(gt=!!Xe.enableCompoundKey),Q=Xe.xhrTimeout,te=Xe.disableXhrSync,Bt=!n.isReactNative(),S=new re(Ct,Ot,wt,gt);var Je=Pe,q=Xe.alwaysUseXhrOverride?Pe:null,ce=Xe.alwaysUseXhrOverride?Pe:null;if(!Pe){ct=!1;var fe=n.getLocation();fe&&fe.protocol&&fe.protocol.toLowerCase()==="file:"&&(lt=!1);var Ce=[];n.isReactNative()?Ce=[2,1]:Ce=[1,2,3];var ft=Xe.transports;ft&&(n.isNumber(ft)?Ce=[ft].concat(Ce):n.isArray(ft)&&(Ce=ft.concat(Ce))),Pe=qe(Ce,!1),Je=qe(Ce,!0),Pe||jt.diagLog().warnToConsole("No available transport to send events")}nt=(It={},It[0]=Pe,It[1]=Je||qe([1,2,3],!0),It[2]=q||qe([3,2],!0)||Je||qe([1],!0),It[3]=ce||qe([2,3],!0)||Je||qe([1],!0),It)};function qe(H,me){for(var _e=0,Pe=null,Xe=0;Pe==null&&Xe<H.length;)_e=H[Xe],_e===1?n.useXDomainRequest()?Pe=it:n.isXhrSupported()&&(Pe=bt):_e===2&&n.isFetchSupported(me)?Pe=dt:Bt&&_e===3&&n.isBeaconsSupported()&&(Pe=Lr),Xe++;return Pe?{_transport:_e,_isSync:me,sendPOST:Pe}:null}Fe._getDbgPlgTargets=function(){return[nt[0],vt,S,nt]};function it(H,me,_e){var Pe=new XDomainRequest;Pe.open(l,H.urlString),H.timeout&&(Pe.timeout=H.timeout),Pe.onload=function(){var Xe=K(Pe);Ft(me,200,{},Xe),Cr(Xe)},Pe.onerror=function(){Ft(me,400,{})},Pe.ontimeout=function(){Ft(me,500,{})},Pe.onprogress=function(){},_e?Pe.send(H.data):ze.set(function(){Pe.send(H.data)},0)}function dt(H,me,_e){var Pe,Xe=H.urlString,It=!1,gt=!1,Ot=(Pe={body:H.data,method:l},Pe[f]=!0,Pe);_e&&(Ot.keepalive=!0,H._sendReason===2&&(It=!0,Xe+=Ut)),lt&&(Ot.credentials="include"),H.headers&&n.objKeys(H.headers).length>0&&(Ot.headers=H.headers),fetch(Xe,Ot).then(function(wt){var Je={},q="";wt.headers&&wt.headers.forEach(function(ce,fe){Je[fe]=ce}),wt.body&&wt.text().then(function(ce){q=ce}),gt||(gt=!0,Ft(me,wt.status,Je,q),Cr(q))}).catch(function(wt){gt||(gt=!0,Ft(me,0,{}))}),It&&!gt&&(gt=!0,Ft(me,200,{})),!gt&&H.timeout>0&&ze.set(function(){gt||(gt=!0,Ft(me,500,{}))},H.timeout)}function bt(H,me,_e){var Pe=H.urlString;function Xe(wt,Je,q){if(!wt[q]&&Je&&Je.getResponseHeader){var ce=Je.getResponseHeader(q);ce&&(wt[q]=n.strTrim(ce))}return wt}function It(wt){var Je={};return wt.getAllResponseHeaders?Je=Zr(wt.getAllResponseHeaders()):(Je=Xe(Je,wt,G),Je=Xe(Je,wt,M),Je=Xe(Je,wt,j)),Je}function gt(wt,Je){Ft(me,wt.status,It(wt),Je)}_e&&H.disableXhrSync&&(_e=!1);var Ot=n.openXhr(l,Pe,lt,!0,_e,H.timeout);n.objForEachKey(H.headers,function(wt,Je){Ot.setRequestHeader(wt,Je)}),Ot.onload=function(){var wt=K(Ot);gt(Ot,wt),Cr(wt)},Ot.onerror=function(){gt(Ot)},Ot.ontimeout=function(){gt(Ot)},Ot.send(H.data)}function Ft(H,me,_e,Pe){try{H(me,_e,Pe)}catch(Xe){n._throwInternal(jt.diagLog(),2,518,n.dumpObj(Xe))}}function Lr(H,me,_e){var Pe=H,Xe=200,It=Pe._thePayload,gt=H.urlString+Ut;try{var Ot=n.getNavigator();if(!Ot.sendBeacon(gt,H.data))if(It){var wt=[];n.arrForEach(It.batches,function(Je){if(wt&&Je&&Je.count()>0){for(var q=Je.events(),ce=0;ce<q.length;ce++)if(!Ot.sendBeacon(gt,S.getEventBlob(q[ce]))){wt.push(Je.split(ce));break}}else wt.push(Je.split(0))}),Tr(wt,8003,It.sendType,!0)}else Xe=0}catch(Je){jt.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+n.dumpObj(Je)),Xe=0}finally{Ft(me,Xe,{},"")}}function cr(H){return H===2||H===3}function hr(H){return k&&cr(H)&&(H=2),H}Fe.addQueryStringParameter=function(H,me){for(var _e=0;_e<mt.length;_e++)if(mt[_e].name===H){mt[_e].value=me;return}mt.push({name:H,value:me})},Fe.addHeader=function(H,me){d[H]=me},Fe.canSendRequest=function(){return Hr()&&Pt.allowRequestSending()},Fe.sendQueuedRequests=function(H,me){n.isUndefined(H)&&(H=0),k&&(H=hr(H),me=2),Qr(_,H,0)&&wr(jr(),0,!1,H,me||0)},Fe.isCompletelyIdle=function(){return!Et&&zt===0&&_.length===0},Fe.setUnloading=function(H){k=H},Fe.addBatch=function(H){if(H&&H.count()>0){if(vt.isTenantKilled(H.iKey()))return!1;_.push(H)}return!0},Fe.teardown=function(){_.length>0&&wr(jr(),0,!0,2,2)},Fe.pause=function(){Et=!0},Fe.resume=function(){Et=!1,Fe.sendQueuedRequests(0,4)},Fe.sendSynchronousBatch=function(H,me,_e){H&&H.count()>0&&(n.isNullOrUndefined(me)&&(me=1),k&&(me=hr(me),_e=2),wr([H],0,!1,me,_e||0))};function Hr(){return!Et&&zt<Se}function jr(){var H=_;return _=[],H}function Qr(H,me,_e){var Pe=!1;return H&&H.length>0&&!Et&&nt[me]&&S&&(Pe=me!==0||Hr()&&(_e>0||Pt.allowRequestSending())),Pe}function nr(H){var me={};return H&&n.arrForEach(H,function(_e,Pe){me[Pe]={iKey:_e.iKey(),evts:_e.events()}}),me}function wr(H,me,_e,Pe,Xe){if(!(!H||H.length===0)){if(Et){Tr(H,1,Pe);return}Pe=hr(Pe);try{var It=H,gt=Pe!==0;n.doPerf(Ct,function(){return"HttpManager:_sendBatches"},function(Ot){Ot&&(H=H.slice(0));for(var wt=[],Je=null,q=n.getTime(),ce=nt[Pe]||(gt?nt[1]:nt[0]),fe=(k||cr(Pe)||ce&&ce._transport===3)&&Ar();Qr(H,Pe,me);){var Ce=H.shift();Ce&&Ce.count()>0&&(vt.isTenantKilled(Ce.iKey())?wt.push(Ce):(Je=Je||S.createPayload(me,_e,gt,fe,Xe,Pe),S.appendPayload(Je,Ce,je)?Je.overflow!==null&&(H=[Je.overflow].concat(H),Je.overflow=null,Or(Je,q,n.getTime(),Xe),q=n.getTime(),Je=null):(Or(Je,q,n.getTime(),Xe),q=n.getTime(),H=[Ce].concat(H),Je=null)))}Je&&Or(Je,q,n.getTime(),Xe),H.length>0&&(_=H.concat(_)),Tr(wt,8004,Pe)},function(){return{batches:nr(It),retryCount:me,isTeardown:_e,isSynchronous:gt,sendReason:Xe,useSendBeacon:cr(Pe),sendType:Pe}},!gt)}catch(Ot){n._throwInternal(jt.diagLog(),2,48,"Unexpected Exception sending batch: "+n.dumpObj(Ot))}}}function qr(H,me){var _e={url:pe,hdrs:{},useHdrs:!1};me?(_e.hdrs=n.extend(_e.hdrs,d),_e.useHdrs=n.objKeys(_e.hdrs).length>0):n.objForEachKey(d,function(Ot,wt){yr[Ot]?Te(_e,yr[Ot],wt,!1):(_e.hdrs[Ot]=wt,_e.useHdrs=!0)}),Te(_e,Y,"NO_AUTH",me),Te(_e,B,n.FullVersionString,me);var Pe="";n.arrForEach(H.apiKeys,function(Ot){Pe.length>0&&(Pe+=","),Pe+=Ot}),Te(_e,Re,Pe,me),Te(_e,ye,n.dateNow().toString(),me);var Xe=Gr(H);if(n.isValueAssigned(Xe)&&(_e.url+="&ext.intweb.msfpc="+Xe),Pt.shouldAddClockSkewHeaders()&&Te(_e,ne,Pt.getClockSkewHeaderValue(),me),Ct.getWParam){var It=Ct.getWParam();It>=0&&(_e.url+="&w="+It)}for(var gt=0;gt<mt.length;gt++)_e.url+="&"+mt[gt].name+"="+mt[gt].value;return _e}function Ar(){return!ct&&Bt&&n.isBeaconsSupported()}function br(H,me,_e){H[me]=H[me]||{},H[me][jt.identifier]=_e}function Or(H,me,_e,Pe){if(H&&H.payloadBlob&&H.payloadBlob.length>0){var Xe=!!Fe.sendHook,It=nt[H.sendType];!cr(H.sendType)&&H.isBeacon&&H.sendReason===2&&(It=nt[2]||nt[3]||It);var gt=L;(H.isBeacon||It._transport===3)&&(gt=!1);var Ot=qr(H,gt);gt=gt||Ot.useHdrs;var wt=n.getTime();n.doPerf(Ct,function(){return"HttpManager:_doPayloadSend"},function(){for(var Je=0;Je<H.batches.length;Je++)for(var q=H.batches[Je],ce=q.events(),fe=0;fe<ce.length;fe++){var Ce=ce[fe];if(C){var ft=Ce.timings=Ce.timings||{};br(ft,"sendEventStart",wt),br(ft,"serializationStart",me),br(ft,"serializationCompleted",_e)}Ce[Vt]>0?Ce[Vt]++:Ce[Vt]=1}Tr(H.batches,1e3+(Pe||0),H.sendType,!0);var pt={data:H.payloadBlob,urlString:Ot.url,headers:Ot.hdrs,_thePayload:H,_sendReason:Pe,timeout:Q};n.isUndefined(te)||(pt.disableXhrSync=!!te),gt&&(xe(pt.headers,O)||(pt.headers[O]=E),xe(pt.headers,P)||(pt.headers[P]=T));var Wt=null;It&&(Wt=function(Zt){Pt.firstRequestSent();var vr=function(an,Wn){Br(an,Wn,H,Pe)},Rr=H.isTeardown||H.isSync;try{It.sendPOST(Zt,vr,Rr),Fe.sendListener&&Fe.sendListener(pt,Zt,Rr,H.isBeacon)}catch(an){jt.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+n.dumpObj(an)),Ft(vr,0,{})}}),n.doPerf(Ct,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Wt)if(H.sendType===0&&zt++,Xe&&!H.isBeacon&&It._transport!==3){var Zt={data:pt.data,urlString:pt.urlString,headers:n.extend({},pt.headers),timeout:pt.timeout,disableXhrSync:pt.disableXhrSync},vr=!1;n.doPerf(Ct,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Fe.sendHook(Zt,function(Rr){vr=!0,!ct&&!Rr._thePayload&&(Rr._thePayload=Rr._thePayload||pt._thePayload,Rr._sendReason=Rr._sendReason||pt._sendReason),Wt(Rr)},H.isSync||H.isTeardown)}catch{vr||Wt(pt)}})}else Wt(pt)})},function(){return{thePayload:H,serializationStart:me,serializationCompleted:_e,sendReason:Pe}},H.isSync)}H.sizeExceed&&H.sizeExceed.length>0&&Tr(H.sizeExceed,8003,H.sendType),H.failedEvts&&H.failedEvts.length>0&&Tr(H.failedEvts,8002,H.sendType)}function Sr(H,me){C&&n.arrForEach(H,function(_e){var Pe=_e.timings=_e.timings||{};br(Pe,"sendEventCompleted",me)})}function Br(H,me,_e,Pe){var Xe=9e3,It=null,gt=!1,Ot=!1;try{var wt=!0;if(typeof H!==n.strUndefined){if(me){Pt.setClockSkew(me[G]);var Je=me[M]||me["kill-duration-seconds"];n.arrForEach(vt.setKillSwitchTenants(me[A],Je),function(ce){n.arrForEach(_e.batches,function(fe){if(fe.iKey()===ce){It=It||[];var Ce=fe.split(0);_e.numEvents-=Ce.count(),It.push(Ce)}})})}if(H==200||H==204){Xe=200;return}(!At(H)||_e.numEvents<=0)&&(wt=!1),Xe=9e3+H%1e3}if(wt){Xe=100;var q=_e.retryCnt;_e.sendType===0&&(q<Z?(gt=!0,Pr(function(){_e.sendType===0&&zt--,wr(_e.batches,q+1,_e.isTeardown,k?2:_e.sendType,5)},k,gr(q))):(Ot=!0,k&&(Xe=8001)))}}finally{gt||(Pt.setClockSkew(),Fr(_e,Xe,Pe,Ot)),Tr(It,8004,_e.sendType)}}function Fr(H,me,_e,Pe){try{Pe&&jt._backOffTransmission(),me===200&&(!Pe&&!H.isSync&&jt._clearBackOff(),Yr(H.batches)),Tr(H.batches,me,H.sendType,!0)}finally{H.sendType===0&&(zt--,_e!==5&&Fe.sendQueuedRequests(H.sendType,_e))}}function Yr(H){if(C){var me=n.getTime();n.arrForEach(H,function(_e){_e&&_e.count()>0&&Sr(_e.events(),me)})}}function Pr(H,me,_e){me?H():ze.set(H,_e)}function Zr(H){var me={};if(n.isString(H)){var _e=n.strTrim(H).split(/[\r\n]+/);n.arrForEach(_e,function(Pe){if(Pe){var Xe=Pe.indexOf(": ");if(Xe!==-1){var It=n.strTrim(Pe.substring(0,Xe)).toLowerCase(),gt=n.strTrim(Pe.substring(Xe+1));me[It]=gt}else me[n.strTrim(Pe)]=1}})}return me}function Gr(H){for(var me=0;me<H.batches.length;me++){var _e=H.batches[me].Msfpc();if(_e)return encodeURIComponent(_e)}return""}function Cr(H){var me=Fe._responseHandlers;try{for(var _e=0;_e<me.length;_e++)try{me[_e](H)}catch(Xe){n._throwInternal(jt.diagLog(),1,519,"Response handler failed: "+Xe)}if(H){var Pe=JSON.parse(H);n.isValueAssigned(Pe.webResult)&&n.isValueAssigned(Pe.webResult[at])&&R.set("MSFPC",Pe.webResult[at],365*86400)}}catch{}}function Tr(H,me,_e,Pe){if(H&&H.length>0&&et){var Xe=et[Jr(me)];if(Xe){var It=_e!==0;n.doPerf(Ct,function(){return"HttpManager:_sendBatchesNotification"},function(){Pr(function(){try{Xe.call(et,H,me,It,_e)}catch(gt){n._throwInternal(jt.diagLog(),1,74,"send request notification failed: "+gt)}},Pe||It,0)},function(){return{batches:nr(H),reason:me,isSync:It,sendSync:Pe,sendType:_e}},!It)}}}function Jr(H){var me=or[H];return n.isValueAssigned(me)||(me=g,H>=9e3&&H<=9999?me=m:H>=8e3&&H<=8999?me=c:H>=1e3&&H<=1999&&(me=p)),me}})}return Me}();function Ke(Me,je){for(var Se=[],Z=2;Z<arguments.length;Z++)Se[Z-2]=arguments[Z];return setTimeout(Me,je,Se)}function He(Me){clearTimeout(Me)}function We(Me,je){return{set:Me||Ke,clear:je||He}}var St=.25,Tt=500,Oe=20,Ye=6,ae=2,we=4,Le=2,he=1,ut="eventsDiscarded",qt="overrideInstrumentationKey",Ze="maxEventRetryAttempts",$t="maxUnloadEventRetryAttempts",pr="addUnloadCb",Er=function(Me){i.__extendsFn(je,Me);function je(){var Se=Me.call(this)||this;Se.identifier="PostChannel",Se.priority=1011,Se.version="3.2.3";var Z,et=!1,ze=[],pe=null,vt=!1,Et=0,Pt=500,Bt=0,zt=1e4,jt={},nt=o,Ct=null,ct=null,mt=0,d=0,_,S,C={},R,k,L=-1,Q,te=!0,Fe=!1,lt=Ye,qe=ae,it,dt;return a(je,Se,function(bt,Ft){wr(),bt._getDbgPlgTargets=function(){return[S]},bt.initialize=function(q,ce,fe){n.doPerf(ce,function(){return"PostChannel:initialize"},function(){var Ce=ce;Ft.initialize(q,ce,fe);try{var ft=!!ce[pr];it=n.mergeEvtNamespace(n.createUniqueNamespace(bt.identifier),ce.evtNamespace&&ce.evtNamespace());var pt=bt._getTelCtx();q.extensionConfig[bt.identifier]=q.extensionConfig[bt.identifier]||{},Z=pt.getExtCfg(bt.identifier),dt=We(Z.setTimeoutOverride,Z.clearTimeoutOverride),te=!Z.disableOptimizeObj&&n.isChromium(),Lr(Ce),Z.eventsLimitInMem>0&&(zt=Z.eventsLimitInMem),Z.immediateEventLimit>0&&(Pt=Z.immediateEventLimit),Z.autoFlushEventsLimit>0&&(R=Z.autoFlushEventsLimit),n.isNumber(Z[Ze])&&(lt=Z[Ze]),n.isNumber(Z[$t])&&(qe=Z[$t]),Je(),Z.httpXHROverride&&Z.httpXHROverride.sendPOST&&(_=Z.httpXHROverride),n.isValueAssigned(q.anonCookieName)&&S.addQueryStringParameter("anoncknm",q.anonCookieName),S.sendHook=Z.payloadPreprocessor,S.sendListener=Z.payloadListener;var Wt=Z.overrideEndpointUrl?Z.overrideEndpointUrl:q.endpointUrl;bt._notificationManager=q.extensionConfig.NotificationManager,S.initialize(Wt,bt.core,bt,_,Z);var Zt=q.disablePageUnloadEvents||[];n.addPageUnloadEventListener(cr,Zt,it),n.addPageHideEventListener(cr,Zt,it),n.addPageShowEventListener(hr,q.disablePageShowEvents,it)}catch(vr){throw bt.setInitialized(!1),vr}},function(){return{coreConfig:q,core:ce,extensions:fe}})},bt.processTelemetry=function(q,ce){n.setProcessTelemetryTimings(q,bt.identifier),ce=bt._getTelCtx(ce);var fe=ce.getExtCfg(bt.identifier),Ce=!!Z.disableTelemetry;fe&&(Ce=Ce||!!fe.disableTelemetry);var ft=q;!Ce&&!et&&(Z[qt]&&(ft.iKey=Z[qt]),fe&&fe[qt]&&(ft.iKey=fe[qt]),Hr(ft,!0),Fe?br(2,2):nr()),bt.processNext(ft,ce)},bt._doTeardown=function(q,ce){br(2,2),et=!0,S.teardown(),n.removePageUnloadEventListener(null,it),n.removePageHideEventListener(null,it),n.removePageShowEventListener(null,it),wr()};function Lr(q){var ce=q.getWParam;q.getWParam=function(){var fe=0;return Z.ignoreMc1Ms0CookieProcessing&&(fe=fe|2),fe|ce()}}function cr(q){var ce=q||n.getWindow().event;ce.type!=="beforeunload"&&(Fe=!0,S.setUnloading(Fe)),br(2,2)}function hr(q){Fe=!1,S.setUnloading(Fe)}function Hr(q,ce){if(q.sendAttempt||(q.sendAttempt=0),q.latency||(q.latency=1),q.ext&&q.ext.trace&&delete q.ext.trace,q.ext&&q.ext.user&&q.ext.user.id&&delete q.ext.user.id,te&&(q.ext=n.optimizeObject(q.ext),q.baseData&&(q.baseData=n.optimizeObject(q.baseData)),q.data&&(q.data=n.optimizeObject(q.data))),q.sync){if(mt||vt)q.latency=3,q.sync=!1;else if(S){te&&(q=n.optimizeObject(q)),S.sendSynchronousBatch(le.create(q.iKey,[q]),q.sync===!0?1:q.sync,3);return}}var fe=q.latency,Ce=Bt,ft=zt;fe===4&&(Ce=Et,ft=Pt);var pt=!1;if(Ce<ft)pt=!Fr(q,ce);else{var Wt=1,Zt=Oe;fe===4&&(Wt=4,Zt=1),pt=!0,Yr(q.iKey,q.latency,Wt,Zt)&&(pt=!Fr(q,ce))}pt&&_e(ut,[q],n.EventsDiscardedReason.QueueFull)}bt.setEventQueueLimits=function(q,ce){zt=q>0?q:1e4,R=ce>0?ce:0,Je();var fe=Bt>q;if(!fe&&k>0)for(var Ce=1;!fe&&Ce<=3;Ce++){var ft=C[Ce];ft&&ft.batches&&n.arrForEach(ft.batches,function(pt){pt&&pt.count()>=k&&(fe=!0)})}Br(!0,fe)},bt.pause=function(){Ar(),vt=!0,S.pause()},bt.resume=function(){vt=!1,S.resume(),nr()},bt.addResponseHandler=function(q){S._responseHandlers.push(q)},bt._loadTransmitProfiles=function(q){Tr(),n.objForEachKey(q,function(ce,fe){var Ce=fe.length;if(Ce>=2){var ft=Ce>2?fe[2]:0;if(fe.splice(0,Ce-2),fe[1]<0&&(fe[0]=-1),fe[1]>0&&fe[0]>0){var pt=fe[0]/fe[1];fe[0]=Math.ceil(pt)*fe[1]}ft>=0&&fe[1]>=0&&ft>fe[1]&&(ft=fe[1]),fe.push(ft),jt[ce]=fe}})},bt.flush=function(q,ce,fe){if(q===void 0&&(q=!0),!vt)if(fe=fe||1,q)pe==null?(Ar(),Zr(1,0,fe),pe=qr(function(){pe=null,Gr(ce,fe)},0)):ze.push(ce);else{var Ce=Ar();jr(1,1,fe),ce?.(),Ce&&nr()}},bt.setMsaAuthTicket=function(q){S.addHeader(st,q)},bt.hasEvents=Qr,bt._setTransmitProfile=function(q){nt!==q&&jt[q]!==void 0&&(Ar(),nt=q,nr())};function jr(q,ce,fe){var Ce=Zr(q,ce,fe);return S.sendQueuedRequests(ce,fe),Ce}function Qr(){return Bt>0}function nr(){if(L>=0&&Zr(L,0,Q)&&S.sendQueuedRequests(0,Q),Et>0&&!ct&&!vt){var q=jt[nt][2];q>=0&&(ct=qr(function(){ct=null,jr(4,0,1),nr()},q))}var ce=jt[nt][1];!Ct&&!pe&&ce>=0&&!vt&&(Qr()?Ct=qr(function(){Ct=null,jr(d===0?3:1,0,1),d++,d%=2,nr()},ce):d=0)}bt._backOffTransmission=function(){mt<we&&(mt++,Ar(),nr())},bt._clearBackOff=function(){mt&&(mt=0,Ar(),nr())};function wr(){Z=null,et=!1,ze=[],pe=null,vt=!1,Et=0,Pt=500,Bt=0,zt=1e4,jt={},nt=o,Ct=null,ct=null,mt=0,d=0,_=null,C={},R=void 0,k=0,L=-1,Q=null,te=!0,Fe=!1,lt=Ye,qe=ae,it=null,dt=We(),S=new ht(Tt,Le,he,{requeue:H,send:Xe,sent:It,drop:gt,rspFail:Ot,oth:wt},dt),Jr(),Or(),Je()}function qr(q,ce){ce===0&&mt&&(ce=1);var fe=1e3;return mt&&(fe=gr(mt-1)),dt.set(q,ce*fe)}function Ar(){return Ct!==null?(dt.clear(Ct),Ct=null,d=0,!0):!1}function br(q,ce){Ar(),pe&&(dt.clear(pe),pe=null),vt||jr(1,q,ce)}function Or(){C[4]={batches:[],iKeyMap:{}},C[3]={batches:[],iKeyMap:{}},C[2]={batches:[],iKeyMap:{}},C[1]={batches:[],iKeyMap:{}}}function Sr(q,ce,fe){var Ce=C[ce];Ce||(ce=1,Ce=C[ce]);var ft=Ce.iKeyMap[q];return!ft&&fe&&(ft=le.create(q),Ce.batches.push(ft),Ce.iKeyMap[q]=ft),ft}function Br(q,ce){S.canSendRequest()&&!mt&&(R>0&&Bt>R&&(ce=!0),ce&&pe==null&&bt.flush(q,null,20))}function Fr(q,ce){te&&(q=n.optimizeObject(q));var fe=q.latency,Ce=Sr(q.iKey,fe,!0);return Ce.addEvent(q)?(fe!==4?(Bt++,ce&&q.sendAttempt===0&&Br(!q.sync,k>0&&Ce.count()>=k)):Et++,!0):!1}function Yr(q,ce,fe,Ce){for(;fe<=ce;){var ft=Sr(q,ce,!0);if(ft&&ft.count()>0){var pt=ft.split(0,Ce),Wt=pt.count();if(Wt>0)return fe===4?Et-=Wt:Bt-=Wt,Pe(ut,[pt],n.EventsDiscardedReason.QueueFull),!0}fe++}return Pr(),!1}function Pr(){for(var q=0,ce=0,fe=function(ft){var pt=C[ft];pt&&pt.batches&&n.arrForEach(pt.batches,function(Wt){ft===4?q+=Wt.count():ce+=Wt.count()})},Ce=1;Ce<=4;Ce++)fe(Ce);Bt=ce,Et=q}function Zr(q,ce,fe){var Ce=!1,ft=ce===0;return!ft||S.canSendRequest()?n.doPerf(bt.core,function(){return"PostChannel._queueBatches"},function(){for(var pt=[],Wt=4;Wt>=q;){var Zt=C[Wt];Zt&&Zt.batches&&Zt.batches.length>0&&(n.arrForEach(Zt.batches,function(vr){S.addBatch(vr)?Ce=Ce||vr&&vr.count()>0:pt=pt.concat(vr.events()),Wt===4?Et-=vr.count():Bt-=vr.count()}),Zt.batches=[],Zt.iKeyMap={}),Wt--}pt.length>0&&_e(ut,pt,n.EventsDiscardedReason.KillSwitch),Ce&&L>=q&&(L=-1,Q=0)},function(){return{latency:q,sendType:ce,sendReason:fe}},!ft):(L=L>=0?Math.min(L,q):q,Q=Math.max(Q,fe)),Ce}function Gr(q,ce){jr(1,0,ce),Pr(),Cr(function(){q&&q(),ze.length>0?pe=qr(function(){pe=null,Gr(ze.shift(),ce)},0):(pe=null,nr())})}function Cr(q){S.isCompletelyIdle()?q():pe=qr(function(){pe=null,Cr(q)},St)}function Tr(){Ar(),Jr(),nt=o,nr()}function Jr(){jt={},jt[o]=[2,1,0],jt[r]=[6,3,0],jt[s]=[18,9,0]}function H(q,ce){var fe=[],Ce=lt;Fe&&(Ce=qe),n.arrForEach(q,function(ft){ft&&ft.count()>0&&n.arrForEach(ft.events(),function(pt){pt&&(pt.sync&&(pt.latency=4,pt.sync=!1),pt.sendAttempt<Ce?(n.setProcessTelemetryTimings(pt,bt.identifier),Hr(pt,!1)):fe.push(pt))})}),fe.length>0&&_e(ut,fe,n.EventsDiscardedReason.NonRetryableStatus),Fe&&br(2,2)}function me(q,ce){var fe=bt._notificationManager||{},Ce=fe[q];if(Ce)try{Ce.apply(fe,ce)}catch(ft){n._throwInternal(bt.diagLog(),1,74,q+" notification failed: "+ft)}}function _e(q,ce){for(var fe=[],Ce=2;Ce<arguments.length;Ce++)fe[Ce-2]=arguments[Ce];ce&&ce.length>0&&me(q,[ce].concat(fe))}function Pe(q,ce){for(var fe=[],Ce=2;Ce<arguments.length;Ce++)fe[Ce-2]=arguments[Ce];ce&&ce.length>0&&n.arrForEach(ce,function(ft){ft&&ft.count()>0&&me(q,[ft.events()].concat(fe))})}function Xe(q,ce,fe){q&&q.length>0&&me("eventsSendRequest",[ce>=1e3&&ce<=1999?ce-1e3:0,fe!==!0])}function It(q,ce){Pe("eventsSent",q,ce),nr()}function gt(q,ce){Pe(ut,q,ce>=8e3&&ce<=8999?ce-8e3:n.EventsDiscardedReason.Unknown)}function Ot(q){Pe(ut,q,n.EventsDiscardedReason.NonRetryableStatus),nr()}function wt(q,ce){Pe(ut,q,n.EventsDiscardedReason.Unknown),nr()}function Je(){!Z||!Z.disableAutoBatchFlushLimit?k=Math.max(Tt*(Le+1),zt/6):k=0}n.objDefineAccessors(bt,"_setTimeoutOverride",function(){return dt.set},function(q){dt=We(q,dt.clear)}),n.objDefineAccessors(bt,"_clearTimeoutOverride",function(){return dt.clear},function(q){dt=We(dt.set,q)})}),Se}return je}(n.BaseTelemetryPlugin);e.BE_PROFILE=s,e.NRT_PROFILE=r,e.PostChannel=Er,e.RT_PROFILE=o,function(Me,je,Se){var Z=Object.defineProperty;if(Z)try{return Z(Me,je,Se)}catch{}return Se&&typeof Se.value!==void 0&&(Me[je]=Se.value),Me}(e,"__esModule",{value:!0})})});var Dl=Ht((Xg,Rl)=>{var Jd=Object.create,ci=Object.defineProperty,ep=Object.defineProperties,tp=Object.getOwnPropertyDescriptor,rp=Object.getOwnPropertyDescriptors,np=Object.getOwnPropertyNames,Fc=Object.getOwnPropertySymbols,ip=Object.getPrototypeOf,qc=Object.prototype.hasOwnProperty,op=Object.prototype.propertyIsEnumerable,Uc=(e,i,t)=>i in e?ci(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,Pn=(e,i)=>{for(var t in i||(i={}))qc.call(i,t)&&Uc(e,t,i[t]);if(Fc)for(var t of Fc(i))op.call(i,t)&&Uc(e,t,i[t]);return e},ap=(e,i)=>ep(e,rp(i)),x=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),sp=(e,i)=>{for(var t in i)ci(e,t,{get:i[t],enumerable:!0})},Bc=(e,i,t,n)=>{if(i&&typeof i=="object"||typeof i=="function")for(let u of np(i))!qc.call(e,u)&&u!==t&&ci(e,u,{get:()=>i[u],enumerable:!(n=tp(i,u))||n.enumerable});return e},eo=(e,i,t)=>(t=e!=null?Jd(ip(e)):{},Bc(i||!e||!e.__esModule?ci(t,"default",{value:e,enumerable:!0}):t,e)),up=e=>Bc(ci({},"__esModule",{value:!0}),e),mr=x((e,i)=>{"use strict";var t=function(){function n(){}return n.info=function(u){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];n.enableDebug&&console.info(n.TAG+u,a)},n.warn=function(u){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];n.disableWarnings||console.warn(n.TAG+u,a)},n.enableDebug=!1,n.disableWarnings=!1,n.disableErrors=!1,n.TAG="ApplicationInsights:",n}();i.exports=t}),Gc=x(e=>{"use strict";var i=e&&e.__assign||function(){return i=Object.assign||function(a){for(var o,r=1,s=arguments.length;r<s;r++){o=arguments[r];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScopeManager=e.OpenTelemetryScopeManagerWrapper=void 0;var t=qn(),n=require("events"),u=function(){function a(){}return a.prototype.active=function(){var o=this,r=t.CorrelationContextManager.getCurrentContext();return i(i({},r),{getValue:function(s){return o._activeSymbol?s===o._activeSymbol?r:!1:(o._activeSymbol=s,r)},setValue:function(){}})},a.prototype.with=function(o,r){var s=o.parentSpanId,l=o.name,f=a._spanToContext(o,s,l);return t.CorrelationContextManager.runWithContext(f,r)()},a.prototype.bind=function(o){return typeof o=="function"?t.CorrelationContextManager.wrapCallback(o):(o instanceof n.EventEmitter&&t.CorrelationContextManager.wrapEmitter(o),o)},a.prototype.enable=function(){return t.CorrelationContextManager.enable(),this},a.prototype.disable=function(){return t.CorrelationContextManager.disable(),this},a._spanToContext=function(o,r,s){var l=r?"|"+o.spanContext().traceId+"."+r+".":o.spanContext().traceId,f=i(i({},o.spanContext()),{traceFlags:o.spanContext().traceFlags}),c=t.CorrelationContextManager.spanToContextObject(f,l,s);return c},a}();e.OpenTelemetryScopeManagerWrapper=u,e.AsyncScopeManager=new u}),cp=x((e,i)=>{e=i.exports=ue;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,u=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],r=e.src=[],s=0,l=s++;r[l]="0|[1-9]\\d*";var f=s++;r[f]="[0-9]+";var c=s++;r[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=s++;r[p]="("+r[l]+")\\.("+r[l]+")\\.("+r[l]+")";var v=s++;r[v]="("+r[f]+")\\.("+r[f]+")\\.("+r[f]+")";var m=s++;r[m]="(?:"+r[l]+"|"+r[c]+")";var g=s++;r[g]="(?:"+r[f]+"|"+r[c]+")";var E=s++;r[E]="(?:-("+r[m]+"(?:\\."+r[m]+")*))";var T=s++;r[T]="(?:-?("+r[g]+"(?:\\."+r[g]+")*))";var O=s++;r[O]="[0-9A-Za-z-]+";var P=s++;r[P]="(?:\\+("+r[O]+"(?:\\."+r[O]+")*))";var A=s++,M="v?"+r[p]+r[E]+"?"+r[P]+"?";r[A]="^"+M+"$";var j="[v=\\s]*"+r[v]+r[T]+"?"+r[P]+"?",G=s++;r[G]="^"+j+"$";var B=s++;r[B]="((?:<|>)?=?)";var Y=s++;r[Y]=r[f]+"|x|X|\\*";var ne=s++;r[ne]=r[l]+"|x|X|\\*";var ye=s++;r[ye]="[v=\\s]*("+r[ne]+")(?:\\.("+r[ne]+")(?:\\.("+r[ne]+")(?:"+r[E]+")?"+r[P]+"?)?)?";var Re=s++;r[Re]="[v=\\s]*("+r[Y]+")(?:\\.("+r[Y]+")(?:\\.("+r[Y]+")(?:"+r[T]+")?"+r[P]+"?)?)?";var st=s++;r[st]="^"+r[B]+"\\s*"+r[ye]+"$";var ot=s++;r[ot]="^"+r[B]+"\\s*"+r[Re]+"$";var Dt=s++;r[Dt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=s++;r[at]="(?:~>?)";var oe=s++;r[oe]="(\\s*)"+r[at]+"\\s+",o[oe]=new RegExp(r[oe],"g");var ge="$1~",le=s++;r[le]="^"+r[at]+r[ye]+"$";var Ue=s++;r[Ue]="^"+r[at]+r[Re]+"$";var X=s++;r[X]="(?:\\^)";var Ee=s++;r[Ee]="(\\s*)"+r[X]+"\\s+",o[Ee]=new RegExp(r[Ee],"g");var se="$1^",$e=s++;r[$e]="^"+r[X]+r[ye]+"$";var rt=s++;r[rt]="^"+r[X]+r[Re]+"$";var W=s++;r[W]="^"+r[B]+"\\s*("+j+")$|^$";var ee=s++;r[ee]="^"+r[B]+"\\s*("+M+")$|^$";var re=s++;r[re]="(\\s*)"+r[B]+"\\s*("+j+"|"+r[ye]+")",o[re]=new RegExp(r[re],"g");var ve="$1$2$3",Ve=s++;r[Ve]="^\\s*("+r[ye]+")\\s+-\\s+("+r[ye]+")\\s*$";var Ae=s++;r[Ae]="^\\s*("+r[Re]+")\\s+-\\s+("+r[Re]+")\\s*$";var Ne=s++;for(r[Ne]="(<|>)?=?\\s*\\*",Qe=0;Qe<s;Qe++)t(Qe,r[Qe]),o[Qe]||(o[Qe]=new RegExp(r[Qe]));var Qe;e.parse=At;function At(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue)return d;if(typeof d!="string"||d.length>n)return null;var S=_.loose?o[G]:o[A];if(!S.test(d))return null;try{return new ue(d,_)}catch{return null}}e.valid=gr;function gr(d,_){var S=At(d,_);return S?S.version:null}e.clean=dr;function dr(d,_){var S=At(d.trim().replace(/^[=v]+/,""),_);return S?S.version:null}e.SemVer=ue;function ue(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof ue))return new ue(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var S=d.trim().match(_.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var R=+C;if(R>=0&&R<u)return R}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ue.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ue.prototype.toString=function(){return this.version},ue.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof ue||(d=new ue(d,this.options)),this.compareMain(d)||this.comparePre(d)},ue.prototype.compareMain=function(d){return d instanceof ue||(d=new ue(d,this.options)),Ut(this.major,d.major)||Ut(this.minor,d.minor)||Ut(this.patch,d.patch)},ue.prototype.comparePre=function(d){if(d instanceof ue||(d=new ue(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var S=this.prerelease[_],C=d.prerelease[_];if(t("prerelease compare",_,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ut(S,C)}while(++_)},ue.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=_r;function _r(d,_,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ue(d,S).inc(_,C).version}catch{return null}}e.diff=tr;function tr(d,_){if(St(d,_))return null;var S=At(d),C=At(_),R="";if(S.prerelease.length||C.prerelease.length){R="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return R+L;return k}e.compareIdentifiers=Ut;var Vt=/^[0-9]+$/;function Ut(d,_){var S=Vt.test(d),C=Vt.test(_);return S&&C&&(d=+d,_=+_),d===_?0:S&&!C?-1:C&&!S?1:d<_?-1:1}e.rcompareIdentifiers=or;function or(d,_){return Ut(_,d)}e.major=rr;function rr(d,_){return new ue(d,_).major}e.minor=yr;function yr(d,_){return new ue(d,_).minor}e.patch=ie;function ie(d,_){return new ue(d,_).patch}e.compare=K;function K(d,_,S){return new ue(d,S).compare(new ue(_,S))}e.compareLoose=xe;function xe(d,_){return K(d,_,!0)}e.rcompare=Te;function Te(d,_,S){return K(_,d,S)}e.sort=ht;function ht(d,_){return d.sort(function(S,C){return e.compare(S,C,_)})}e.rsort=Ke;function Ke(d,_){return d.sort(function(S,C){return e.rcompare(S,C,_)})}e.gt=He;function He(d,_,S){return K(d,_,S)>0}e.lt=We;function We(d,_,S){return K(d,_,S)<0}e.eq=St;function St(d,_,S){return K(d,_,S)===0}e.neq=Tt;function Tt(d,_,S){return K(d,_,S)!==0}e.gte=Oe;function Oe(d,_,S){return K(d,_,S)>=0}e.lte=Ye;function Ye(d,_,S){return K(d,_,S)<=0}e.cmp=ae;function ae(d,_,S,C){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d===S;case"!==":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d!==S;case"":case"=":case"==":return St(d,S,C);case"!=":return Tt(d,S,C);case">":return He(d,S,C);case">=":return Oe(d,S,C);case"<":return We(d,S,C);case"<=":return Ye(d,S,C);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=we;function we(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof we){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof we))return new we(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};we.prototype.parse=function(d){var _=this.options.loose?o[W]:o[ee],S=d.match(_);if(!S)throw new TypeError("Invalid comparator: "+d);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ue(S[2],this.options.loose):this.semver=Le},we.prototype.toString=function(){return this.value},we.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Le?!0:(typeof d=="string"&&(d=new ue(d,this.options)),ae(d,this.operator,this.semver,this.options))},we.prototype.intersects=function(d,_){if(!(d instanceof we))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var S;if(this.operator==="")return S=new he(d.value,_),pe(this.value,S,_);if(d.operator==="")return S=new he(this.value,_),pe(d.semver,S,_);var C=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),R=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),k=this.semver.version===d.semver.version,L=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),Q=ae(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),te=ae(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return C||R||k&&L||Q||te},e.Range=he;function he(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof he)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new he(d.raw,_);if(d instanceof we)return new he(d.value,_);if(!(this instanceof he))return new he(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var S=_?o[Ae]:o[Ve];d=d.replace(S,et),t("hyphen replace",d),d=d.replace(o[re],ve),t("comparator trim",d,o[re]),d=d.replace(o[oe],ge),d=d.replace(o[Ee],se),d=d.split(/\s+/).join(" ");var C=_?o[W]:o[ee],R=d.split(" ").map(function(k){return qt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(R=R.filter(function(k){return!!k.match(C)})),R=R.map(function(k){return new we(k,this.options)},this),R},he.prototype.intersects=function(d,_){if(!(d instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return d.set.some(function(R){return R.every(function(k){return C.intersects(k,_)})})})})},e.toComparators=ut;function ut(d,_){return new he(d,_).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function qt(d,_){return t("comp",d,_),d=Er(d,_),t("caret",d),d=$t(d,_),t("tildes",d),d=je(d,_),t("xrange",d),d=Z(d,_),t("stars",d),d}function Ze(d){return!d||d.toLowerCase()==="x"||d==="*"}function $t(d,_){return d.trim().split(/\s+/).map(function(S){return pr(S,_)}).join(" ")}function pr(d,_){var S=_.loose?o[Ue]:o[le];return d.replace(S,function(C,R,k,L,Q){t("tilde",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":Q?(t("replaceTilde pr",Q),te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0"):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0",t("tilde return",te),te})}function Er(d,_){return d.trim().split(/\s+/).map(function(S){return Me(S,_)}).join(" ")}function Me(d,_){t("caret",d,_);var S=_.loose?o[rt]:o[$e];return d.replace(S,function(C,R,k,L,Q){t("caret",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?R==="0"?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+".0 <"+(+R+1)+".0.0":Q?(t("replaceCaret pr",Q),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+"-"+Q+" <"+(+R+1)+".0.0"):(t("no pr"),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+" <"+(+R+1)+".0.0"),t("caret return",te),te})}function je(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(S){return Se(S,_)}).join(" ")}function Se(d,_){d=d.trim();var S=_.loose?o[ot]:o[st];return d.replace(S,function(C,R,k,L,Q,te){t("xRange",d,C,R,k,L,Q,te);var Fe=Ze(k),lt=Fe||Ze(L),qe=lt||Ze(Q),it=qe;return R==="="&&it&&(R=""),Fe?R===">"||R==="<"?C="<0.0.0":C="*":R&&it?(lt&&(L=0),Q=0,R===">"?(R=">=",lt?(k=+k+1,L=0,Q=0):(L=+L+1,Q=0)):R==="<="&&(R="<",lt?k=+k+1:L=+L+1),C=R+k+"."+L+"."+Q):lt?C=">="+k+".0.0 <"+(+k+1)+".0.0":qe&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(d,_){return t("replaceStars",d,_),d.trim().replace(o[Ne],"")}function et(d,_,S,C,R,k,L,Q,te,Fe,lt,qe,it){return Ze(S)?_="":Ze(C)?_=">="+S+".0.0":Ze(R)?_=">="+S+"."+C+".0":_=">="+_,Ze(te)?Q="":Ze(Fe)?Q="<"+(+te+1)+".0.0":Ze(lt)?Q="<"+te+"."+(+Fe+1)+".0":qe?Q="<="+te+"."+Fe+"."+lt+"-"+qe:Q="<="+Q,(_+" "+Q).trim()}he.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new ue(d,this.options));for(var _=0;_<this.set.length;_++)if(ze(this.set[_],d,this.options))return!0;return!1};function ze(d,_,S){for(var C=0;C<d.length;C++)if(!d[C].test(_))return!1;if(_.prerelease.length&&!S.includePrerelease){for(C=0;C<d.length;C++)if(t(d[C].semver),d[C].semver!==Le&&d[C].semver.prerelease.length>0){var R=d[C].semver;if(R.major===_.major&&R.minor===_.minor&&R.patch===_.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(d,_,S){try{_=new he(_,S)}catch{return!1}return _.test(d)}e.maxSatisfying=vt;function vt(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===-1)&&(C=L,R=new ue(C,S))}),C}e.minSatisfying=Et;function Et(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===1)&&(C=L,R=new ue(C,S))}),C}e.minVersion=Pt;function Pt(d,_){d=new he(d,_);var S=new ue("0.0.0");if(d.test(S)||(S=new ue("0.0.0-0"),d.test(S)))return S;S=null;for(var C=0;C<d.set.length;++C){var R=d.set[C];R.forEach(function(k){var L=new ue(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||He(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&d.test(S)?S:null}e.validRange=Bt;function Bt(d,_){try{return new he(d,_).range||"*"}catch{return null}}e.ltr=zt;function zt(d,_,S){return nt(d,_,"<",S)}e.gtr=jt;function jt(d,_,S){return nt(d,_,">",S)}e.outside=nt;function nt(d,_,S,C){d=new ue(d,C),_=new he(_,C);var R,k,L,Q,te;switch(S){case">":R=He,k=Ye,L=We,Q=">",te=">=";break;case"<":R=We,k=Oe,L=He,Q="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(d,_,C))return!1;for(var Fe=0;Fe<_.set.length;++Fe){var lt=_.set[Fe],qe=null,it=null;if(lt.forEach(function(dt){dt.semver===Le&&(dt=new we(">=0.0.0")),qe=qe||dt,it=it||dt,R(dt.semver,qe.semver,C)?qe=dt:L(dt.semver,it.semver,C)&&(it=dt)}),qe.operator===Q||qe.operator===te||(!it.operator||it.operator===Q)&&k(d,it.semver)||it.operator===te&&L(d,it.semver))return!1}return!0}e.prerelease=Ct;function Ct(d,_){var S=At(d,_);return S&&S.prerelease.length?S.prerelease:null}e.intersects=ct;function ct(d,_,S){return d=new he(d,S),_=new he(_,S),d.intersects(_)}e.coerce=mt;function mt(d){if(d instanceof ue)return d;if(typeof d!="string")return null;var _=d.match(o[Dt]);return _==null?null:At(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),Hc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePatchingRequire=void 0;var i=require("path"),t=cp(),n=require("module"),u=Object.keys(process.binding("natives")),a=n.prototype.require;function o(r){var s={};return function(l){var f=a.apply(this,arguments);if(r[l]){var c=n._resolveFilename(l,this);if(s.hasOwnProperty(c))return s[c];var p=void 0;if(u.indexOf(l)<0)try{p=a.call(this,i.join(l,"package.json")).version}catch{return f}else p=process.version.substring(1);var v=p.indexOf("-");v>=0&&(p=p.substring(0,v));for(var m=f,g=0,E=r[l];g<E.length;g++){var T=E[g];t.satisfies(p,T.versionSpecifier)&&(m=T.patch(m,c))}return s[c]=m}return f}}e.makePatchingRequire=o}),lp=x((e,i)=>{i.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}}),ur=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.channel=e.makePatchingRequire=void 0;var i=Hc(),t=Hc();Object.defineProperty(e,"makePatchingRequire",{enumerable:!0,get:function(){return t.makePatchingRequire}});var n=function(o){return!0},u=function(){function o(){this.version=lp().version,this.subscribers={},this.contextPreservationFunction=function(r){return r},this.knownPatches={},this.currentlyPublishing=!1}return o.prototype.shouldPublish=function(r){var s=this.subscribers[r];return s?s.some(function(l){var f=l.filter;return!f||f(!1)}):!1},o.prototype.publish=function(r,s){if(!this.currentlyPublishing){var l=this.subscribers[r];if(l){var f={timestamp:Date.now(),data:s};this.currentlyPublishing=!0,l.forEach(function(c){var p=c.listener,v=c.filter;try{v&&v(!0)&&p(f)}catch{}}),this.currentlyPublishing=!1}}},o.prototype.subscribe=function(r,s,l){l===void 0&&(l=n),this.subscribers[r]||(this.subscribers[r]=[]),this.subscribers[r].push({listener:s,filter:l})},o.prototype.unsubscribe=function(r,s,l){l===void 0&&(l=n);var f=this.subscribers[r];if(f){for(var c=0;c<f.length;++c)if(f[c].listener===s&&f[c].filter===l)return f.splice(c,1),!0}return!1},o.prototype.reset=function(){var r=this;this.subscribers={},this.contextPreservationFunction=function(s){return s},Object.getOwnPropertyNames(this.knownPatches).forEach(function(s){return delete r.knownPatches[s]})},o.prototype.bindToContext=function(r){return this.contextPreservationFunction(r)},o.prototype.addContextPreservation=function(r){var s=this.contextPreservationFunction;this.contextPreservationFunction=function(l){return r(s(l))}},o.prototype.registerMonkeyPatch=function(r,s){this.knownPatches[r]||(this.knownPatches[r]=[]),this.knownPatches[r].push(s)},o.prototype.getPatchesObject=function(){return this.knownPatches},o}();global.diagnosticsSource||(global.diagnosticsSource=new u,a=require("module"),a.prototype.require=i.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var a;e.channel=global.diagnosticsSource}),fp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),dp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._globalThis=void 0,e._globalThis=typeof globalThis=="object"?globalThis:global}),pp=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(dp(),e)}),hp=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(pp(),e)}),Vc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="1.0.3"}),vp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCompatible=e._makeCompatibilityCheck=void 0;var i=Vc(),t=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function n(u){var a=new Set([u]),o=new Set,r=u.match(t);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(c){return c===u};function l(c){return o.add(c),!1}function f(c){return a.add(c),!0}return function(c){if(a.has(c))return!0;if(o.has(c))return!1;var p=c.match(t);if(!p)return l(c);var v={major:+p[1],minor:+p[2],patch:+p[3],prerelease:p[4]};return v.prerelease!=null||s.major!==v.major?l(c):s.major===0?s.minor===v.minor&&s.patch<=v.patch?f(c):l(c):s.minor<=v.minor?f(c):l(c)}}e._makeCompatibilityCheck=n,e.isCompatible=n(i.VERSION)}),li=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unregisterGlobal=e.getGlobal=e.registerGlobal=void 0;var i=hp(),t=Vc(),n=vp(),u=t.VERSION.split(".")[0],a=Symbol.for("opentelemetry.js.api."+u),o=i._globalThis;function r(f,c,p,v){var m;v===void 0&&(v=!1);var g=o[a]=(m=o[a])!==null&&m!==void 0?m:{version:t.VERSION};if(!v&&g[f]){var E=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+f);return p.error(E.stack||E.message),!1}if(g.version!==t.VERSION){var E=new Error("@opentelemetry/api: All API registration versions must match");return p.error(E.stack||E.message),!1}return g[f]=c,p.debug("@opentelemetry/api: Registered a global for "+f+" v"+t.VERSION+"."),!0}e.registerGlobal=r;function s(f){var c,p,v=(c=o[a])===null||c===void 0?void 0:c.version;if(!(!v||!n.isCompatible(v)))return(p=o[a])===null||p===void 0?void 0:p[f]}e.getGlobal=s;function l(f,c){c.debug("@opentelemetry/api: Unregistering a global for "+f+" v"+t.VERSION+".");var p=o[a];p&&delete p[f]}e.unregisterGlobal=l}),mp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagComponentLogger=void 0;var i=li(),t=function(){function u(a){this._namespace=a.namespace||"DiagComponentLogger"}return u.prototype.debug=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return n("debug",this._namespace,a)},u.prototype.error=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return n("error",this._namespace,a)},u.prototype.info=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return n("info",this._namespace,a)},u.prototype.warn=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return n("warn",this._namespace,a)},u.prototype.verbose=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return n("verbose",this._namespace,a)},u}();e.DiagComponentLogger=t;function n(u,a,o){var r=i.getGlobal("diag");if(r)return o.unshift(a),r[u].apply(r,o)}}),Pa=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagLogLevel=void 0;var i;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(i=e.DiagLogLevel||(e.DiagLogLevel={}))}),gp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLogLevelDiagLogger=void 0;var i=Pa();function t(n,u){n<i.DiagLogLevel.NONE?n=i.DiagLogLevel.NONE:n>i.DiagLogLevel.ALL&&(n=i.DiagLogLevel.ALL),u=u||{};function a(o,r){var s=u[o];return typeof s=="function"&&n>=r?s.bind(u):function(){}}return{error:a("error",i.DiagLogLevel.ERROR),warn:a("warn",i.DiagLogLevel.WARN),info:a("info",i.DiagLogLevel.INFO),debug:a("debug",i.DiagLogLevel.DEBUG),verbose:a("verbose",i.DiagLogLevel.VERBOSE)}}e.createLogLevelDiagLogger=t}),fi=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagAPI=void 0;var i=mp(),t=gp(),n=Pa(),u=li(),a="diag",o=function(){function r(){function s(f){return function(){var c=u.getGlobal("diag");if(c)return c[f].apply(c,arguments)}}var l=this;l.setLogger=function(f,c){var p,v;if(c===void 0&&(c=n.DiagLogLevel.INFO),f===l){var m=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((p=m.stack)!==null&&p!==void 0?p:m.message),!1}var g=u.getGlobal("diag"),E=t.createLogLevelDiagLogger(c,f);if(g){var T=(v=new Error().stack)!==null&&v!==void 0?v:"<failed to generate stacktrace>";g.warn("Current logger will be overwritten from "+T),E.warn("Current logger will overwrite one already registered from "+T)}return u.registerGlobal("diag",E,l,!0)},l.disable=function(){u.unregisterGlobal(a,l)},l.createComponentLogger=function(f){return new i.DiagComponentLogger(f)},l.verbose=s("verbose"),l.debug=s("debug"),l.info=s("info"),l.warn=s("warn"),l.error=s("error")}return r.instance=function(){return this._instance||(this._instance=new r),this._instance},r}();e.DiagAPI=o}),_p=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaggageImpl=void 0;var i=function(){function t(n){this._entries=n?new Map(n):new Map}return t.prototype.getEntry=function(n){var u=this._entries.get(n);if(u)return Object.assign({},u)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(n){var u=n[0],a=n[1];return[u,a]})},t.prototype.setEntry=function(n,u){var a=new t(this._entries);return a._entries.set(n,u),a},t.prototype.removeEntry=function(n){var u=new t(this._entries);return u._entries.delete(n),u},t.prototype.removeEntries=function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];for(var a=new t(this._entries),o=0,r=n;o<r.length;o++){var s=r[o];a._entries.delete(s)}return a},t.prototype.clear=function(){return new t},t}();e.BaggageImpl=i}),yp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataSymbol=void 0,e.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")}),zc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.baggageEntryMetadataFromString=e.createBaggage=void 0;var i=fi(),t=_p(),n=yp(),u=i.DiagAPI.instance();function a(r){return r===void 0&&(r={}),new t.BaggageImpl(new Map(Object.entries(r)))}e.createBaggage=a;function o(r){return typeof r!="string"&&(u.error("Cannot create baggage metadata from unknown type: "+typeof r),r=""),{__TYPE__:n.baggageEntryMetadataSymbol,toString:function(){return r}}}e.baggageEntryMetadataFromString=o}),Ep=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),bp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Sp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiagConsoleLogger=void 0;var i=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],t=function(){function n(){function u(o){return function(){var r=arguments;if(console){var s=console[o];if(typeof s!="function"&&(s=console.log),typeof s=="function")return s.apply(console,r)}}}for(var a=0;a<i.length;a++)this[i[a].n]=u(i[a].c)}return n}();e.DiagConsoleLogger=t}),Tp=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Sp(),e),t(Pa(),e)}),$c=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTextMapSetter=e.defaultTextMapGetter=void 0,e.defaultTextMapGetter={get:function(i,t){if(i!=null)return i[t]},keys:function(i){return i==null?[]:Object.keys(i)}},e.defaultTextMapSetter={set:function(i,t,n){i!=null&&(i[t]=n)}}}),Ip=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),wp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),to=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ROOT_CONTEXT=e.createContextKey=void 0;function i(n){return Symbol.for(n)}e.createContextKey=i;var t=function(){function n(u){var a=this;a._currentContext=u?new Map(u):new Map,a.getValue=function(o){return a._currentContext.get(o)},a.setValue=function(o,r){var s=new n(a._currentContext);return s._currentContext.set(o,r),s},a.deleteValue=function(o){var r=new n(a._currentContext);return r._currentContext.delete(o),r}}return n}();e.ROOT_CONTEXT=new t}),Ap=x(e=>{"use strict";var i=e&&e.__spreadArray||function(u,a){for(var o=0,r=a.length,s=u.length;o<r;o++,s++)u[s]=a[o];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.NoopContextManager=void 0;var t=to(),n=function(){function u(){}return u.prototype.active=function(){return t.ROOT_CONTEXT},u.prototype.with=function(a,o,r){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];return o.call.apply(o,i([r],s))},u.prototype.bind=function(a,o){return o},u.prototype.enable=function(){return this},u.prototype.disable=function(){return this},u}();e.NoopContextManager=n}),Wc=x(e=>{"use strict";var i=e&&e.__spreadArray||function(s,l){for(var f=0,c=l.length,p=s.length;f<c;f++,p++)s[p]=l[f];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.ContextAPI=void 0;var t=Ap(),n=li(),u=fi(),a="context",o=new t.NoopContextManager,r=function(){function s(){}return s.getInstance=function(){return this._instance||(this._instance=new s),this._instance},s.prototype.setGlobalContextManager=function(l){return n.registerGlobal(a,l,u.DiagAPI.instance())},s.prototype.active=function(){return this._getContextManager().active()},s.prototype.with=function(l,f,c){for(var p,v=[],m=3;m<arguments.length;m++)v[m-3]=arguments[m];return(p=this._getContextManager()).with.apply(p,i([l,f,c],v))},s.prototype.bind=function(l,f){return this._getContextManager().bind(l,f)},s.prototype._getContextManager=function(){return n.getGlobal(a)||o},s.prototype.disable=function(){this._getContextManager().disable(),n.unregisterGlobal(a,u.DiagAPI.instance())},s}();e.ContextAPI=r}),Kc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceFlags=void 0;var i;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(i=e.TraceFlags||(e.TraceFlags={}))}),Ca=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=void 0;var i=Kc();e.INVALID_SPANID="0000000000000000",e.INVALID_TRACEID="00000000000000000000000000000000",e.INVALID_SPAN_CONTEXT={traceId:e.INVALID_TRACEID,spanId:e.INVALID_SPANID,traceFlags:i.TraceFlags.NONE}}),Ra=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NonRecordingSpan=void 0;var i=Ca(),t=function(){function n(u){u===void 0&&(u=i.INVALID_SPAN_CONTEXT),this._spanContext=u}return n.prototype.spanContext=function(){return this._spanContext},n.prototype.setAttribute=function(u,a){return this},n.prototype.setAttributes=function(u){return this},n.prototype.addEvent=function(u,a){return this},n.prototype.setStatus=function(u){return this},n.prototype.updateName=function(u){return this},n.prototype.end=function(u){},n.prototype.isRecording=function(){return!1},n.prototype.recordException=function(u,a){},n}();e.NonRecordingSpan=t}),Xc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpanContext=e.setSpanContext=e.deleteSpan=e.setSpan=e.getSpan=void 0;var i=to(),t=Ra(),n=i.createContextKey("OpenTelemetry Context Key SPAN");function u(l){return l.getValue(n)||void 0}e.getSpan=u;function a(l,f){return l.setValue(n,f)}e.setSpan=a;function o(l){return l.deleteValue(n)}e.deleteSpan=o;function r(l,f){return a(l,new t.NonRecordingSpan(f))}e.setSpanContext=r;function s(l){var f;return(f=u(l))===null||f===void 0?void 0:f.spanContext()}e.getSpanContext=s}),Da=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapSpanContext=e.isSpanContextValid=e.isValidSpanId=e.isValidTraceId=void 0;var i=Ca(),t=Ra(),n=/^([0-9a-f]{32})$/i,u=/^[0-9a-f]{16}$/i;function a(l){return n.test(l)&&l!==i.INVALID_TRACEID}e.isValidTraceId=a;function o(l){return u.test(l)&&l!==i.INVALID_SPANID}e.isValidSpanId=o;function r(l){return a(l.traceId)&&o(l.spanId)}e.isSpanContextValid=r;function s(l){return new t.NonRecordingSpan(l)}e.wrapSpanContext=s}),Qc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracer=void 0;var i=Wc(),t=Xc(),n=Ra(),u=Da(),a=i.ContextAPI.getInstance(),o=function(){function s(){}return s.prototype.startSpan=function(l,f,c){var p=Boolean(f?.root);if(p)return new n.NonRecordingSpan;var v=c&&t.getSpanContext(c);return r(v)&&u.isSpanContextValid(v)?new n.NonRecordingSpan(v):new n.NonRecordingSpan},s.prototype.startActiveSpan=function(l,f,c,p){var v,m,g;if(!(arguments.length<2)){arguments.length===2?g=f:arguments.length===3?(v=f,g=c):(v=f,m=c,g=p);var E=m??a.active(),T=this.startSpan(l,v,E),O=t.setSpan(E,T);return a.with(O,g,void 0,T)}},s}();e.NoopTracer=o;function r(s){return typeof s=="object"&&typeof s.spanId=="string"&&typeof s.traceId=="string"&&typeof s.traceFlags=="number"}}),Yc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracer=void 0;var i=Qc(),t=new i.NoopTracer,n=function(){function u(a,o,r){this._provider=a,this.name=o,this.version=r}return u.prototype.startSpan=function(a,o,r){return this._getTracer().startSpan(a,o,r)},u.prototype.startActiveSpan=function(a,o,r,s){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},u.prototype._getTracer=function(){if(this._delegate)return this._delegate;var a=this._provider.getDelegateTracer(this.name,this.version);return a?(this._delegate=a,this._delegate):t},u}();e.ProxyTracer=n}),Op=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTracerProvider=void 0;var i=Qc(),t=function(){function n(){}return n.prototype.getTracer=function(u,a){return new i.NoopTracer},n}();e.NoopTracerProvider=t}),Zc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProxyTracerProvider=void 0;var i=Yc(),t=Op(),n=new t.NoopTracerProvider,u=function(){function a(){}return a.prototype.getTracer=function(o,r){var s;return(s=this.getDelegateTracer(o,r))!==null&&s!==void 0?s:new i.ProxyTracer(this,o,r)},a.prototype.getDelegate=function(){var o;return(o=this._delegate)!==null&&o!==void 0?o:n},a.prototype.setDelegate=function(o){this._delegate=o},a.prototype.getDelegateTracer=function(o,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(o,r)},a}();e.ProxyTracerProvider=u}),Pp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SamplingDecision=void 0;var i;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(i=e.SamplingDecision||(e.SamplingDecision={}))}),Rp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanKind=void 0;var i;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(i=e.SpanKind||(e.SpanKind={}))}),xp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Np=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpanStatusCode=void 0;var i;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(i=e.SpanStatusCode||(e.SpanStatusCode={}))}),kp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Lp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),jp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Up=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceAPI=void 0;var i=li(),t=Zc(),n=Da(),u=Xc(),a=fi(),o="trace",r=function(){function s(){this._proxyTracerProvider=new t.ProxyTracerProvider,this.wrapSpanContext=n.wrapSpanContext,this.isSpanContextValid=n.isSpanContextValid,this.deleteSpan=u.deleteSpan,this.getSpan=u.getSpan,this.getSpanContext=u.getSpanContext,this.setSpan=u.setSpan,this.setSpanContext=u.setSpanContext}return s.getInstance=function(){return this._instance||(this._instance=new s),this._instance},s.prototype.setGlobalTracerProvider=function(l){var f=i.registerGlobal(o,this._proxyTracerProvider,a.DiagAPI.instance());return f&&this._proxyTracerProvider.setDelegate(l),f},s.prototype.getTracerProvider=function(){return i.getGlobal(o)||this._proxyTracerProvider},s.prototype.getTracer=function(l,f){return this.getTracerProvider().getTracer(l,f)},s.prototype.disable=function(){i.unregisterGlobal(o,a.DiagAPI.instance()),this._proxyTracerProvider=new t.ProxyTracerProvider},s}();e.TraceAPI=r}),Hp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopTextMapPropagator=void 0;var i=function(){function t(){}return t.prototype.inject=function(n,u){},t.prototype.extract=function(n,u){return n},t.prototype.fields=function(){return[]},t}();e.NoopTextMapPropagator=i}),qp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteBaggage=e.setBaggage=e.getBaggage=void 0;var i=to(),t=i.createContextKey("OpenTelemetry Baggage Key");function n(o){return o.getValue(t)||void 0}e.getBaggage=n;function u(o,r){return o.setValue(t,r)}e.setBaggage=u;function a(o){return o.deleteValue(t)}e.deleteBaggage=a}),Bp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PropagationAPI=void 0;var i=li(),t=Hp(),n=$c(),u=qp(),a=zc(),o=fi(),r="propagation",s=new t.NoopTextMapPropagator,l=function(){function f(){this.createBaggage=a.createBaggage,this.getBaggage=u.getBaggage,this.setBaggage=u.setBaggage,this.deleteBaggage=u.deleteBaggage}return f.getInstance=function(){return this._instance||(this._instance=new f),this._instance},f.prototype.setGlobalPropagator=function(c){return i.registerGlobal(r,c,o.DiagAPI.instance())},f.prototype.inject=function(c,p,v){return v===void 0&&(v=n.defaultTextMapSetter),this._getGlobalPropagator().inject(c,p,v)},f.prototype.extract=function(c,p,v){return v===void 0&&(v=n.defaultTextMapGetter),this._getGlobalPropagator().extract(c,p,v)},f.prototype.fields=function(){return this._getGlobalPropagator().fields()},f.prototype.disable=function(){i.unregisterGlobal(r,o.DiagAPI.instance())},f.prototype._getGlobalPropagator=function(){return i.getGlobal(r)||s},f}();e.PropagationAPI=l}),Jt=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(f,c,p,v){v===void 0&&(v=p),Object.defineProperty(f,v,{enumerable:!0,get:function(){return c[p]}})}:function(f,c,p,v){v===void 0&&(v=p),f[v]=c[p]}),t=e&&e.__exportStar||function(f,c){for(var p in f)p!=="default"&&!Object.prototype.hasOwnProperty.call(c,p)&&i(c,f,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.diag=e.propagation=e.trace=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.baggageEntryMetadataFromString=void 0,t(fp(),e);var n=zc();Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return n.baggageEntryMetadataFromString}}),t(Ep(),e),t(bp(),e),t(Tp(),e),t($c(),e),t(Ip(),e),t(wp(),e),t(Yc(),e),t(Zc(),e),t(Pp(),e),t(Cp(),e),t(Rp(),e),t(Dp(),e),t(xp(),e),t(Np(),e),t(Mp(),e),t(Kc(),e),t(kp(),e),t(Lp(),e),t(jp(),e);var u=Da();Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return u.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return u.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return u.isValidSpanId}});var a=Ca();Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return a.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return a.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return a.INVALID_SPAN_CONTEXT}}),t(to(),e),t(Fp(),e);var o=Wc();e.context=o.ContextAPI.getInstance();var r=Up();e.trace=r.TraceAPI.getInstance();var s=Bp();e.propagation=s.PropagationAPI.getInstance();var l=fi();e.diag=l.DiagAPI.instance(),e.default={trace:e.trace,context:e.context,propagation:e.propagation,diag:e.diag}}),xa=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTracingSuppressed=e.unsuppressTracing=e.suppressTracing=void 0;var i=Jt(),t=i.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function n(o){return o.setValue(t,!0)}e.suppressTracing=n;function u(o){return o.deleteValue(t)}e.unsuppressTracing=u;function a(o){return o.getValue(t)===!0}e.isTracingSuppressed=a}),Jc=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BAGGAGE_MAX_TOTAL_LENGTH=e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=e.BAGGAGE_MAX_NAME_VALUE_PAIRS=e.BAGGAGE_HEADER=e.BAGGAGE_ITEMS_SEPARATOR=e.BAGGAGE_PROPERTIES_SEPARATOR=e.BAGGAGE_KEY_PAIR_SEPARATOR=void 0,e.BAGGAGE_KEY_PAIR_SEPARATOR="=",e.BAGGAGE_PROPERTIES_SEPARATOR=";",e.BAGGAGE_ITEMS_SEPARATOR=",",e.BAGGAGE_HEADER="baggage",e.BAGGAGE_MAX_NAME_VALUE_PAIRS=180,e.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096,e.BAGGAGE_MAX_TOTAL_LENGTH=8192}),el=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseKeyPairsIntoRecord=e.parsePairKeyValue=e.getKeyPairs=e.serializeKeyPairs=void 0;var i=Jt(),t=Jc(),n=r=>r.reduce((s,l)=>{let f=`${s}${s!==""?t.BAGGAGE_ITEMS_SEPARATOR:""}${l}`;return f.length>t.BAGGAGE_MAX_TOTAL_LENGTH?s:f},"");e.serializeKeyPairs=n;var u=r=>r.getAllEntries().map(([s,l])=>`${encodeURIComponent(s)}=${encodeURIComponent(l.value)}`);e.getKeyPairs=u;var a=r=>{let s=r.split(t.BAGGAGE_PROPERTIES_SEPARATOR);if(s.length<=0)return;let l=s.shift();if(!l)return;let f=l.split(t.BAGGAGE_KEY_PAIR_SEPARATOR);if(f.length!==2)return;let c=decodeURIComponent(f[0].trim()),p=decodeURIComponent(f[1].trim()),v;return s.length>0&&(v=i.baggageEntryMetadataFromString(s.join(t.BAGGAGE_PROPERTIES_SEPARATOR))),{key:c,value:p,metadata:v}};e.parsePairKeyValue=a;var o=r=>typeof r!="string"||r.length===0?{}:r.split(t.BAGGAGE_ITEMS_SEPARATOR).map(s=>e.parsePairKeyValue(s)).filter(s=>s!==void 0&&s.value.length>0).reduce((s,l)=>(s[l.key]=l.value,s),{});e.parseKeyPairsIntoRecord=o}),Gp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpBaggagePropagator=void 0;var i=Jt(),t=xa(),n=Jc(),u=el(),a=class{inject(o,r,s){let l=i.propagation.getBaggage(o);if(!l||t.isTracingSuppressed(o))return;let f=u.getKeyPairs(l).filter(p=>p.length<=n.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,n.BAGGAGE_MAX_NAME_VALUE_PAIRS),c=u.serializeKeyPairs(f);c.length>0&&s.set(r,n.BAGGAGE_HEADER,c)}extract(o,r,s){let l=s.get(r,n.BAGGAGE_HEADER);if(!l)return o;let f={};return l.length===0||(l.split(n.BAGGAGE_ITEMS_SEPARATOR).forEach(c=>{let p=u.parsePairKeyValue(c);if(p){let v={value:p.value};p.metadata&&(v.metadata=p.metadata),f[p.key]=v}}),Object.entries(f).length===0)?o:i.propagation.setBaggage(o,i.propagation.createBaggage(f))}fields(){return[n.BAGGAGE_HEADER]}};e.HttpBaggagePropagator=a}),Vp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAttributeValue=e.sanitizeAttributes=void 0;function i(a){let o={};if(a==null||typeof a!="object")return o;for(let[r,s]of Object.entries(a))t(s)&&(Array.isArray(s)?o[r]=s.slice():o[r]=s);return o}e.sanitizeAttributes=i;function t(a){return a==null?!0:Array.isArray(a)?n(a):u(a)}e.isAttributeValue=t;function n(a){let o;for(let r of a)if(r!=null){if(!o){if(u(r)){o=typeof r;continue}return!1}if(typeof r!==o)return!1}return!0}function u(a){switch(typeof a){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}}),tl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loggingErrorHandler=void 0;var i=Jt();function t(){return a=>{i.diag.error(n(a))}}e.loggingErrorHandler=t;function n(a){return typeof a=="string"?a:JSON.stringify(u(a))}function u(a){let o={},r=a;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(s=>{if(o[s])return;let l=r[s];l&&(o[s]=String(l))}),r=Object.getPrototypeOf(r);return o}}),rl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalErrorHandler=e.setGlobalErrorHandler=void 0;var i=tl(),t=i.loggingErrorHandler();function n(a){t=a}e.setGlobalErrorHandler=n;var u=a=>{try{t(a)}catch{}};e.globalErrorHandler=u}),nl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TracesSamplerValues=void 0;var i;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(i=e.TracesSamplerValues||(e.TracesSamplerValues={}))}),il=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseEnvironment=e.DEFAULT_ENVIRONMENT=void 0;var i=Jt(),t=nl(),n=",",u=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function a(v){return u.indexOf(v)>-1}var o=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function r(v){return o.indexOf(v)>-1}e.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:i.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:t.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function s(v,m,g,E=-1/0,T=1/0){if(typeof g[v]<"u"){let O=Number(g[v]);isNaN(O)||(O<E?m[v]=E:O>T?m[v]=T:m[v]=O)}}function l(v,m,g,E=n){let T=g[v];typeof T=="string"&&(m[v]=T.split(E).map(O=>O.trim()))}var f={ALL:i.DiagLogLevel.ALL,VERBOSE:i.DiagLogLevel.VERBOSE,DEBUG:i.DiagLogLevel.DEBUG,INFO:i.DiagLogLevel.INFO,WARN:i.DiagLogLevel.WARN,ERROR:i.DiagLogLevel.ERROR,NONE:i.DiagLogLevel.NONE};function c(v,m,g){let E=g[v];if(typeof E=="string"){let T=f[E.toUpperCase()];T!=null&&(m[v]=T)}}function p(v){let m={};for(let g in e.DEFAULT_ENVIRONMENT){let E=g;switch(E){case"OTEL_LOG_LEVEL":c(E,m,v);break;default:if(a(E))s(E,m,v);else if(r(E))l(E,m,v);else{let T=v[E];typeof T<"u"&&T!==null&&(m[E]=String(T))}}}return m}e.parseEnvironment=p}),zp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnv=void 0;var i=require("os"),t=il();function n(){let u=t.parseEnvironment(process.env);return Object.assign({HOSTNAME:i.hostname()},t.DEFAULT_ENVIRONMENT,u)}e.getEnv=n}),$p=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hexToBase64=void 0;function i(t){let n=t.length,u="";for(let a=0;a<n;a+=2){let o=t.substring(a,a+2),r=parseInt(o,16);u+=String.fromCharCode(r)}return Buffer.from(u,"ascii").toString("base64")}e.hexToBase64=i}),Wp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomIdGenerator=void 0;var i=8,t=16,n=class{constructor(){this.generateTraceId=a(t),this.generateSpanId=a(i)}};e.RandomIdGenerator=n;var u=Buffer.allocUnsafe(t);function a(o){return function(){for(let r=0;r<o/4;r++)u.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<o&&!(u[r]>0);r++)r===o-1&&(u[o-1]=1);return u.toString("hex",0,o)}}}),Kp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.otperformance=void 0;var i=require("perf_hooks");e.otperformance=i.performance}),Oa=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.23.0"}),Xp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RpcGrpcStatusCodeValues=e.MessagingOperationValues=e.MessagingDestinationKindValues=e.HttpFlavorValues=e.NetTransportValues=e.FaasInvokedProviderValues=e.FaasDocumentOperationValues=e.FaasTriggerValues=e.DbCassandraConsistencyLevelValues=e.DbSystemValues=e.SemanticAttributes=void 0,e.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var i;(function(c){c.OTHER_SQL="other_sql",c.MSSQL="mssql",c.MYSQL="mysql",c.ORACLE="oracle",c.DB2="db2",c.POSTGRESQL="postgresql",c.REDSHIFT="redshift",c.HIVE="hive",c.CLOUDSCAPE="cloudscape",c.HSQLDB="hsqldb",c.PROGRESS="progress",c.MAXDB="maxdb",c.HANADB="hanadb",c.INGRES="ingres",c.FIRSTSQL="firstsql",c.EDB="edb",c.CACHE="cache",c.ADABAS="adabas",c.FIREBIRD="firebird",c.DERBY="derby",c.FILEMAKER="filemaker",c.INFORMIX="informix",c.INSTANTDB="instantdb",c.INTERBASE="interbase",c.MARIADB="mariadb",c.NETEZZA="netezza",c.PERVASIVE="pervasive",c.POINTBASE="pointbase",c.SQLITE="sqlite",c.SYBASE="sybase",c.TERADATA="teradata",c.VERTICA="vertica",c.H2="h2",c.COLDFUSION="coldfusion",c.CASSANDRA="cassandra",c.HBASE="hbase",c.MONGODB="mongodb",c.REDIS="redis",c.COUCHBASE="couchbase",c.COUCHDB="couchdb",c.COSMOSDB="cosmosdb",c.DYNAMODB="dynamodb",c.NEO4J="neo4j",c.GEODE="geode",c.ELASTICSEARCH="elasticsearch",c.MEMCACHED="memcached",c.COCKROACHDB="cockroachdb"})(i=e.DbSystemValues||(e.DbSystemValues={}));var t;(function(c){c.ALL="all",c.EACH_QUORUM="each_quorum",c.QUORUM="quorum",c.LOCAL_QUORUM="local_quorum",c.ONE="one",c.TWO="two",c.THREE="three",c.LOCAL_ONE="local_one",c.ANY="any",c.SERIAL="serial",c.LOCAL_SERIAL="local_serial"})(t=e.DbCassandraConsistencyLevelValues||(e.DbCassandraConsistencyLevelValues={}));var n;(function(c){c.DATASOURCE="datasource",c.HTTP="http",c.PUBSUB="pubsub",c.TIMER="timer",c.OTHER="other"})(n=e.FaasTriggerValues||(e.FaasTriggerValues={}));var u;(function(c){c.INSERT="insert",c.EDIT="edit",c.DELETE="delete"})(u=e.FaasDocumentOperationValues||(e.FaasDocumentOperationValues={}));var a;(function(c){c.AWS="aws",c.AZURE="azure",c.GCP="gcp"})(a=e.FaasInvokedProviderValues||(e.FaasInvokedProviderValues={}));var o;(function(c){c.IP_TCP="ip_tcp",c.IP_UDP="ip_udp",c.IP="ip",c.UNIX="unix",c.PIPE="pipe",c.INPROC="inproc",c.OTHER="other"})(o=e.NetTransportValues||(e.NetTransportValues={}));var r;(function(c){c.HTTP_1_0="1.0",c.HTTP_1_1="1.1",c.HTTP_2_0="2.0",c.SPDY="SPDY",c.QUIC="QUIC"})(r=e.HttpFlavorValues||(e.HttpFlavorValues={}));var s;(function(c){c.QUEUE="queue",c.TOPIC="topic"})(s=e.MessagingDestinationKindValues||(e.MessagingDestinationKindValues={}));var l;(function(c){c.RECEIVE="receive",c.PROCESS="process"})(l=e.MessagingOperationValues||(e.MessagingOperationValues={}));var f;(function(c){c[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(f=e.RpcGrpcStatusCodeValues||(e.RpcGrpcStatusCodeValues={}))}),Qp=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Xp(),e)}),Yp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetrySdkLanguageValues=e.OsTypeValues=e.HostArchValues=e.AwsEcsLaunchtypeValues=e.CloudPlatformValues=e.CloudProviderValues=e.ResourceAttributes=void 0,e.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var i;(function(r){r.AWS="aws",r.AZURE="azure",r.GCP="gcp"})(i=e.CloudProviderValues||(e.CloudProviderValues={}));var t;(function(r){r.AWS_EC2="aws_ec2",r.AWS_ECS="aws_ecs",r.AWS_EKS="aws_eks",r.AWS_LAMBDA="aws_lambda",r.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",r.AZURE_VM="azure_vm",r.AZURE_CONTAINER_INSTANCES="azure_container_instances",r.AZURE_AKS="azure_aks",r.AZURE_FUNCTIONS="azure_functions",r.AZURE_APP_SERVICE="azure_app_service",r.GCP_COMPUTE_ENGINE="gcp_compute_engine",r.GCP_CLOUD_RUN="gcp_cloud_run",r.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",r.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",r.GCP_APP_ENGINE="gcp_app_engine"})(t=e.CloudPlatformValues||(e.CloudPlatformValues={}));var n;(function(r){r.EC2="ec2",r.FARGATE="fargate"})(n=e.AwsEcsLaunchtypeValues||(e.AwsEcsLaunchtypeValues={}));var u;(function(r){r.AMD64="amd64",r.ARM32="arm32",r.ARM64="arm64",r.IA64="ia64",r.PPC32="ppc32",r.PPC64="ppc64",r.X86="x86"})(u=e.HostArchValues||(e.HostArchValues={}));var a;(function(r){r.WINDOWS="windows",r.LINUX="linux",r.DARWIN="darwin",r.FREEBSD="freebsd",r.NETBSD="netbsd",r.OPENBSD="openbsd",r.DRAGONFLYBSD="dragonflybsd",r.HPUX="hpux",r.AIX="aix",r.SOLARIS="solaris",r.Z_OS="z_os"})(a=e.OsTypeValues||(e.OsTypeValues={}));var o;(function(r){r.CPP="cpp",r.DOTNET="dotnet",r.ERLANG="erlang",r.GO="go",r.JAVA="java",r.NODEJS="nodejs",r.PHP="php",r.PYTHON="python",r.RUBY="ruby",r.WEBJS="webjs"})(o=e.TelemetrySdkLanguageValues||(e.TelemetrySdkLanguageValues={}))}),Zp=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Yp(),e)}),di=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Qp(),e),t(Zp(),e)}),Jp=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SDK_INFO=void 0;var i=Oa(),t=di();e.SDK_INFO={[t.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[t.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[t.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.TelemetrySdkLanguageValues.NODEJS,[t.ResourceAttributes.TELEMETRY_SDK_VERSION]:i.VERSION}}),eh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unrefTimer=void 0;function i(t){t.unref()}e.unrefTimer=i}),th=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(zp(),e),t($p(),e),t(Wp(),e),t(Kp(),e),t(Jp(),e),t(eh(),e)}),ol=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(th(),e)}),rh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isTimeInput=e.isTimeInputHrTime=e.hrTimeToMicroseconds=e.hrTimeToMilliseconds=e.hrTimeToNanoseconds=e.hrTimeToTimeStamp=e.hrTimeDuration=e.timeInputToHrTime=e.hrTime=void 0;var i=ol(),t=9,n=Math.pow(10,t);function u(g){let E=g/1e3,T=Math.trunc(E),O=Number((E-T).toFixed(t))*n;return[T,O]}function a(){let g=i.otperformance.timeOrigin;if(typeof g!="number"){let E=i.otperformance;g=E.timing&&E.timing.fetchStart}return g}function o(g){let E=u(a()),T=u(typeof g=="number"?g:i.otperformance.now()),O=E[0]+T[0],P=E[1]+T[1];return P>n&&(P-=n,O+=1),[O,P]}e.hrTime=o;function r(g){if(v(g))return g;if(typeof g=="number")return g<a()?o(g):u(g);if(g instanceof Date)return u(g.getTime());throw TypeError("Invalid input type")}e.timeInputToHrTime=r;function s(g,E){let T=E[0]-g[0],O=E[1]-g[1];return O<0&&(T-=1,O+=n),[T,O]}e.hrTimeDuration=s;function l(g){let E=t,T=`${"0".repeat(E)}${g[1]}Z`,O=T.substr(T.length-E-1);return new Date(g[0]*1e3).toISOString().replace("000Z",O)}e.hrTimeToTimeStamp=l;function f(g){return g[0]*n+g[1]}e.hrTimeToNanoseconds=f;function c(g){return Math.round(g[0]*1e3+g[1]/1e6)}e.hrTimeToMilliseconds=c;function p(g){return Math.round(g[0]*1e6+g[1]/1e3)}e.hrTimeToMicroseconds=p;function v(g){return Array.isArray(g)&&g.length===2&&typeof g[0]=="number"&&typeof g[1]=="number"}e.isTimeInputHrTime=v;function m(g){return v(g)||typeof g=="number"||g instanceof Date}e.isTimeInput=m}),nh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ih=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExportResultCode=void 0;var i;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(i=e.ExportResultCode||(e.ExportResultCode={}))}),oh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositePropagator=void 0;var i=Jt(),t=class{constructor(n={}){var u;this._propagators=(u=n.propagators)!==null&&u!==void 0?u:[],this._fields=Array.from(new Set(this._propagators.map(a=>typeof a.fields=="function"?a.fields():[]).reduce((a,o)=>a.concat(o),[])))}inject(n,u,a){for(let o of this._propagators)try{o.inject(n,u,a)}catch(r){i.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${r.message}`)}}extract(n,u,a){return this._propagators.reduce((o,r)=>{try{return r.extract(o,u,a)}catch(s){i.diag.warn(`Failed to inject with ${r.constructor.name}. Err: ${s.message}`)}return o},n)}fields(){return this._fields.slice()}};e.CompositePropagator=t}),ah=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateValue=e.validateKey=void 0;var i="[_0-9a-z-*/]",t=`[a-z]${i}{0,255}`,n=`[a-z0-9]${i}{0,240}@[a-z]${i}{0,13}`,u=new RegExp(`^(?:${t}|${n})$`),a=/^[ -~]{0,255}[!-~]$/,o=/,|=/;function r(l){return u.test(l)}e.validateKey=r;function s(l){return a.test(l)&&!o.test(l)}e.validateValue=s}),al=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceState=void 0;var i=ah(),t=32,n=512,u=",",a="=",o=class{constructor(r){this._internalState=new Map,r&&this._parse(r)}set(r,s){let l=this._clone();return l._internalState.has(r)&&l._internalState.delete(r),l._internalState.set(r,s),l}unset(r){let s=this._clone();return s._internalState.delete(r),s}get(r){return this._internalState.get(r)}serialize(){return this._keys().reduce((r,s)=>(r.push(s+a+this.get(s)),r),[]).join(u)}_parse(r){r.length>n||(this._internalState=r.split(u).reverse().reduce((s,l)=>{let f=l.trim(),c=f.indexOf(a);if(c!==-1){let p=f.slice(0,c),v=f.slice(c+1,l.length);i.validateKey(p)&&i.validateValue(v)&&s.set(p,v)}return s},new Map),this._internalState.size>t&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,t))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let r=new o;return r._internalState=new Map(this._internalState),r}};e.TraceState=o}),sh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpTraceContextPropagator=e.parseTraceParent=e.TRACE_STATE_HEADER=e.TRACE_PARENT_HEADER=void 0;var i=Jt(),t=xa(),n=al();e.TRACE_PARENT_HEADER="traceparent",e.TRACE_STATE_HEADER="tracestate";var u="00",a="(?!ff)[\\da-f]{2}",o="(?![0]{32})[\\da-f]{32}",r="(?![0]{16})[\\da-f]{16}",s="[\\da-f]{2}",l=new RegExp(`^\\s?(${a})-(${o})-(${r})-(${s})(-.*)?\\s?$`);function f(p){let v=l.exec(p);return!v||v[1]==="00"&&v[5]?null:{traceId:v[2],spanId:v[3],traceFlags:parseInt(v[4],16)}}e.parseTraceParent=f;var c=class{inject(p,v,m){let g=i.trace.getSpanContext(p);if(!g||t.isTracingSuppressed(p)||!i.isSpanContextValid(g))return;let E=`${u}-${g.traceId}-${g.spanId}-0${Number(g.traceFlags||i.TraceFlags.NONE).toString(16)}`;m.set(v,e.TRACE_PARENT_HEADER,E),g.traceState&&m.set(v,e.TRACE_STATE_HEADER,g.traceState.serialize())}extract(p,v,m){let g=m.get(v,e.TRACE_PARENT_HEADER);if(!g)return p;let E=Array.isArray(g)?g[0]:g;if(typeof E!="string")return p;let T=f(E);if(!T)return p;T.isRemote=!0;let O=m.get(v,e.TRACE_STATE_HEADER);if(O){let P=Array.isArray(O)?O.join(","):O;T.traceState=new n.TraceState(typeof P=="string"?P:void 0)}return i.trace.setSpanContext(p,T)}fields(){return[e.TRACE_PARENT_HEADER,e.TRACE_STATE_HEADER]}};e.HttpTraceContextPropagator=c}),uh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),ch=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRPCMetadata=e.deleteRPCMetadata=e.setRPCMetadata=e.RPCType=void 0;var i=Jt(),t=i.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),n;(function(r){r.HTTP="http"})(n=e.RPCType||(e.RPCType={}));function u(r,s){return r.setValue(t,s)}e.setRPCMetadata=u;function a(r){return r.deleteValue(t)}e.deleteRPCMetadata=a;function o(r){return r.getValue(t)}e.getRPCMetadata=o}),sl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOffSampler=void 0;var i=Jt(),t=class{shouldSample(){return{decision:i.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};e.AlwaysOffSampler=t}),ul=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysOnSampler=void 0;var i=Jt(),t=class{shouldSample(){return{decision:i.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};e.AlwaysOnSampler=t}),lh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParentBasedSampler=void 0;var i=Jt(),t=rl(),n=sl(),u=ul(),a=class{constructor(o){var r,s,l,f;this._root=o.root,this._root||(t.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new u.AlwaysOnSampler),this._remoteParentSampled=(r=o.remoteParentSampled)!==null&&r!==void 0?r:new u.AlwaysOnSampler,this._remoteParentNotSampled=(s=o.remoteParentNotSampled)!==null&&s!==void 0?s:new n.AlwaysOffSampler,this._localParentSampled=(l=o.localParentSampled)!==null&&l!==void 0?l:new u.AlwaysOnSampler,this._localParentNotSampled=(f=o.localParentNotSampled)!==null&&f!==void 0?f:new n.AlwaysOffSampler}shouldSample(o,r,s,l,f,c){let p=i.trace.getSpanContext(o);return!p||!i.isSpanContextValid(p)?this._root.shouldSample(o,r,s,l,f,c):p.isRemote?p.traceFlags&i.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(o,r,s,l,f,c):this._remoteParentNotSampled.shouldSample(o,r,s,l,f,c):p.traceFlags&i.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(o,r,s,l,f,c):this._localParentNotSampled.shouldSample(o,r,s,l,f,c)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};e.ParentBasedSampler=a}),fh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TraceIdRatioBasedSampler=void 0;var i=Jt(),t=class{constructor(n=0){this._ratio=n,this._ratio=this._normalize(n),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(n,u){return{decision:i.isValidTraceId(u)&&this._accumulate(u)<this._upperBound?i.SamplingDecision.RECORD_AND_SAMPLED:i.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(n){return typeof n!="number"||isNaN(n)?0:n>=1?1:n<=0?0:n}_accumulate(n){let u=0;for(let a=0;a<n.length/8;a++){let o=a*8,r=parseInt(n.slice(o,o+8),16);u=(u^r)>>>0}return u}};e.TraceIdRatioBasedSampler=t}),dh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrlIgnored=e.urlMatches=void 0;function i(n,u){return typeof u=="string"?n===u:u.test(n)}e.urlMatches=i;function t(n,u){if(!u)return!1;for(let a of u)if(i(n,a))return!0;return!1}e.isUrlIgnored=t}),ph=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isWrapped=void 0;function i(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}e.isWrapped=i}),zr=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.baggageUtils=void 0,t(Gp(),e),t(Vp(),e),t(rl(),e),t(tl(),e),t(rh(),e),t(nh(),e),t(ih(),e),t(Oa(),e),e.baggageUtils=el(),t(ol(),e),t(oh(),e),t(sh(),e),t(uh(),e),t(ch(),e),t(sl(),e),t(ul(),e),t(lh(),e),t(fh(),e),t(xa(),e),t(al(),e),t(il(),e),t(nl(),e),t(dh(),e),t(ph(),e),t(Oa(),e)}),hh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExceptionEventName=void 0,e.ExceptionEventName="exception"}),cl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Span=void 0;var i=Jt(),t=zr(),n=di(),u=hh(),a=class{constructor(o,r,s,l,f,c,p=[],v=t.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:i.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=s,this._spanContext=l,this.parentSpanId=c,this.kind=f,this.links=p,this.startTime=t.timeInputToHrTime(v),this.resource=o.resource,this.instrumentationLibrary=o.instrumentationLibrary,this._spanLimits=o.getSpanLimits(),this._spanProcessor=o.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(o,r){return r==null||this._isSpanEnded()?this:o.length===0?(i.diag.warn(`Invalid attribute key: ${o}`),this):t.isAttributeValue(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,o)?this:(this.attributes[o]=r,this):(i.diag.warn(`Invalid attribute value set for key: ${o}`),this)}setAttributes(o){for(let[r,s]of Object.entries(o))this.setAttribute(r,s);return this}addEvent(o,r,s){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(i.diag.warn("Dropping extra events."),this.events.shift()),t.isTimeInput(r)&&(typeof s>"u"&&(s=r),r=void 0),typeof s>"u"&&(s=t.hrTime()),this.events.push({name:o,attributes:r,time:t.timeInputToHrTime(s)}),this)}setStatus(o){return this._isSpanEnded()?this:(this.status=o,this)}updateName(o){return this._isSpanEnded()?this:(this.name=o,this)}end(o=t.hrTime()){if(this._isSpanEnded()){i.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=t.timeInputToHrTime(o),this._duration=t.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&i.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(o,r=t.hrTime()){let s={};typeof o=="string"?s[n.SemanticAttributes.EXCEPTION_MESSAGE]=o:o&&(o.code?s[n.SemanticAttributes.EXCEPTION_TYPE]=o.code.toString():o.name&&(s[n.SemanticAttributes.EXCEPTION_TYPE]=o.name),o.message&&(s[n.SemanticAttributes.EXCEPTION_MESSAGE]=o.message),o.stack&&(s[n.SemanticAttributes.EXCEPTION_STACKTRACE]=o.stack)),s[n.SemanticAttributes.EXCEPTION_TYPE]||s[n.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(u.ExceptionEventName,s,r):i.diag.warn(`Failed to record an exception ${o}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&i.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};e.Span=a}),ll=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildSamplerFromEnv=e.DEFAULT_CONFIG=void 0;var i=Jt(),t=zr(),n=t.getEnv(),u=t.TracesSamplerValues.AlwaysOn;e.DEFAULT_CONFIG={sampler:a(n),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:t.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function a(s=t.getEnv()){switch(s.OTEL_TRACES_SAMPLER){case t.TracesSamplerValues.AlwaysOn:return new t.AlwaysOnSampler;case t.TracesSamplerValues.AlwaysOff:return new t.AlwaysOffSampler;case t.TracesSamplerValues.ParentBasedAlwaysOn:return new t.ParentBasedSampler({root:new t.AlwaysOnSampler});case t.TracesSamplerValues.ParentBasedAlwaysOff:return new t.ParentBasedSampler({root:new t.AlwaysOffSampler});case t.TracesSamplerValues.TraceIdRatio:return new t.TraceIdRatioBasedSampler(r(s));case t.TracesSamplerValues.ParentBasedTraceIdRatio:return new t.ParentBasedSampler({root:new t.TraceIdRatioBasedSampler(r(s))});default:return i.diag.error(`OTEL_TRACES_SAMPLER value "${s.OTEL_TRACES_SAMPLER} invalid, defaulting to ${u}".`),new t.AlwaysOnSampler}}e.buildSamplerFromEnv=a;var o=1;function r(s){if(s.OTEL_TRACES_SAMPLER_ARG===void 0||s.OTEL_TRACES_SAMPLER_ARG==="")return i.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${o}.`),o;let l=Number(s.OTEL_TRACES_SAMPLER_ARG);return isNaN(l)?(i.diag.error(`OTEL_TRACES_SAMPLER_ARG=${s.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${o}.`),o):l<0||l>1?(i.diag.error(`OTEL_TRACES_SAMPLER_ARG=${s.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${o}.`),o):l}}),vh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeConfig=void 0;var i=ll();function t(n){let u={sampler:i.buildSamplerFromEnv()},a=Object.assign({},i.DEFAULT_CONFIG,u,n);return a.spanLimits=Object.assign({},i.DEFAULT_CONFIG.spanLimits,n.spanLimits||{}),a}e.mergeConfig=t}),mh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tracer=void 0;var i=Jt(),t=zr(),n=cl(),u=vh(),a=class{constructor(r,s,l){this._tracerProvider=l;let f=u.mergeConfig(s);this._sampler=f.sampler,this._spanLimits=f.spanLimits,this._idGenerator=s.idGenerator||new t.RandomIdGenerator,this.resource=l.resource,this.instrumentationLibrary=r}startSpan(r,s={},l=i.context.active()){var f,c;if(t.isTracingSuppressed(l))return i.diag.debug("Instrumentation suppressed, returning Noop Span"),i.trace.wrapSpanContext(i.INVALID_SPAN_CONTEXT);let p=o(s,l),v=this._idGenerator.generateSpanId(),m,g,E;!p||!i.trace.isSpanContextValid(p)?m=this._idGenerator.generateTraceId():(m=p.traceId,g=p.traceState,E=p.spanId);let T=(f=s.kind)!==null&&f!==void 0?f:i.SpanKind.INTERNAL,O=(c=s.links)!==null&&c!==void 0?c:[],P=t.sanitizeAttributes(s.attributes),A=this._sampler.shouldSample(s.root?i.trace.setSpanContext(l,i.INVALID_SPAN_CONTEXT):l,m,r,T,P,O),M=A.decision===i.SamplingDecision.RECORD_AND_SAMPLED?i.TraceFlags.SAMPLED:i.TraceFlags.NONE,j={traceId:m,spanId:v,traceFlags:M,traceState:g};if(A.decision===i.SamplingDecision.NOT_RECORD)return i.diag.debug("Recording is off, propagating context in a non-recording span"),i.trace.wrapSpanContext(j);let G=new n.Span(this,l,r,j,T,E,O,s.startTime);return G.setAttributes(Object.assign(P,A.attributes)),G}startActiveSpan(r,s,l,f){let c,p,v;if(arguments.length<2)return;arguments.length===2?v=s:arguments.length===3?(c=s,v=l):(c=s,p=l,v=f);let m=p??i.context.active(),g=this.startSpan(r,c,m),E=i.trace.setSpan(m,g);return i.context.with(E,v,void 0,g)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};e.Tracer=a;function o(r,s){if(!r.root)return i.trace.getSpanContext(s)}}),gh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultServiceName=void 0;function i(){return`unknown_service:${process.argv0}`}e.defaultServiceName=i}),_h=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectResources=void 0;var i=dl(),t=Jt(),n=require("util"),u=async(o={})=>{let r=Object.assign(o),s=await Promise.all((r.detectors||[]).map(async l=>{try{let f=await l.detect(r);return t.diag.debug(`${l.constructor.name} found resource.`,f),f}catch(f){return t.diag.debug(`${l.constructor.name} failed: ${f.message}`),i.Resource.empty()}}));return a(s),s.reduce((l,f)=>l.merge(f),i.Resource.empty())};e.detectResources=u;var a=o=>{o.forEach(r=>{if(Object.keys(r.attributes).length>0){let s=n.inspect(r.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});t.diag.verbose(s)}})}}),yh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.envDetector=void 0;var i=Jt(),t=zr(),n=di(),u=Na(),a=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(o){let r={},s=t.getEnv(),l=s.OTEL_RESOURCE_ATTRIBUTES,f=s.OTEL_SERVICE_NAME;if(l)try{let c=this._parseResourceAttributes(l);Object.assign(r,c)}catch(c){i.diag.debug(`EnvDetector failed: ${c.message}`)}return f&&(r[n.ResourceAttributes.SERVICE_NAME]=f),new u.Resource(r)}_parseResourceAttributes(o){if(!o)return{};let r={},s=o.split(this._COMMA_SEPARATOR,-1);for(let l of s){let f=l.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(f.length!==2)continue;let[c,p]=f;if(c=c.trim(),p=p.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(c))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(p))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[c]=p}return r}_isValid(o){return o.length<=this._MAX_LENGTH&&this._isPrintableString(o)}_isPrintableString(o){for(let r=0;r<o.length;r++){let s=o.charAt(r);if(s<=" "||s>="~")return!1}return!0}_isValidAndNotEmpty(o){return o.length>0&&this._isValid(o)}};e.envDetector=new a}),Eh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.processDetector=void 0;var i=Jt(),t=di(),n=Na(),u=class{async detect(a){let o={[t.ResourceAttributes.PROCESS_PID]:process.pid,[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[t.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[t.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(o,a)}_getResourceAttributes(a,o){return a[t.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||a[t.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||a[t.ResourceAttributes.PROCESS_COMMAND]===""||a[t.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(i.diag.debug("ProcessDetector failed: Unable to find required process resources. "),n.Resource.empty()):new n.Resource(Object.assign({},a))}};e.processDetector=new u}),bh=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(yh(),e),t(Eh(),e)}),Sh=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(gh(),e),t(_h(),e),t(bh(),e)}),fl=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Sh(),e)}),dl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resource=void 0;var i=di(),t=zr(),n=fl(),u=class{constructor(a){this.attributes=a}static empty(){return u.EMPTY}static default(){return new u({[i.ResourceAttributes.SERVICE_NAME]:n.defaultServiceName(),[i.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:t.SDK_INFO[i.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[i.ResourceAttributes.TELEMETRY_SDK_NAME]:t.SDK_INFO[i.ResourceAttributes.TELEMETRY_SDK_NAME],[i.ResourceAttributes.TELEMETRY_SDK_VERSION]:t.SDK_INFO[i.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(a){if(!a||!Object.keys(a.attributes).length)return this;let o=Object.assign({},this.attributes,a.attributes);return new u(o)}};e.Resource=u,u.EMPTY=new u({})}),Th=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ih=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Na=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(dl(),e),t(fl(),e),t(Th(),e),t(Ih(),e)}),wh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSpanProcessor=void 0;var i=zr(),t=class{constructor(n){this._spanProcessors=n}forceFlush(){let n=[];for(let u of this._spanProcessors)n.push(u.forceFlush());return new Promise(u=>{Promise.all(n).then(()=>{u()}).catch(a=>{i.globalErrorHandler(a||new Error("MultiSpanProcessor: forceFlush failed")),u()})})}onStart(n,u){for(let a of this._spanProcessors)a.onStart(n,u)}onEnd(n){for(let u of this._spanProcessors)u.onEnd(n)}shutdown(){let n=[];for(let u of this._spanProcessors)n.push(u.shutdown());return new Promise((u,a)=>{Promise.all(n).then(()=>{u()},a)})}};e.MultiSpanProcessor=t}),pl=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoopSpanProcessor=void 0;var i=class{onStart(t,n){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};e.NoopSpanProcessor=i}),Ah=x((e,i)=>{var t=200,n="__lodash_hash_undefined__",u=800,a=16,o=9007199254740991,r="[object Arguments]",s="[object Array]",l="[object AsyncFunction]",f="[object Boolean]",c="[object Date]",p="[object Error]",v="[object Function]",m="[object GeneratorFunction]",g="[object Map]",E="[object Number]",T="[object Null]",O="[object Object]",P="[object Proxy]",A="[object RegExp]",M="[object Set]",j="[object String]",G="[object Undefined]",B="[object WeakMap]",Y="[object ArrayBuffer]",ne="[object DataView]",ye="[object Float32Array]",Re="[object Float64Array]",st="[object Int8Array]",ot="[object Int16Array]",Dt="[object Int32Array]",at="[object Uint8Array]",oe="[object Uint8ClampedArray]",ge="[object Uint16Array]",le="[object Uint32Array]",Ue=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,se={};se[ye]=se[Re]=se[st]=se[ot]=se[Dt]=se[at]=se[oe]=se[ge]=se[le]=!0,se[r]=se[s]=se[Y]=se[f]=se[ne]=se[c]=se[p]=se[v]=se[g]=se[E]=se[O]=se[A]=se[M]=se[j]=se[B]=!1;var $e=typeof global=="object"&&global&&global.Object===Object&&global,rt=typeof self=="object"&&self&&self.Object===Object&&self,W=$e||rt||Function("return this")(),ee=typeof e=="object"&&e&&!e.nodeType&&e,re=ee&&typeof i=="object"&&i&&!i.nodeType&&i,ve=re&&re.exports===ee,Ve=ve&&$e.process,Ae=function(){try{var D=re&&re.require&&re.require("util").types;return D||Ve&&Ve.binding&&Ve.binding("util")}catch{}}(),Ne=Ae&&Ae.isTypedArray;function Qe(D,F,z){switch(z.length){case 0:return D.call(F);case 1:return D.call(F,z[0]);case 2:return D.call(F,z[0],z[1]);case 3:return D.call(F,z[0],z[1],z[2])}return D.apply(F,z)}function At(D,F){for(var z=-1,tt=Array(D);++z<D;)tt[z]=F(z);return tt}function gr(D){return function(F){return D(F)}}function dr(D,F){return D?.[F]}function ue(D,F){return function(z){return D(F(z))}}var _r=Array.prototype,tr=Function.prototype,Vt=Object.prototype,Ut=W["__core-js_shared__"],or=tr.toString,rr=Vt.hasOwnProperty,yr=function(){var D=/[^.]+$/.exec(Ut&&Ut.keys&&Ut.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),ie=Vt.toString,K=or.call(Object),xe=RegExp("^"+or.call(rr).replace(Ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=ve?W.Buffer:void 0,ht=W.Symbol,Ke=W.Uint8Array,He=Te?Te.allocUnsafe:void 0,We=ue(Object.getPrototypeOf,Object),St=Object.create,Tt=Vt.propertyIsEnumerable,Oe=_r.splice,Ye=ht?ht.toStringTag:void 0,ae=function(){try{var D=Or(Object,"defineProperty");return D({},"",{}),D}catch{}}(),we=Te?Te.isBuffer:void 0,Le=Math.max,he=Date.now,ut=Or(W,"Map"),qt=Or(Object,"create"),Ze=function(){function D(){}return function(F){if(!fe(F))return{};if(St)return St(F);D.prototype=F;var z=new D;return D.prototype=void 0,z}}();function $t(D){var F=-1,z=D==null?0:D.length;for(this.clear();++F<z;){var tt=D[F];this.set(tt[0],tt[1])}}function pr(){this.__data__=qt?qt(null):{},this.size=0}function Er(D){var F=this.has(D)&&delete this.__data__[D];return this.size-=F?1:0,F}function Me(D){var F=this.__data__;if(qt){var z=F[D];return z===n?void 0:z}return rr.call(F,D)?F[D]:void 0}function je(D){var F=this.__data__;return qt?F[D]!==void 0:rr.call(F,D)}function Se(D,F){var z=this.__data__;return this.size+=this.has(D)?0:1,z[D]=qt&&F===void 0?n:F,this}$t.prototype.clear=pr,$t.prototype.delete=Er,$t.prototype.get=Me,$t.prototype.has=je,$t.prototype.set=Se;function Z(D){var F=-1,z=D==null?0:D.length;for(this.clear();++F<z;){var tt=D[F];this.set(tt[0],tt[1])}}function et(){this.__data__=[],this.size=0}function ze(D){var F=this.__data__,z=Q(F,D);if(z<0)return!1;var tt=F.length-1;return z==tt?F.pop():Oe.call(F,z,1),--this.size,!0}function pe(D){var F=this.__data__,z=Q(F,D);return z<0?void 0:F[z][1]}function vt(D){return Q(this.__data__,D)>-1}function Et(D,F){var z=this.__data__,tt=Q(z,D);return tt<0?(++this.size,z.push([D,F])):z[tt][1]=F,this}Z.prototype.clear=et,Z.prototype.delete=ze,Z.prototype.get=pe,Z.prototype.has=vt,Z.prototype.set=Et;function Pt(D){var F=-1,z=D==null?0:D.length;for(this.clear();++F<z;){var tt=D[F];this.set(tt[0],tt[1])}}function Bt(){this.size=0,this.__data__={hash:new $t,map:new(ut||Z),string:new $t}}function zt(D){var F=br(this,D).delete(D);return this.size-=F?1:0,F}function jt(D){return br(this,D).get(D)}function nt(D){return br(this,D).has(D)}function Ct(D,F){var z=br(this,D),tt=z.size;return z.set(D,F),this.size+=z.size==tt?0:1,this}Pt.prototype.clear=Bt,Pt.prototype.delete=zt,Pt.prototype.get=jt,Pt.prototype.has=nt,Pt.prototype.set=Ct;function ct(D){var F=this.__data__=new Z(D);this.size=F.size}function mt(){this.__data__=new Z,this.size=0}function d(D){var F=this.__data__,z=F.delete(D);return this.size=F.size,z}function _(D){return this.__data__.get(D)}function S(D){return this.__data__.has(D)}function C(D,F){var z=this.__data__;if(z instanceof Z){var tt=z.__data__;if(!ut||tt.length<t-1)return tt.push([D,F]),this.size=++z.size,this;z=this.__data__=new Pt(tt)}return z.set(D,F),this.size=z.size,this}ct.prototype.clear=mt,ct.prototype.delete=d,ct.prototype.get=_,ct.prototype.has=S,ct.prototype.set=C;function R(D,F){var z=gt(D),tt=!z&&It(D),kt=!z&&!tt&&Je(D),Gt=!z&&!tt&&!kt&&pt(D),Kt=z||tt||kt||Gt,Lt=Kt?At(D.length,String):[],Xt=Lt.length;for(var Dr in D)(F||rr.call(D,Dr))&&!(Kt&&(Dr=="length"||kt&&(Dr=="offset"||Dr=="parent")||Gt&&(Dr=="buffer"||Dr=="byteLength"||Dr=="byteOffset")||Fr(Dr,Xt)))&&Lt.push(Dr);return Lt}function k(D,F,z){(z!==void 0&&!Xe(D[F],z)||z===void 0&&!(F in D))&&te(D,F,z)}function L(D,F,z){var tt=D[F];(!(rr.call(D,F)&&Xe(tt,z))||z===void 0&&!(F in D))&&te(D,F,z)}function Q(D,F){for(var z=D.length;z--;)if(Xe(D[z][0],F))return z;return-1}function te(D,F,z){F=="__proto__"&&ae?ae(D,F,{configurable:!0,enumerable:!0,value:z,writable:!0}):D[F]=z}var Fe=Ar();function lt(D){return D==null?D===void 0?G:T:Ye&&Ye in Object(D)?Sr(D):Tr(D)}function qe(D){return Ce(D)&&lt(D)==r}function it(D){if(!fe(D)||Zr(D))return!1;var F=q(D)?xe:X;return F.test(Pe(D))}function dt(D){return Ce(D)&&ce(D.length)&&!!se[lt(D)]}function bt(D){if(!fe(D))return Cr(D);var F=Gr(D),z=[];for(var tt in D)tt=="constructor"&&(F||!rr.call(D,tt))||z.push(tt);return z}function Ft(D,F,z,tt,kt){D!==F&&Fe(F,function(Gt,Kt){if(kt||(kt=new ct),fe(Gt))Lr(D,F,Kt,z,Ft,tt,kt);else{var Lt=tt?tt(H(D,Kt),Gt,Kt+"",D,F,kt):void 0;Lt===void 0&&(Lt=Gt),k(D,Kt,Lt)}},Zt)}function Lr(D,F,z,tt,kt,Gt,Kt){var Lt=H(D,z),Xt=H(F,z),Dr=Kt.get(Xt);if(Dr){k(D,z,Dr);return}var Ir=Gt?Gt(Lt,Xt,z+"",D,F,Kt):void 0,Tn=Ir===void 0;if(Tn){var Rn=gt(Xt),Kn=!Rn&&Je(Xt),Ci=!Rn&&!Kn&&pt(Xt);Ir=Xt,Rn||Kn||Ci?gt(Lt)?Ir=Lt:wt(Lt)?Ir=nr(Lt):Kn?(Tn=!1,Ir=Hr(Xt,!0)):Ci?(Tn=!1,Ir=Qr(Xt,!0)):Ir=[]:ft(Xt)||It(Xt)?(Ir=Lt,It(Lt)?Ir=Wt(Lt):(!fe(Lt)||q(Lt))&&(Ir=Br(Xt))):Tn=!1}Tn&&(Kt.set(Xt,Ir),kt(Ir,Xt,tt,Gt,Kt),Kt.delete(Xt)),k(D,z,Ir)}function cr(D,F){return me(Jr(D,F,an),D+"")}var hr=ae?function(D,F){return ae(D,"toString",{configurable:!0,enumerable:!1,value:Rr(F),writable:!0})}:an;function Hr(D,F){if(F)return D.slice();var z=D.length,tt=He?He(z):new D.constructor(z);return D.copy(tt),tt}function jr(D){var F=new D.constructor(D.byteLength);return new Ke(F).set(new Ke(D)),F}function Qr(D,F){var z=F?jr(D.buffer):D.buffer;return new D.constructor(z,D.byteOffset,D.length)}function nr(D,F){var z=-1,tt=D.length;for(F||(F=Array(tt));++z<tt;)F[z]=D[z];return F}function wr(D,F,z,tt){var kt=!z;z||(z={});for(var Gt=-1,Kt=F.length;++Gt<Kt;){var Lt=F[Gt],Xt=tt?tt(z[Lt],D[Lt],Lt,z,D):void 0;Xt===void 0&&(Xt=D[Lt]),kt?te(z,Lt,Xt):L(z,Lt,Xt)}return z}function qr(D){return cr(function(F,z){var tt=-1,kt=z.length,Gt=kt>1?z[kt-1]:void 0,Kt=kt>2?z[2]:void 0;for(Gt=D.length>3&&typeof Gt=="function"?(kt--,Gt):void 0,Kt&&Yr(z[0],z[1],Kt)&&(Gt=kt<3?void 0:Gt,kt=1),F=Object(F);++tt<kt;){var Lt=z[tt];Lt&&D(F,Lt,tt,Gt)}return F})}function Ar(D){return function(F,z,tt){for(var kt=-1,Gt=Object(F),Kt=tt(F),Lt=Kt.length;Lt--;){var Xt=Kt[D?Lt:++kt];if(z(Gt[Xt],Xt,Gt)===!1)break}return F}}function br(D,F){var z=D.__data__;return Pr(F)?z[typeof F=="string"?"string":"hash"]:z.map}function Or(D,F){var z=dr(D,F);return it(z)?z:void 0}function Sr(D){var F=rr.call(D,Ye),z=D[Ye];try{D[Ye]=void 0;var tt=!0}catch{}var kt=ie.call(D);return tt&&(F?D[Ye]=z:delete D[Ye]),kt}function Br(D){return typeof D.constructor=="function"&&!Gr(D)?Ze(We(D)):{}}function Fr(D,F){var z=typeof D;return F=F??o,!!F&&(z=="number"||z!="symbol"&&Ee.test(D))&&D>-1&&D%1==0&&D<F}function Yr(D,F,z){if(!fe(z))return!1;var tt=typeof F;return(tt=="number"?Ot(z)&&Fr(F,z.length):tt=="string"&&F in z)?Xe(z[F],D):!1}function Pr(D){var F=typeof D;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?D!=="__proto__":D===null}function Zr(D){return!!yr&&yr in D}function Gr(D){var F=D&&D.constructor,z=typeof F=="function"&&F.prototype||Vt;return D===z}function Cr(D){var F=[];if(D!=null)for(var z in Object(D))F.push(z);return F}function Tr(D){return ie.call(D)}function Jr(D,F,z){return F=Le(F===void 0?D.length-1:F,0),function(){for(var tt=arguments,kt=-1,Gt=Le(tt.length-F,0),Kt=Array(Gt);++kt<Gt;)Kt[kt]=tt[F+kt];kt=-1;for(var Lt=Array(F+1);++kt<F;)Lt[kt]=tt[kt];return Lt[F]=z(Kt),Qe(D,this,Lt)}}function H(D,F){if(!(F==="constructor"&&typeof D[F]=="function")&&F!="__proto__")return D[F]}var me=_e(hr);function _e(D){var F=0,z=0;return function(){var tt=he(),kt=a-(tt-z);if(z=tt,kt>0){if(++F>=u)return arguments[0]}else F=0;return D.apply(void 0,arguments)}}function Pe(D){if(D!=null){try{return or.call(D)}catch{}try{return D+""}catch{}}return""}function Xe(D,F){return D===F||D!==D&&F!==F}var It=qe(function(){return arguments}())?qe:function(D){return Ce(D)&&rr.call(D,"callee")&&!Tt.call(D,"callee")},gt=Array.isArray;function Ot(D){return D!=null&&ce(D.length)&&!q(D)}function wt(D){return Ce(D)&&Ot(D)}var Je=we||Wn;function q(D){if(!fe(D))return!1;var F=lt(D);return F==v||F==m||F==l||F==P}function ce(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=o}function fe(D){var F=typeof D;return D!=null&&(F=="object"||F=="function")}function Ce(D){return D!=null&&typeof D=="object"}function ft(D){if(!Ce(D)||lt(D)!=O)return!1;var F=We(D);if(F===null)return!0;var z=rr.call(F,"constructor")&&F.constructor;return typeof z=="function"&&z instanceof z&&or.call(z)==K}var pt=Ne?gr(Ne):dt;function Wt(D){return wr(D,Zt(D))}function Zt(D){return Ot(D)?R(D,!0):bt(D)}var vr=qr(function(D,F,z){Ft(D,F,z)});function Rr(D){return function(){return D}}function an(D){return D}function Wn(){return!1}i.exports=vr}),Oh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessorBase=void 0;var i=Jt(),t=zr(),n=class{constructor(u,a){this._exporter=u,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let o=t.getEnv();this._maxExportBatchSize=typeof a?.maxExportBatchSize=="number"?a.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof a?.maxQueueSize=="number"?a.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof a?.scheduledDelayMillis=="number"?a.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof a?.exportTimeoutMillis=="number"?a.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(u){}onEnd(u){this._isShutdown||this._addToBuffer(u)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((u,a)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(u).catch(o=>{a(o)})}),this._shuttingDownPromise)}_addToBuffer(u){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(u),this._maybeStartTimer())}_flushAll(){return new Promise((u,a)=>{let o=[],r=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,l=r;s<l;s++)o.push(this._flushOneBatch());Promise.all(o).then(()=>{u()}).catch(a)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((u,a)=>{let o=setTimeout(()=>{a(new Error("Timeout"))},this._exportTimeoutMillis);i.context.with(t.suppressTracing(i.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),r=>{var s;clearTimeout(o),r.code===t.ExportResultCode.SUCCESS?u():a((s=r.error)!==null&&s!==void 0?s:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(u=>{t.globalErrorHandler(u)})},this._scheduledDelayMillis),t.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};e.BatchSpanProcessorBase=n}),Ph=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BatchSpanProcessor=void 0;var i=Oh(),t=class extends i.BatchSpanProcessorBase{onShutdown(){}};e.BatchSpanProcessor=t}),Ch=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Ph(),e)}),hl=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Ch(),e)}),Rh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicTracerProvider=e.ForceFlushState=void 0;var i=Jt(),t=zr(),n=Na(),u=vl(),a=ll(),o=wh(),r=pl(),s=Ah(),l=hl(),f;(function(p){p[p.resolved=0]="resolved",p[p.timeout=1]="timeout",p[p.error=2]="error",p[p.unresolved=3]="unresolved"})(f=e.ForceFlushState||(e.ForceFlushState={}));var c=class{constructor(p={}){var v;this._registeredSpanProcessors=[],this._tracers=new Map;let m=s({},a.DEFAULT_CONFIG,p);this.resource=(v=m.resource)!==null&&v!==void 0?v:n.Resource.empty(),this.resource=n.Resource.default().merge(this.resource),this._config=Object.assign({},m,{resource:this.resource});let g=this._buildExporterFromEnv();if(g!==void 0){let E=new l.BatchSpanProcessor(g);this.activeSpanProcessor=E}else this.activeSpanProcessor=new r.NoopSpanProcessor}getTracer(p,v){let m=`${p}@${v||""}`;return this._tracers.has(m)||this._tracers.set(m,new u.Tracer({name:p,version:v},this._config,this)),this._tracers.get(m)}addSpanProcessor(p){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(v=>i.diag.error("Error while trying to shutdown current span processor",v)),this._registeredSpanProcessors.push(p),this.activeSpanProcessor=new o.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(p={}){i.trace.setGlobalTracerProvider(this),p.propagator===void 0&&(p.propagator=this._buildPropagatorFromEnv()),p.contextManager&&i.context.setGlobalContextManager(p.contextManager),p.propagator&&i.propagation.setGlobalPropagator(p.propagator)}forceFlush(){let p=this._config.forceFlushTimeoutMillis,v=this._registeredSpanProcessors.map(m=>new Promise(g=>{let E,T=setTimeout(()=>{g(new Error(`Span processor did not completed within timeout period of ${p} ms`)),E=f.timeout},p);m.forceFlush().then(()=>{clearTimeout(T),E!==f.timeout&&(E=f.resolved,g(E))}).catch(O=>{clearTimeout(T),E=f.error,g(O)})}));return new Promise((m,g)=>{Promise.all(v).then(E=>{let T=E.filter(O=>O!==f.resolved);T.length>0?g(T):m()}).catch(E=>g([E]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(p){var v;return(v=c._registeredPropagators.get(p))===null||v===void 0?void 0:v()}_getSpanExporter(p){var v;return(v=c._registeredExporters.get(p))===null||v===void 0?void 0:v()}_buildPropagatorFromEnv(){let p=Array.from(new Set(t.getEnv().OTEL_PROPAGATORS)),v=p.map(m=>{let g=this._getPropagator(m);return g||i.diag.warn(`Propagator "${m}" requested through environment variable is unavailable.`),g}).reduce((m,g)=>(g&&m.push(g),m),[]);if(v.length!==0)return p.length===1?v[0]:new t.CompositePropagator({propagators:v})}_buildExporterFromEnv(){let p=t.getEnv().OTEL_TRACES_EXPORTER;if(p==="none")return;let v=this._getSpanExporter(p);return v||i.diag.error(`Exporter "${p}" requested through environment variable is unavailable.`),v}};e.BasicTracerProvider=c,c._registeredPropagators=new Map([["tracecontext",()=>new t.HttpTraceContextPropagator],["baggage",()=>new t.HttpBaggagePropagator]]),c._registeredExporters=new Map}),Dh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleSpanExporter=void 0;var i=zr(),t=class{export(n,u){return this._sendSpans(n,u)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(n){return{traceId:n.spanContext().traceId,parentId:n.parentSpanId,name:n.name,id:n.spanContext().spanId,kind:n.kind,timestamp:i.hrTimeToMicroseconds(n.startTime),duration:i.hrTimeToMicroseconds(n.duration),attributes:n.attributes,status:n.status,events:n.events}}_sendSpans(n,u){for(let a of n)console.log(this._exportInfo(a));if(u)return u({code:i.ExportResultCode.SUCCESS})}};e.ConsoleSpanExporter=t}),xh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemorySpanExporter=void 0;var i=zr(),t=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(n,u){if(this._stopped)return u({code:i.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...n),setTimeout(()=>u({code:i.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};e.InMemorySpanExporter=t}),Nh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleSpanProcessor=void 0;var i=Jt(),t=zr(),n=class{constructor(u){this._exporter=u,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(u){}onEnd(u){this._isShutdown||i.context.with(t.suppressTracing(i.context.active()),()=>{this._exporter.export([u],a=>{var o;a.code!==t.ExportResultCode.SUCCESS&&t.globalErrorHandler((o=a.error)!==null&&o!==void 0?o:new Error(`SimpleSpanProcessor: span export failed (status ${a})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((u,a)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(u).catch(o=>{a(o)})}),this._shuttingDownPromise)}};e.SimpleSpanProcessor=n}),kh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Lh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),jh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Fh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vl=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(mh(),e),t(Rh(),e),t(hl(),e),t(Dh(),e),t(xh(),e),t(Nh(),e),t(Mh(),e),t(kh(),e),t(pl(),e),t(cl(),e),t(Lh(),e),t(jh(),e),t(Fh(),e)}),Uh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.azureCoreTracing=e.AzureMonitorSymbol=void 0;var i=ur();e.AzureMonitorSymbol="Azure_Monitor_Tracer";var t=!1,n=function(a){if(t)return a;try{var o=vl(),r=Jt(),s=new o.BasicTracerProvider,l=s.getTracer("applicationinsights tracer"),f=a.setTracer;a.setTracer=function(c){var p=c.startSpan;c.startSpan=function(v,m,g){var E=p.call(this,v,m,g),T=E.end;return E.end=function(){var O=T.apply(this,arguments);return i.channel.publish("azure-coretracing",E),O},E},c[e.AzureMonitorSymbol]=!0,f.call(this,c)},r.trace.getSpan(r.context.active()),a.setTracer(l),t=!0}catch{}return a};e.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:n};function u(){i.channel.registerMonkeyPatch("@azure/core-tracing",e.azureCoreTracing)}e.enable=u}),Hh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.bunyan=void 0;var i=ur(),t=function(u){var a=u.prototype._emit;return u.prototype._emit=function(o,r){var s=a.apply(this,arguments);if(!r){var l=s;l||(l=a.call(this,o,!0)),i.channel.publish("bunyan",{level:o.level,result:l})}return s},u};e.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:t};function n(){i.channel.registerMonkeyPatch("bunyan",e.bunyan)}e.enable=n}),qh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.console=void 0;var i=ur(),t=require("stream"),n=function(a){var o=new t.Writable,r=new t.Writable;o.write=function(m){if(!m)return!0;var g=m.toString();return i.channel.publish("console",{message:g}),!0},r.write=function(m){if(!m)return!0;var g=m.toString();return i.channel.publish("console",{message:g,stderr:!0}),!0};for(var s=new a.Console(o,r),l=["log","info","warn","error","dir","time","timeEnd","trace","assert"],f=function(m){var g=a[m];g&&(a[m]=function(){if(s[m])try{s[m].apply(s,arguments)}catch{}return g.apply(a,arguments)})},c=0,p=l;c<p.length;c++){var v=p[c];f(v)}return a};e.console={versionSpecifier:">= 4.0.0",patch:n};function u(){i.channel.registerMonkeyPatch("console",e.console),require("console")}e.enable=u}),Bh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongoCore=void 0;var i=ur(),t=function(u){var a=u.Server.prototype.connect;return u.Server.prototype.connect=function(){var o=a.apply(this,arguments),r=this.s.pool.write;this.s.pool.write=function(){var l=typeof arguments[1]=="function"?1:2;return typeof arguments[l]=="function"&&(arguments[l]=i.channel.bindToContext(arguments[l])),r.apply(this,arguments)};var s=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=i.channel.bindToContext(arguments[1])),s.apply(this,arguments)},o},u};e.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function n(){i.channel.registerMonkeyPatch("mongodb-core",e.mongoCore)}e.enable=n}),Gh=x(e=>{"use strict";var i=e&&e.__assign||function(){return i=Object.assign||function(s){for(var l,f=1,c=arguments.length;f<c;f++){l=arguments[f];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(s[p]=l[p])}return s},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mongo330=e.mongo3=e.mongo2=void 0;var t=ur(),n=function(s){var l=s.instrument({operationIdGenerator:{next:function(){return t.channel.bindToContext(function(c){return c()})}}}),f={};return l.on("started",function(c){f[c.requestId]||(f[c.requestId]=i(i({},c),{time:new Date}))}),l.on("succeeded",function(c){var p=f[c.requestId];p&&delete f[c.requestId],typeof c.operationId=="function"?c.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!0})}):t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!0})}),l.on("failed",function(c){var p=f[c.requestId];p&&delete f[c.requestId],typeof c.operationId=="function"?c.operationId(function(){return t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!1})}):t.channel.publish("mongodb",{startedData:p,event:c,succeeded:!1})}),s},u=function(s){var l=s.instrument(),f={},c={};return l.on("started",function(p){f[p.requestId]||(c[p.requestId]=t.channel.bindToContext(function(v){return v()}),f[p.requestId]=i(i({},p),{time:new Date}))}),l.on("succeeded",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!0})}),delete c[p.requestId])}),l.on("failed",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!1})}),delete c[p.requestId])}),s},a=function(s){var l=s.Server.prototype.connect;return s.Server.prototype.connect=function(){var f=l.apply(this,arguments),c=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var v=typeof arguments[1]=="function"?1:2;return typeof arguments[v]=="function"&&(arguments[v]=t.channel.bindToContext(arguments[v])),c.apply(this,arguments)};var p=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=t.channel.bindToContext(arguments[1])),p.apply(this,arguments)},f},s},o=function(s){a(s);var l=s.instrument(),f={},c={};return l.on("started",function(p){f[p.requestId]||(c[p.requestId]=t.channel.bindToContext(function(v){return v()}),f[p.requestId]=p)}),l.on("succeeded",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!0})}),delete c[p.requestId])}),l.on("failed",function(p){var v=f[p.requestId];v&&delete f[p.requestId],typeof p=="object"&&typeof c[p.requestId]=="function"&&(c[p.requestId](function(){return t.channel.publish("mongodb",{startedData:v,event:p,succeeded:!1})}),delete c[p.requestId])}),s};e.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:n},e.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:u},e.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:o};function r(){t.channel.registerMonkeyPatch("mongodb",e.mongo2),t.channel.registerMonkeyPatch("mongodb",e.mongo3),t.channel.registerMonkeyPatch("mongodb",e.mongo330)}e.enable=r}),Vh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.mysql=void 0;var i=ur(),t=require("path"),n=function(a,o){var r=function(v,m){return function(g,E){var T=v[g];T&&(v[g]=function(){for(var O=arguments.length-1,P=arguments.length-1;P>=0;--P)if(typeof arguments[P]=="function"){O=P;break}else if(typeof arguments[P]<"u")break;var A=arguments[O],M={result:null,startTime:null,startDate:null};typeof A=="function"&&(E?(M.startTime=process.hrtime(),M.startDate=new Date,arguments[O]=i.channel.bindToContext(E(M,A))):arguments[O]=i.channel.bindToContext(A));var j=T.apply(this,arguments);return M.result=j,j})}},s=function(v,m){return r(v.prototype,m+".prototype")},l=["connect","changeUser","ping","statistics","end"],f=require(t.dirname(o)+"/lib/Connection");l.forEach(function(v){return s(f,"Connection")(v)}),r(f,"Connection")("createQuery",function(v,m){return function(g){var E=process.hrtime(v.startTime),T=E[0]*1e3+E[1]/1e6|0;i.channel.publish("mysql",{query:v.result,callbackArgs:arguments,err:g,duration:T,time:v.startDate}),m.apply(this,arguments)}});var c=["_enqueueCallback"],p=require(t.dirname(o)+"/lib/Pool");return c.forEach(function(v){return s(p,"Pool")(v)}),a};e.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:n};function u(){i.channel.registerMonkeyPatch("mysql",e.mysql)}e.enable=u}),zh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgresPool1=void 0;var i=ur();function t(u){var a=u.prototype.connect;return u.prototype.connect=function(o){return o&&(arguments[0]=i.channel.bindToContext(o)),a.apply(this,arguments)},u}e.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:t};function n(){i.channel.registerMonkeyPatch("pg-pool",e.postgresPool1)}e.enable=n}),$h=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.postgres7=e.postgres6=void 0;var i=ur(),t=require("events");function n(o,r){var s=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(f,c,p){var v={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},m=process.hrtime(),g;function E(T){T&&T[l]&&(T=T[l]);var O=i.channel.bindToContext(function(P,A){var M=process.hrtime(m);if(v.result=A&&{rowCount:A.rowCount,command:A.command},v.error=P,v.duration=Math.ceil(M[0]*1e3+M[1]/1e6),i.channel.publish("postgres",v),P){if(T)return T.apply(this,arguments);g&&g instanceof t.EventEmitter&&g.emit("error",P)}else T&&T.apply(this,arguments)});try{return Object.defineProperty(O,l,{value:T}),O}catch{return T}}try{typeof f=="string"?c instanceof Array?(v.query.preparable={text:f,args:c},p=E(p)):(v.query.text=f,p?p=E(p):c=E(c)):(typeof f.name=="string"?v.query.plan=f.name:f.values instanceof Array?v.query.preparable={text:f.text,args:f.values}:v.query.text=f.text,p?p=E(p):c?c=E(c):f.callback=E(f.callback))}catch{return s.apply(this,arguments)}return arguments[0]=f,arguments[1]=c,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,g=s.apply(this,arguments),g},o}function u(o,r){var s=o.Client.prototype.query,l="__diagnosticOriginalFunc";return o.Client.prototype.query=function(f,c,p){var v=this,m=!!p,g={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},E=process.hrtime(),T;function O(P){P&&P[l]&&(P=P[l]);var A=i.channel.bindToContext(function(M,j){var G=process.hrtime(E);if(g.result=j&&{rowCount:j.rowCount,command:j.command},g.error=M,g.duration=Math.ceil(G[0]*1e3+G[1]/1e6),i.channel.publish("postgres",g),M){if(P)return P.apply(this,arguments);T&&T instanceof t.EventEmitter&&T.emit("error",M)}else P&&P.apply(this,arguments)});try{return Object.defineProperty(A,l,{value:P}),A}catch{return P}}try{typeof f=="string"?c instanceof Array?(g.query.preparable={text:f,args:c},m=typeof p=="function",p=m?O(p):p):(g.query.text=f,p?(m=typeof p=="function",p=m?O(p):p):(m=typeof c=="function",c=m?O(c):c)):(typeof f.name=="string"?g.query.plan=f.name:f.values instanceof Array?g.query.preparable={text:f.text,args:f.values}:g.query.text=f.text,p?(m=typeof p=="function",p=O(p)):c?(m=typeof c=="function",c=m?O(c):c):(m=typeof f.callback=="function",f.callback=m?O(f.callback):f.callback))}catch{return s.apply(this,arguments)}return arguments[0]=f,arguments[1]=c,arguments[2]=p,arguments.length=arguments.length>3?arguments.length:3,T=s.apply(this,arguments),m?T:T.then(function(P){return O()(void 0,P),new v._Promise(function(A,M){A(P)})}).catch(function(P){return O()(P,void 0),new v._Promise(function(A,M){M(P)})})},o}e.postgres6={versionSpecifier:"6.*",patch:n},e.postgres7={versionSpecifier:">=7.* <=8.*",patch:u};function a(){i.channel.registerMonkeyPatch("pg",e.postgres6),i.channel.registerMonkeyPatch("pg",e.postgres7)}e.enable=a}),Wh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.redis=void 0;var i=ur(),t=function(u){var a=u.RedisClient.prototype.internal_send_command;return u.RedisClient.prototype.internal_send_command=function(o){if(o){var r=o.callback;if(!r||!r.pubsubBound){var s=this.address,l=process.hrtime(),f=new Date;o.callback=i.channel.bindToContext(function(c,p){var v=process.hrtime(l),m=v[0]*1e3+v[1]/1e6|0;i.channel.publish("redis",{duration:m,address:s,commandObj:o,err:c,result:p,time:f}),typeof r=="function"&&r.apply(this,arguments)}),o.callback.pubsubBound=!0}}return a.call(this,o)},u};e.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:t};function n(){i.channel.registerMonkeyPatch("redis",e.redis)}e.enable=n}),Kh=x(e=>{"use strict";var i=e&&e.__assign||function(){return i=Object.assign||function(a){for(var o,r=1,s=arguments.length;r<s;r++){o=arguments[r];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=void 0;var t=ur(),n=function(a){var o=a.Connection.prototype.makeRequest;return a.Connection.prototype.makeRequest=function(){function r(l){var f=process.hrtime(),c={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return t.channel.bindToContext(function(p,v,m){var g=process.hrtime(f);c=i(i({},c),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!p&&{rowCount:v,rows:m},query:{text:this.parametersByName.statement.value},error:p,duration:Math.ceil(g[0]*1e3+g[1]/1e6)}),t.channel.publish("tedious",c),l.call(this,p,v,m)})}var s=arguments[0];arguments[0].callback=r(s.callback),o.apply(this,arguments)},a};e.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:n};function u(){t.channel.registerMonkeyPatch("tedious",e.tedious)}e.enable=u}),Xh=x(e=>{"use strict";var i=e&&e.__extends||function(){var r=function(s,l){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(f[p]=c[p])},r(s,l)};return function(s,l){r(s,l);function f(){this.constructor=s}s.prototype=l===null?Object.create(l):(f.prototype=l.prototype,new f)}}(),t=e&&e.__rest||function(r,s){var l={};for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&s.indexOf(f)<0&&(l[f]=r[f]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,f=Object.getOwnPropertySymbols(r);c<f.length;c++)s.indexOf(f[c])<0&&Object.prototype.propertyIsEnumerable.call(r,f[c])&&(l[f[c]]=r[f[c]]);return l};Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.winston2=e.winston3=void 0;var n=ur(),u=function(r){var s=r.Logger.prototype.log,l,f=function(c,p,v){var m;return l===r.config.npm.levels?m="npm":l===r.config.syslog.levels?m="syslog":m="unknown",n.channel.publish("winston",{level:c,message:p,meta:v,levelKind:m}),p};return r.Logger.prototype.log=function(){return l=this.levels,!this.filters||this.filters.length===0?this.filters=[f]:this.filters[this.filters.length-1]!==f&&(this.filters=this.filters.filter(function(c){return c!==f}),this.filters.push(f)),s.apply(this,arguments)},r},a=function(r){var s=function(v,m){var g;return v.config.npm.levels[m]!=null?g="npm":v.config.syslog.levels[m]!=null?g="syslog":g="unknown",g},l=function(v){i(m,v);function m(g,E){var T=v.call(this,E)||this;return T.winston=g,T}return m.prototype.log=function(g,E){var T=g.message,O=g.level,P=g.meta,A=t(g,["message","level","meta"]);O=typeof Symbol.for=="function"?g[Symbol.for("level")]:O,T=g instanceof Error?g:T;var M=s(this.winston,O);P=P||{};for(var j in A)A.hasOwnProperty(j)&&(P[j]=A[j]);n.channel.publish("winston",{message:T,level:O,levelKind:M,meta:P}),E()},m}(r.Transport);function f(){var v=arguments[0].levels||r.config.npm.levels,m;for(var g in v)v.hasOwnProperty(g)&&(m=m===void 0||v[g]>v[m]?g:m);this.add(new l(r,{level:m}))}var c=r.createLogger;r.createLogger=function(){var v=arguments[0].levels||r.config.npm.levels,m;for(var g in v)v.hasOwnProperty(g)&&(m=m===void 0||v[g]>v[m]?g:m);var E=c.apply(this,arguments);E.add(new l(r,{level:m}));var T=E.configure;return E.configure=function(){T.apply(this,arguments),f.apply(this,arguments)},E};var p=r.configure;return r.configure=function(){p.apply(this,arguments),f.apply(this,arguments)},r.add(new l(r)),r};e.winston3={versionSpecifier:"3.x",patch:a},e.winston2={versionSpecifier:"2.x",patch:u};function o(){n.channel.registerMonkeyPatch("winston",e.winston2),n.channel.registerMonkeyPatch("winston",e.winston3)}e.enable=o}),Qh=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.tedious=e.pgPool=e.pg=e.winston=e.redis=e.mysql=e.mongodb=e.mongodbCore=e.console=e.bunyan=e.azuresdk=void 0;var i=Uh();e.azuresdk=i;var t=Hh();e.bunyan=t;var n=qh();e.console=n;var u=Bh();e.mongodbCore=u;var a=Gh();e.mongodb=a;var o=Vh();e.mysql=o;var r=zh();e.pgPool=r;var s=$h();e.pg=s;var l=Wh();e.redis=l;var f=Kh();e.tedious=f;var c=Xh();e.winston=c;function p(){t.enable(),n.enable(),u.enable(),a.enable(),o.enable(),s.enable(),r.enable(),l.enable(),c.enable(),i.enable(),f.enable()}e.enable=p}),Ma=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerContextPreservation=e.IsInitialized=void 0;var i=Gc(),t=mr();e.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var n="DiagnosticChannel";if(e.IsInitialized){u=Qh(),a=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",o=a.split(","),r={bunyan:u.bunyan,console:u.console,mongodb:u.mongodb,mongodbCore:u.mongodbCore,mysql:u.mysql,redis:u.redis,pg:u.pg,pgPool:u.pgPool,winston:u.winston,azuresdk:u.azuresdk};for(s in r)o.indexOf(s)===-1&&(r[s].enable(),t.info(n,"Subscribed to "+s+" events"));o.length>0&&t.info(n,"Some modules will not be patched",o)}else t.info(n,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var u,a,o,r,s;function l(f){if(e.IsInitialized){var c=ur();c.channel.addContextPreservation(f),c.channel.spanContextPropagator=i.AsyncScopeManager}}e.registerContextPreservation=l}),pi=x((e,i)=>{"use strict";i.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}}),Ur=x((e,i)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(f){for(var c,p=1,v=arguments.length;p<v;p++){c=arguments[p];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(f[m]=c[m])}return f},t.apply(this,arguments)},n=require("http"),u=require("https"),a=require("url"),o=require("constants"),r=mr(),s=pi(),l=function(){function f(){}return f.getCookie=function(c,p){var v="";if(c&&c.length&&typeof p=="string")for(var m=c+"=",g=p.split(";"),E=0;E<g.length;E++){var p=g[E];if(p=f.trim(p),p&&p.indexOf(m)===0){v=p.substring(m.length,g[E].length);break}}return v},f.trim=function(c){return typeof c=="string"?c.replace(/^\s+|\s+$/g,""):""},f.int32ArrayToBase64=function(c){var p=function(T,O){return String.fromCharCode(T>>O&255)},v=function(T){return p(T,24)+p(T,16)+p(T,8)+p(T,0)},m=c.map(v).join(""),g=Buffer.from?Buffer.from(m,"binary"):new Buffer(m,"binary"),E=g.toString("base64");return E.substr(0,E.indexOf("="))},f.random32=function(){return 4294967296*Math.random()|0},f.randomu32=function(){return f.random32()+2147483648},f.w3cTraceId=function(){for(var c=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],p="",v,m=0;m<4;m++)v=f.random32(),p+=c[v&15]+c[v>>4&15]+c[v>>8&15]+c[v>>12&15]+c[v>>16&15]+c[v>>20&15]+c[v>>24&15]+c[v>>28&15];var g=c[8+Math.random()*4|0];return p.substr(0,8)+p.substr(9,4)+"4"+p.substr(13,3)+g+p.substr(16,3)+p.substr(19,12)},f.w3cSpanId=function(){return f.w3cTraceId().substring(16)},f.isValidW3CId=function(c){return c.length===32&&c!=="00000000000000000000000000000000"},f.isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"},f.isError=function(c){return c instanceof Error},f.isPrimitive=function(c){var p=typeof c;return p==="string"||p==="number"||p==="boolean"},f.isDate=function(c){return Object.prototype.toString.call(c)==="[object Date]"},f.msToTimeSpan=function(c){(isNaN(c)||c<0)&&(c=0);var p=(c/1e3%60).toFixed(7).replace(/0{0,4}$/,""),v=""+Math.floor(c/(1e3*60))%60,m=""+Math.floor(c/(1e3*60*60))%24,g=Math.floor(c/(1e3*60*60*24));p=p.indexOf(".")<2?"0"+p:p,v=v.length<2?"0"+v:v,m=m.length<2?"0"+m:m;var E=g>0?g+".":"";return E+m+":"+v+":"+p},f.extractError=function(c){var p=c;return{message:c.message,code:p.code||p.id||""}},f.extractObject=function(c){return c instanceof Error?f.extractError(c):typeof c.toJSON=="function"?c.toJSON():c},f.validateStringMap=function(c){if(typeof c!="object"){r.info("Invalid properties dropped from payload");return}var p={};for(var v in c){var m="",g=c[v],E=typeof g;if(f.isPrimitive(g))m=g.toString();else if(g===null||E==="undefined")m="";else if(E==="function"){r.info("key: "+v+" was function; will not serialize");continue}else{var T=f.isArray(g)?g:f.extractObject(g);try{f.isPrimitive(T)?m=T:m=JSON.stringify(T)}catch(O){m=g.constructor.name.toString()+" (Error: "+O.message+")",r.info("key: "+v+", could not be serialized")}}p[v]=m.substring(0,f.MAX_PROPERTY_LENGTH)}return p},f.canIncludeCorrelationHeader=function(c,p){var v=c&&c.config&&c.config.correlationHeaderExcludedDomains;if(!v||v.length==0||!p)return!0;for(var m=0;m<v.length;m++){var g=new RegExp(v[m].replace(/\./g,".").replace(/\*/g,".*"));if(g.test(a.parse(p).hostname))return!1}return!0},f.getCorrelationContextTarget=function(c,p){var v=c.headers&&c.headers[s.requestContextHeader];if(v)for(var m=v.split(","),g=0;g<m.length;++g){var E=m[g].split("=");if(E.length==2&&E[0]==p)return E[1]}},f.makeRequest=function(c,p,v,m){p&&p.indexOf("//")===0&&(p="https:"+p);var g=a.parse(p),E=t(t({},v),{host:g.hostname,port:g.port,path:g.pathname}),T=void 0;if(g.protocol==="https:"&&(T=c.proxyHttpsUrl||void 0),g.protocol==="http:"&&(T=c.proxyHttpUrl||void 0),T){T.indexOf("//")===0&&(T="http:"+T);var O=a.parse(T);O.protocol==="https:"?(r.info("Proxies that use HTTPS are not supported"),T=void 0):E=t(t({},E),{host:O.hostname,port:O.port||"80",path:p,headers:t(t({},E.headers),{Host:g.hostname})})}var P=g.protocol==="https:"&&!T;return P&&c.httpsAgent!==void 0?E.agent=c.httpsAgent:!P&&c.httpAgent!==void 0?E.agent=c.httpAgent:P&&(E.agent=f.tlsRestrictedAgent),P?u.request(E,m):n.request(E,m)},f.safeIncludeCorrelationHeader=function(c,p,v){var m;if(typeof v=="string")m=v;else if(v instanceof Array)m=v.join(",");else if(v&&typeof v.toString=="function")try{m=v.toString()}catch(g){r.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",g,v)}m?f.addCorrelationIdHeaderFromString(c,p,m):p.setHeader(s.requestContextHeader,s.requestContextSourceKey+"="+c.config.correlationId)},f.dumpObj=function(c){var p=Object.prototype.toString.call(c),v="";return p==="[object Error]"?v="{ stack: '"+c.stack+"', message: '"+c.message+"', name: '"+c.name+"'":v=JSON.stringify(c),p+v},f.addCorrelationIdHeaderFromString=function(c,p,v){var m=v.split(","),g=s.requestContextSourceKey+"=",E=m.some(function(T){return T.substring(0,g.length)===g});E||p.setHeader(s.requestContextHeader,v+","+s.requestContextSourceKey+"="+c.config.correlationId)},f.MAX_PROPERTY_LENGTH=8192,f.tlsRestrictedAgent=new u.Agent({keepAlive:!0,maxSockets:25,secureOptions:o.SSL_OP_NO_SSLv2|o.SSL_OP_NO_SSLv3|o.SSL_OP_NO_TLSv1|o.SSL_OP_NO_TLSv1_1}),f}();i.exports=l}),Hn=x((e,i)=>{"use strict";var t=Ur(),n=mr(),u=function(){function a(){}return a.queryCorrelationId=function(o,r){var s=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId";if(a.completedLookups.hasOwnProperty(s)){r(a.completedLookups[s]);return}else if(a.pendingLookups[s]){a.pendingLookups[s].push(r);return}a.pendingLookups[s]=[r];var l=function(){if(a.pendingLookups[s]){var f={method:"GET",disableAppInsightsAutoCollection:!0};n.info(a.TAG,f);var c=t.makeRequest(o,s,f,function(p){if(p.statusCode===200){var v="";p.setEncoding("utf-8"),p.on("data",function(m){v+=m}),p.on("end",function(){n.info(a.TAG,v);var m=a.correlationIdPrefix+v;a.completedLookups[s]=m,a.pendingLookups[s]&&a.pendingLookups[s].forEach(function(g){return g(m)}),delete a.pendingLookups[s]})}else p.statusCode>=400&&p.statusCode<500?(a.completedLookups[s]=void 0,delete a.pendingLookups[s]):setTimeout(l,o.correlationIdRetryIntervalMs)});c&&(c.on("error",function(p){n.warn(a.TAG,p)}),c.end())}};setTimeout(l,0)},a.cancelCorrelationIdQuery=function(o,r){var s=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId",l=a.pendingLookups[s];l&&(a.pendingLookups[s]=l.filter(function(f){return f!=r}),a.pendingLookups[s].length==0&&delete a.pendingLookups[s])},a.generateRequestId=function(o){if(o){o=o[0]=="|"?o:"|"+o,o[o.length-1]!=="."&&(o+=".");var r=(a.currentRootId++).toString(16);return a.appendSuffix(o,r,"_")}else return a.generateRootId()},a.getRootId=function(o){var r=o.indexOf(".");r<0&&(r=o.length);var s=o[0]==="|"?1:0;return o.substring(s,r)},a.generateRootId=function(){return"|"+t.w3cTraceId()+"."},a.appendSuffix=function(o,r,s){if(o.length+r.length<a.requestIdMaxLength)return o+r+s;var l=a.requestIdMaxLength-9;if(o.length>l)for(;l>1;--l){var f=o[l-1];if(f==="."||f==="_")break}if(l<=1)return a.generateRootId();for(r=t.randomu32().toString(16);r.length<8;)r="0"+r;return o.substring(0,l)+r+"#"},a.TAG="CorrelationIdManager",a.correlationIdPrefix="cid-v1:",a.w3cEnabled=!0,a.pendingLookups={},a.completedLookups={},a.requestIdMaxLength=1024,a.currentRootId=t.randomu32(),a}();i.exports=u}),ro=x((e,i)=>{"use strict";var t=Ur(),n=Hn(),u=function(){function a(o,r){if(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.version=a.DEFAULT_VERSION,o&&typeof o=="string")if(o.split(",").length>1)this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16);else{var s=o.trim().split("-"),l=s.length;l>=4?(this.version=s[0],this.traceId=s[1],this.spanId=s[2],this.traceFlag=s[3]):(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=a.DEFAULT_VERSION,this.traceId=t.w3cTraceId()),this.version==="00"&&l!==4&&(this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=a.DEFAULT_VERSION,this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=a.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=a.DEFAULT_TRACE_FLAG,this.traceId=t.w3cTraceId()),a.isValidTraceId(this.traceId)||(this.traceId=t.w3cTraceId()),a.isValidSpanId(this.spanId)||(this.spanId=t.w3cTraceId().substr(0,16),this.traceId=t.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var f=n.getRootId(r);a.isValidTraceId(f)||(this.legacyRootId=f,f=t.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=f,this.spanId=r}else this.traceId=t.w3cTraceId(),this.spanId=t.w3cTraceId().substr(0,16)}return a.isValidTraceId=function(o){return o.match(/^[0-9a-f]{32}$/)&&o!=="00000000000000000000000000000000"},a.isValidSpanId=function(o){return o.match(/^[0-9a-f]{16}$/)&&o!=="0000000000000000"},a.formatOpenTelemetryTraceFlags=function(o){var r="0"+o.toString(16);return r.substring(r.length-2)},a.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},a.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},a.prototype.updateSpanId=function(){this.spanId=t.w3cTraceId().substr(0,16)},a.DEFAULT_TRACE_FLAG="01",a.DEFAULT_VERSION="00",a}();i.exports=u}),ml=x((e,i)=>{"use strict";var t=function(){function n(u){this.fieldmap=[],u&&(this.fieldmap=this.parseHeader(u))}return n.prototype.toString=function(){var u=this.fieldmap;return!u||u.length==0?null:u.join(", ")},n.validateKeyChars=function(u){var a=u.split("@");if(a.length==2){var o=a[0].trim(),r=a[1].trim(),s=Boolean(o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return s&&l}else if(a.length==1)return Boolean(u.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},n.prototype.parseHeader=function(u){var a=[],o={},r=u.split(",");if(r.length>32)return null;for(var s=0,l=r;s<l.length;s++){var f=l[s],c=f.trim();if(c.length!==0){var p=c.split("=");if(p.length!==2||!n.validateKeyChars(p[0])||o[p[0]])return null;o[p[0]]=!0,a.push(c)}}return a},n.strict=!0,n}();i.exports=t}),vn=x((e,i)=>{"use strict";var t=function(){function n(){}return n}();i.exports=t}),Yh=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=vn(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return o}(n);i.exports=u}),gl=x((e,i)=>{"use strict";var t=function(){function n(){}return n}();i.exports=t}),Zh=x((e,i)=>{"use strict";var t=function(){function n(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return n}();i.exports=t}),Jh=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=gl(),u=function(a){t(o,a);function o(){return a.call(this)||this}return o}(n);i.exports=u}),_l=x((e,i)=>{"use strict";var t;(function(n){n[n.Measurement=0]="Measurement",n[n.Aggregation=1]="Aggregation"})(t||(t={})),i.exports=t}),ev=x((e,i)=>{"use strict";var t=_l(),n=function(){function u(){this.kind=t.Measurement}return u}();i.exports=n}),tv=x((e,i)=>{"use strict";var t=function(){function n(){this.ver=1,this.sampleRate=100,this.tags={}}return n}();i.exports=t}),yl=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=vn(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return o}(n);i.exports=u}),rv=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=vn(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return o}(n);i.exports=u}),nv=x((e,i)=>{"use strict";var t=function(){function n(){this.hasFullStack=!0,this.parsedStack=[]}return n}();i.exports=t}),iv=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=vn(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.properties={},r}return o}(n);i.exports=u}),ov=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=vn(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return o}(n);i.exports=u}),av=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=yl(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return o}(n);i.exports=u}),sv=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=vn(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return o}(n);i.exports=u}),uv=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var a=function(o,r){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var f in l)Object.prototype.hasOwnProperty.call(l,f)&&(s[f]=l[f])},a(o,r)};return function(o,r){a(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),n=vn(),u=function(a){t(o,a);function o(){var r=a.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return o}(n);i.exports=u}),cv=x((e,i)=>{"use strict";var t;(function(n){n[n.Verbose=0]="Verbose",n[n.Information=1]="Information",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.Critical=4]="Critical"})(t||(t={})),i.exports=t}),lv=x((e,i)=>{"use strict";var t=function(){function n(){}return n}();i.exports=t}),El=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AvailabilityData=Yh(),e.Base=gl(),e.ContextTagKeys=Zh(),e.Data=Jh(),e.DataPoint=ev(),e.DataPointType=_l(),e.Domain=vn(),e.Envelope=tv(),e.EventData=yl(),e.ExceptionData=rv(),e.ExceptionDetails=nv(),e.MessageData=iv(),e.MetricData=ov(),e.PageViewData=av(),e.RemoteDependencyData=sv(),e.RequestData=uv(),e.SeverityLevel=cv(),e.StackFrame=lv()}),fv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domainSupportsProperties=e.RemoteDependencyDataConstants=void 0;var i=El(),t=function(){function u(){}return u.TYPE_HTTP="Http",u.TYPE_AI="Http (tracked component)",u}();e.RemoteDependencyDataConstants=t;function n(u){return"properties"in u||u instanceof i.EventData||u instanceof i.ExceptionData||u instanceof i.MessageData||u instanceof i.MetricData||u instanceof i.PageViewData||u instanceof i.RemoteDependencyData||u instanceof i.RequestData}e.domainSupportsProperties=n}),dv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),pv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),hv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),vv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),mv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),gv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),_v=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),yv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ev=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),bv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Sv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Tv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Iv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryType=e.TelemetryTypeString=e.baseTypeToTelemetryType=e.telemetryTypeToBaseType=void 0;function i(u){switch(u){case n.Event:return"EventData";case n.Exception:return"ExceptionData";case n.Trace:return"MessageData";case n.Metric:return"MetricData";case n.Request:return"RequestData";case n.Dependency:return"RemoteDependencyData";case n.Availability:return"AvailabilityData";case n.PageView:return"PageViewData"}}e.telemetryTypeToBaseType=i;function t(u){switch(u){case"EventData":return n.Event;case"ExceptionData":return n.Exception;case"MessageData":return n.Trace;case"MetricData":return n.Metric;case"RequestData":return n.Request;case"RemoteDependencyData":return n.Dependency;case"AvailabilityData":return n.Availability;case"PageViewData":return n.PageView}}e.baseTypeToTelemetryType=t,e.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var n;(function(u){u[u.Event=0]="Event",u[u.Exception=1]="Exception",u[u.Trace=2]="Trace",u[u.Metric=3]="Metric",u[u.Request=4]="Request",u[u.Dependency=5]="Dependency",u[u.Availability=6]="Availability",u[u.PageView=7]="PageView"})(n=e.TelemetryType||(e.TelemetryType={}))}),wv=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(dv(),e),t(pv(),e),t(hv(),e),t(vv(),e),t(mv(),e),t(gv(),e),t(_v(),e),t(yv(),e),t(Ev(),e),t(bv(),e),t(Sv(),e),t(Tv(),e),t(Iv(),e)}),Av=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Ov=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Pv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Rv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Dv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),xv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Nv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Mv=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(Av(),e),t(Ov(),e),t(Pv(),e),t(Cv(),e),t(Rv(),e),t(Dv(),e),t(xv(),e),t(Nv(),e)}),Mr=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(fv(),e),t(El(),e),t(wv(),e),t(Mv(),e)}),bl=x((e,i)=>{"use strict";var t=function(){function n(){}return n.prototype.getUrl=function(){return this.url},n.prototype.RequestParser=function(){this.startTime=+new Date},n.prototype._setStatus=function(u,a){var o=+new Date;this.duration=o-this.startTime,this.statusCode=u;var r=this.properties||{};if(a){if(typeof a=="string")r.error=a;else if(a instanceof Error)r.error=a.message;else if(typeof a=="object")for(var s in a)r[s]=a[s]&&a[s].toString&&a[s].toString()}this.properties=r},n.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},n}();i.exports=t}),Sl=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var p=function(v,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,E){g.__proto__=E}||function(g,E){for(var T in E)Object.prototype.hasOwnProperty.call(E,T)&&(g[T]=E[T])},p(v,m)};return function(v,m){p(v,m);function g(){this.constructor=v}v.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),n=require("url"),u=Mr(),a=Ur(),o=pi(),r=bl(),s=Hn(),l=ml(),f=ro(),c=function(p){t(v,p);function v(m,g){var E=p.call(this)||this;return m&&(E.method=m.method,E.url=E._getAbsoluteUrl(m),E.startTime=+new Date,E.socketRemoteAddress=m.socket&&m.socket.remoteAddress,E.parseHeaders(m,g),m.connection&&(E.connectionRemoteAddress=m.connection.remoteAddress,E.legacySocketRemoteAddress=m.connection.socket&&m.connection.socket.remoteAddress)),E}return v.prototype.onError=function(m,g){this._setStatus(void 0,m),g&&(this.duration=g)},v.prototype.onResponse=function(m,g){this._setStatus(m.statusCode,void 0),g&&(this.duration=g)},v.prototype.getRequestTelemetry=function(m){var g={id:this.requestId,name:this.method+" "+n.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(m&&m.time?g.time=m.time:this.startTime&&(g.time=new Date(this.startTime)),m){for(var E in m)g[E]||(g[E]=m[E]);if(m.properties)for(var E in m.properties)g.properties[E]=m.properties[E]}return g},v.prototype.getRequestTags=function(m){var g={};for(var E in m)g[E]=m[E];return g[v.keys.locationIp]=m[v.keys.locationIp]||this._getIp(),g[v.keys.sessionId]=m[v.keys.sessionId]||this._getId("ai_session"),g[v.keys.userId]=m[v.keys.userId]||this._getId("ai_user"),g[v.keys.userAuthUserId]=m[v.keys.userAuthUserId]||this._getId("ai_authUser"),g[v.keys.operationName]=this.getOperationName(m),g[v.keys.operationParentId]=this.getOperationParentId(m),g[v.keys.operationId]=this.getOperationId(m),g},v.prototype.getOperationId=function(m){return m[v.keys.operationId]||this.operationId},v.prototype.getOperationParentId=function(m){return m[v.keys.operationParentId]||this.parentId||this.getOperationId(m)},v.prototype.getOperationName=function(m){return m[v.keys.operationName]||this.method+" "+n.parse(this.url).pathname},v.prototype.getRequestId=function(){return this.requestId},v.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},v.prototype.getTraceparent=function(){return this.traceparent},v.prototype.getTracestate=function(){return this.tracestate},v.prototype.getLegacyRootId=function(){return this.legacyRootId},v.prototype._getAbsoluteUrl=function(m){if(!m.headers)return m.url;var g=m.connection?m.connection.encrypted:null,E=n.parse(m.url),T=E.pathname,O=E.search,P=g||m.headers["x-forwarded-proto"]=="https"?"https":"http",A=n.format({protocol:P,host:m.headers.host,pathname:T,search:O});return A},v.prototype._getIp=function(){var m=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,g=function(T){var O=m.exec(T);if(O)return O[0]},E=g(this.rawHeaders["x-forwarded-for"])||g(this.rawHeaders["x-client-ip"])||g(this.rawHeaders["x-real-ip"])||g(this.connectionRemoteAddress)||g(this.socketRemoteAddress)||g(this.legacySocketRemoteAddress);return!E&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(E="127.0.0.1"),E},v.prototype._getId=function(m){var g=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",E=v.parseId(a.getCookie(m,g));return E},v.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},v.prototype.parseHeaders=function(m,g){if(this.rawHeaders=m.headers||m.rawHeaders,this.userAgent=m.headers&&m.headers["user-agent"],this.sourceCorrelationId=a.getCorrelationContextTarget(m,o.requestContextSourceKey),m.headers){var E=m.headers[o.traceStateHeader]?m.headers[o.traceStateHeader].toString():null,T=m.headers[o.traceparentHeader]?m.headers[o.traceparentHeader].toString():null,O=m.headers[o.requestIdHeader]?m.headers[o.requestIdHeader].toString():null,P=m.headers[o.parentIdHeader]?m.headers[o.parentIdHeader].toString():null,A=m.headers[o.rootIdHeader]?m.headers[o.rootIdHeader].toString():null;this.correlationContextHeader=m.headers[o.correlationContextHeader]?m.headers[o.correlationContextHeader].toString():null,s.w3cEnabled&&(T||E)?(this.traceparent=new f(T?T.toString():null),this.tracestate=T&&E&&new l(E?E.toString():null),this.setBackCompatFromThisTraceContext()):O?s.w3cEnabled?(this.traceparent=new f(null,O),this.setBackCompatFromThisTraceContext()):(this.parentId=O,this.requestId=s.generateRequestId(this.parentId),this.operationId=s.getRootId(this.requestId)):s.w3cEnabled?(this.traceparent=new f,this.traceparent.parentId=P,this.traceparent.legacyRootId=A||P,this.setBackCompatFromThisTraceContext()):(this.parentId=P,this.requestId=s.generateRequestId(A||this.parentId),this.correlationContextHeader=null,this.operationId=s.getRootId(this.requestId)),g&&(this.requestId=g,this.operationId=s.getRootId(this.requestId))}},v.parseId=function(m){var g=m.split("|");return g.length>0?g[0]:""},v.keys=new u.ContextTagKeys,v}(r);i.exports=c}),kv=x((e,i)=>{e=i.exports=ue;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,u=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],r=e.src=[],s=0,l=s++;r[l]="0|[1-9]\\d*";var f=s++;r[f]="[0-9]+";var c=s++;r[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=s++;r[p]="("+r[l]+")\\.("+r[l]+")\\.("+r[l]+")";var v=s++;r[v]="("+r[f]+")\\.("+r[f]+")\\.("+r[f]+")";var m=s++;r[m]="(?:"+r[l]+"|"+r[c]+")";var g=s++;r[g]="(?:"+r[f]+"|"+r[c]+")";var E=s++;r[E]="(?:-("+r[m]+"(?:\\."+r[m]+")*))";var T=s++;r[T]="(?:-?("+r[g]+"(?:\\."+r[g]+")*))";var O=s++;r[O]="[0-9A-Za-z-]+";var P=s++;r[P]="(?:\\+("+r[O]+"(?:\\."+r[O]+")*))";var A=s++,M="v?"+r[p]+r[E]+"?"+r[P]+"?";r[A]="^"+M+"$";var j="[v=\\s]*"+r[v]+r[T]+"?"+r[P]+"?",G=s++;r[G]="^"+j+"$";var B=s++;r[B]="((?:<|>)?=?)";var Y=s++;r[Y]=r[f]+"|x|X|\\*";var ne=s++;r[ne]=r[l]+"|x|X|\\*";var ye=s++;r[ye]="[v=\\s]*("+r[ne]+")(?:\\.("+r[ne]+")(?:\\.("+r[ne]+")(?:"+r[E]+")?"+r[P]+"?)?)?";var Re=s++;r[Re]="[v=\\s]*("+r[Y]+")(?:\\.("+r[Y]+")(?:\\.("+r[Y]+")(?:"+r[T]+")?"+r[P]+"?)?)?";var st=s++;r[st]="^"+r[B]+"\\s*"+r[ye]+"$";var ot=s++;r[ot]="^"+r[B]+"\\s*"+r[Re]+"$";var Dt=s++;r[Dt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=s++;r[at]="(?:~>?)";var oe=s++;r[oe]="(\\s*)"+r[at]+"\\s+",o[oe]=new RegExp(r[oe],"g");var ge="$1~",le=s++;r[le]="^"+r[at]+r[ye]+"$";var Ue=s++;r[Ue]="^"+r[at]+r[Re]+"$";var X=s++;r[X]="(?:\\^)";var Ee=s++;r[Ee]="(\\s*)"+r[X]+"\\s+",o[Ee]=new RegExp(r[Ee],"g");var se="$1^",$e=s++;r[$e]="^"+r[X]+r[ye]+"$";var rt=s++;r[rt]="^"+r[X]+r[Re]+"$";var W=s++;r[W]="^"+r[B]+"\\s*("+j+")$|^$";var ee=s++;r[ee]="^"+r[B]+"\\s*("+M+")$|^$";var re=s++;r[re]="(\\s*)"+r[B]+"\\s*("+j+"|"+r[ye]+")",o[re]=new RegExp(r[re],"g");var ve="$1$2$3",Ve=s++;r[Ve]="^\\s*("+r[ye]+")\\s+-\\s+("+r[ye]+")\\s*$";var Ae=s++;r[Ae]="^\\s*("+r[Re]+")\\s+-\\s+("+r[Re]+")\\s*$";var Ne=s++;for(r[Ne]="(<|>)?=?\\s*\\*",Qe=0;Qe<s;Qe++)t(Qe,r[Qe]),o[Qe]||(o[Qe]=new RegExp(r[Qe]));var Qe;e.parse=At;function At(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue)return d;if(typeof d!="string"||d.length>n)return null;var S=_.loose?o[G]:o[A];if(!S.test(d))return null;try{return new ue(d,_)}catch{return null}}e.valid=gr;function gr(d,_){var S=At(d,_);return S?S.version:null}e.clean=dr;function dr(d,_){var S=At(d.trim().replace(/^[=v]+/,""),_);return S?S.version:null}e.SemVer=ue;function ue(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof ue))return new ue(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var S=d.trim().match(_.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var R=+C;if(R>=0&&R<u)return R}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ue.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ue.prototype.toString=function(){return this.version},ue.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof ue||(d=new ue(d,this.options)),this.compareMain(d)||this.comparePre(d)},ue.prototype.compareMain=function(d){return d instanceof ue||(d=new ue(d,this.options)),Ut(this.major,d.major)||Ut(this.minor,d.minor)||Ut(this.patch,d.patch)},ue.prototype.comparePre=function(d){if(d instanceof ue||(d=new ue(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var S=this.prerelease[_],C=d.prerelease[_];if(t("prerelease compare",_,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ut(S,C)}while(++_)},ue.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=_r;function _r(d,_,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ue(d,S).inc(_,C).version}catch{return null}}e.diff=tr;function tr(d,_){if(St(d,_))return null;var S=At(d),C=At(_),R="";if(S.prerelease.length||C.prerelease.length){R="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return R+L;return k}e.compareIdentifiers=Ut;var Vt=/^[0-9]+$/;function Ut(d,_){var S=Vt.test(d),C=Vt.test(_);return S&&C&&(d=+d,_=+_),d===_?0:S&&!C?-1:C&&!S?1:d<_?-1:1}e.rcompareIdentifiers=or;function or(d,_){return Ut(_,d)}e.major=rr;function rr(d,_){return new ue(d,_).major}e.minor=yr;function yr(d,_){return new ue(d,_).minor}e.patch=ie;function ie(d,_){return new ue(d,_).patch}e.compare=K;function K(d,_,S){return new ue(d,S).compare(new ue(_,S))}e.compareLoose=xe;function xe(d,_){return K(d,_,!0)}e.rcompare=Te;function Te(d,_,S){return K(_,d,S)}e.sort=ht;function ht(d,_){return d.sort(function(S,C){return e.compare(S,C,_)})}e.rsort=Ke;function Ke(d,_){return d.sort(function(S,C){return e.rcompare(S,C,_)})}e.gt=He;function He(d,_,S){return K(d,_,S)>0}e.lt=We;function We(d,_,S){return K(d,_,S)<0}e.eq=St;function St(d,_,S){return K(d,_,S)===0}e.neq=Tt;function Tt(d,_,S){return K(d,_,S)!==0}e.gte=Oe;function Oe(d,_,S){return K(d,_,S)>=0}e.lte=Ye;function Ye(d,_,S){return K(d,_,S)<=0}e.cmp=ae;function ae(d,_,S,C){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d===S;case"!==":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d!==S;case"":case"=":case"==":return St(d,S,C);case"!=":return Tt(d,S,C);case">":return He(d,S,C);case">=":return Oe(d,S,C);case"<":return We(d,S,C);case"<=":return Ye(d,S,C);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=we;function we(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof we){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof we))return new we(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};we.prototype.parse=function(d){var _=this.options.loose?o[W]:o[ee],S=d.match(_);if(!S)throw new TypeError("Invalid comparator: "+d);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ue(S[2],this.options.loose):this.semver=Le},we.prototype.toString=function(){return this.value},we.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Le?!0:(typeof d=="string"&&(d=new ue(d,this.options)),ae(d,this.operator,this.semver,this.options))},we.prototype.intersects=function(d,_){if(!(d instanceof we))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var S;if(this.operator==="")return S=new he(d.value,_),pe(this.value,S,_);if(d.operator==="")return S=new he(this.value,_),pe(d.semver,S,_);var C=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),R=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),k=this.semver.version===d.semver.version,L=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),Q=ae(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),te=ae(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return C||R||k&&L||Q||te},e.Range=he;function he(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof he)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new he(d.raw,_);if(d instanceof we)return new he(d.value,_);if(!(this instanceof he))return new he(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var S=_?o[Ae]:o[Ve];d=d.replace(S,et),t("hyphen replace",d),d=d.replace(o[re],ve),t("comparator trim",d,o[re]),d=d.replace(o[oe],ge),d=d.replace(o[Ee],se),d=d.split(/\s+/).join(" ");var C=_?o[W]:o[ee],R=d.split(" ").map(function(k){return qt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(R=R.filter(function(k){return!!k.match(C)})),R=R.map(function(k){return new we(k,this.options)},this),R},he.prototype.intersects=function(d,_){if(!(d instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return d.set.some(function(R){return R.every(function(k){return C.intersects(k,_)})})})})},e.toComparators=ut;function ut(d,_){return new he(d,_).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function qt(d,_){return t("comp",d,_),d=Er(d,_),t("caret",d),d=$t(d,_),t("tildes",d),d=je(d,_),t("xrange",d),d=Z(d,_),t("stars",d),d}function Ze(d){return!d||d.toLowerCase()==="x"||d==="*"}function $t(d,_){return d.trim().split(/\s+/).map(function(S){return pr(S,_)}).join(" ")}function pr(d,_){var S=_.loose?o[Ue]:o[le];return d.replace(S,function(C,R,k,L,Q){t("tilde",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":Q?(t("replaceTilde pr",Q),te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0"):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0",t("tilde return",te),te})}function Er(d,_){return d.trim().split(/\s+/).map(function(S){return Me(S,_)}).join(" ")}function Me(d,_){t("caret",d,_);var S=_.loose?o[rt]:o[$e];return d.replace(S,function(C,R,k,L,Q){t("caret",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?R==="0"?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+".0 <"+(+R+1)+".0.0":Q?(t("replaceCaret pr",Q),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+"-"+Q+" <"+(+R+1)+".0.0"):(t("no pr"),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+" <"+(+R+1)+".0.0"),t("caret return",te),te})}function je(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(S){return Se(S,_)}).join(" ")}function Se(d,_){d=d.trim();var S=_.loose?o[ot]:o[st];return d.replace(S,function(C,R,k,L,Q,te){t("xRange",d,C,R,k,L,Q,te);var Fe=Ze(k),lt=Fe||Ze(L),qe=lt||Ze(Q),it=qe;return R==="="&&it&&(R=""),Fe?R===">"||R==="<"?C="<0.0.0":C="*":R&&it?(lt&&(L=0),Q=0,R===">"?(R=">=",lt?(k=+k+1,L=0,Q=0):(L=+L+1,Q=0)):R==="<="&&(R="<",lt?k=+k+1:L=+L+1),C=R+k+"."+L+"."+Q):lt?C=">="+k+".0.0 <"+(+k+1)+".0.0":qe&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(d,_){return t("replaceStars",d,_),d.trim().replace(o[Ne],"")}function et(d,_,S,C,R,k,L,Q,te,Fe,lt,qe,it){return Ze(S)?_="":Ze(C)?_=">="+S+".0.0":Ze(R)?_=">="+S+"."+C+".0":_=">="+_,Ze(te)?Q="":Ze(Fe)?Q="<"+(+te+1)+".0.0":Ze(lt)?Q="<"+te+"."+(+Fe+1)+".0":qe?Q="<="+te+"."+Fe+"."+lt+"-"+qe:Q="<="+Q,(_+" "+Q).trim()}he.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new ue(d,this.options));for(var _=0;_<this.set.length;_++)if(ze(this.set[_],d,this.options))return!0;return!1};function ze(d,_,S){for(var C=0;C<d.length;C++)if(!d[C].test(_))return!1;if(_.prerelease.length&&!S.includePrerelease){for(C=0;C<d.length;C++)if(t(d[C].semver),d[C].semver!==Le&&d[C].semver.prerelease.length>0){var R=d[C].semver;if(R.major===_.major&&R.minor===_.minor&&R.patch===_.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(d,_,S){try{_=new he(_,S)}catch{return!1}return _.test(d)}e.maxSatisfying=vt;function vt(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===-1)&&(C=L,R=new ue(C,S))}),C}e.minSatisfying=Et;function Et(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===1)&&(C=L,R=new ue(C,S))}),C}e.minVersion=Pt;function Pt(d,_){d=new he(d,_);var S=new ue("0.0.0");if(d.test(S)||(S=new ue("0.0.0-0"),d.test(S)))return S;S=null;for(var C=0;C<d.set.length;++C){var R=d.set[C];R.forEach(function(k){var L=new ue(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||He(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&d.test(S)?S:null}e.validRange=Bt;function Bt(d,_){try{return new he(d,_).range||"*"}catch{return null}}e.ltr=zt;function zt(d,_,S){return nt(d,_,"<",S)}e.gtr=jt;function jt(d,_,S){return nt(d,_,">",S)}e.outside=nt;function nt(d,_,S,C){d=new ue(d,C),_=new he(_,C);var R,k,L,Q,te;switch(S){case">":R=He,k=Ye,L=We,Q=">",te=">=";break;case"<":R=We,k=Oe,L=He,Q="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(d,_,C))return!1;for(var Fe=0;Fe<_.set.length;++Fe){var lt=_.set[Fe],qe=null,it=null;if(lt.forEach(function(dt){dt.semver===Le&&(dt=new we(">=0.0.0")),qe=qe||dt,it=it||dt,R(dt.semver,qe.semver,C)?qe=dt:L(dt.semver,it.semver,C)&&(it=dt)}),qe.operator===Q||qe.operator===te||(!it.operator||it.operator===Q)&&k(d,it.semver)||it.operator===te&&L(d,it.semver))return!1}return!0}e.prerelease=Ct;function Ct(d,_){var S=At(d,_);return S&&S.prerelease.length?S.prerelease:null}e.intersects=ct;function ct(d,_,S){return d=new he(d,S),_=new he(_,S),d.intersects(_)}e.coerce=mt;function mt(d){if(d instanceof ue)return d;if(typeof d!="string")return null;var _=d.match(o[Dt]);return _==null?null:At(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),ka=x((e,i)=>{"use strict";function t(f){return typeof f=="function"}var n=console.error.bind(console);function u(f,c,p){var v=!!f[c]&&f.propertyIsEnumerable(c);Object.defineProperty(f,c,{configurable:!0,enumerable:v,writable:!0,value:p})}function a(f){f&&f.logger&&(t(f.logger)?n=f.logger:n("new logger isn't a function, not replacing"))}function o(f,c,p){if(!f||!f[c]){n("no original function "+c+" to wrap");return}if(!p){n("no wrapper function"),n(new Error().stack);return}if(!t(f[c])||!t(p)){n("original object and wrapper must be functions");return}var v=f[c],m=p(v,c);return u(m,"__original",v),u(m,"__unwrap",function(){f[c]===m&&u(f,c,v)}),u(m,"__wrapped",!0),u(f,c,m),m}function r(f,c,p){if(f)Array.isArray(f)||(f=[f]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(c&&Array.isArray(c))){n("must provide one or more functions to wrap on modules");return}f.forEach(function(v){c.forEach(function(m){o(v,m,p)})})}function s(f,c){if(!f||!f[c]){n("no function to unwrap."),n(new Error().stack);return}if(!f[c].__unwrap)n("no original to unwrap to -- has "+c+" already been unwrapped?");else return f[c].__unwrap()}function l(f,c){if(f)Array.isArray(f)||(f=[f]);else{n("must provide one or more modules to patch"),n(new Error().stack);return}if(!(c&&Array.isArray(c))){n("must provide one or more functions to unwrap on modules");return}f.forEach(function(p){c.forEach(function(v){s(p,v)})})}a.wrap=o,a.massWrap=r,a.unwrap=s,a.massUnwrap=l,i.exports=a}),La=x((e,i)=>{"use strict";var t=ka(),n=t.wrap,u=t.unwrap,a="wrap@before";function o(c,p,v){var m=!!c[p]&&c.propertyIsEnumerable(p);Object.defineProperty(c,p,{configurable:!0,enumerable:m,writable:!0,value:v})}function r(c,p){for(var v=p.length,m=0;m<v;m++){var g=p[m],E=c[a];if(typeof E=="function")E(g);else if(Array.isArray(E))for(var T=E.length,O=0;O<T;O++)E[O](g)}}function s(c,p){var v;return v=c._events&&c._events[p],Array.isArray(v)||(v?v=[v]:v=[]),v}function l(c,p,v){var m=s(c,p),g=m.filter(function(E){return v.indexOf(E)===-1});g.length>0&&r(c,g)}function f(c,p){if(c){var v=c;if(typeof c=="function")v=p(c);else if(Array.isArray(c)){v=[];for(var m=0;m<c.length;m++)v[m]=p(c[m])}return v}}i.exports=function(c,p,v){if(!c||!c.on||!c.addListener||!c.removeListener||!c.emit)throw new Error("can only wrap real EEs");if(!p)throw new Error("must have function to run on listener addition");if(!v)throw new Error("must have function to wrap listeners when emitting");function m(E){return function(T,O){var P=s(this,T).slice();try{var A=E.call(this,T,O);return l(this,T,P),A}finally{this.on.__wrapped||n(this,"on",m),this.addListener.__wrapped||n(this,"addListener",m)}}}function g(E){return function(T){if(!this._events||!this._events[T])return E.apply(this,arguments);var O=this._events[T];function P(A){return function(){this._events[T]=O;try{return A.apply(this,arguments)}finally{O=this._events[T],this._events[T]=f(O,v)}}}n(this,"removeListener",P);try{return this._events[T]=f(O,v),E.apply(this,arguments)}finally{u(this,"removeListener"),this._events[T]=O}}}c[a]?typeof c[a]=="function"?o(c,a,[c[a],p]):Array.isArray(c[a])&&c[a].push(p):o(c,a,p),c.__wrapped||(n(c,"addListener",m),n(c,"on",m),n(c,"emit",g),o(c,"__unwrap",function(){u(c,"addListener"),u(c,"on"),u(c,"emit"),delete c[a],delete c.__wrapped}),o(c,"__wrapped",!0))}}),Lv=x((e,i)=>{"use strict";var t=require("util"),n=require("assert"),u=La(),a=require("async_hooks"),o="cls@contexts",r="error@context",s=process.env.DEBUG_CLS_HOOKED,l=-1;i.exports={getNamespace:c,createNamespace:p,destroyNamespace:v,reset:m,ERROR_SYMBOL:r};function f(E){this.name=E,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}f.prototype.set=function(E,T){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[E]=T,s){let O=" ".repeat(this._indent<0?0:this._indent);g(O+"CONTEXT-SET KEY:"+E+"="+T+" in ns:"+this.name+" currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return T},f.prototype.get=function(E){if(!this.active){if(s){let T=a.currentId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(`${P}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${E}=undefined currentUid:${l} asyncHooksCurrentId:${T} triggerId:${O} len:${this._set.length}`)}return}if(s){let T=a.executionAsyncId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(P+"CONTEXT-GETTING KEY:"+E+"="+this.active[E]+" ("+this.name+") currentUid:"+l+" active:"+t.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),g(`${P}CONTEXT-GETTING KEY: (${this.name}) ${E}=${this.active[E]} currentUid:${l} asyncHooksCurrentId:${T} triggerId:${O} len:${this._set.length} active:${t.inspect(this.active)}`)}return this.active[E]},f.prototype.createContext=function(){let E=Object.create(this.active?this.active:Object.prototype);if(E._ns_name=this.name,E.id=l,s){let T=a.executionAsyncId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(`${P}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${T} triggerId:${O} len:${this._set.length} context:${t.inspect(E,{showHidden:!0,depth:2,colors:!0})}`)}return E},f.prototype.run=function(E){let T=this.createContext();this.enter(T);try{if(s){let O=a.triggerAsyncId(),P=a.executionAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${O} asyncHooksCurrentId:${P} len:${this._set.length} context:${t.inspect(T)}`)}return E(T),T}catch(O){throw O&&(O[r]=T),O}finally{if(s){let O=a.triggerAsyncId(),P=a.executionAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${O} asyncHooksCurrentId:${P} len:${this._set.length} ${t.inspect(T)}`)}this.exit(T)}},f.prototype.runAndReturn=function(E){let T;return this.run(function(O){T=E(O)}),T},f.prototype.runPromise=function(E){let T=this.createContext();this.enter(T);let O=E(T);if(!O||!O.then||!O.catch)throw new Error("fn must return a promise.");return s&&g("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),O.then(P=>(s&&g("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),this.exit(T),P)).catch(P=>{throw P[r]=T,s&&g("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+t.inspect(T)),this.exit(T),P})},f.prototype.bind=function(E,T){T||(this.active?T=this.active:T=this.createContext());let O=this;return function(){O.enter(T);try{return E.apply(this,arguments)}catch(P){throw P&&(P[r]=T),P}finally{O.exit(T)}}},f.prototype.enter=function(E){if(n.ok(E,"context must be provided for entering"),s){let T=a.executionAsyncId(),O=a.triggerAsyncId(),P=" ".repeat(this._indent<0?0:this._indent);g(`${P}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${O} asyncHooksCurrentId:${T} len:${this._set.length} ${t.inspect(E)}`)}this._set.push(this.active),this.active=E},f.prototype.exit=function(E){if(n.ok(E,"context must be provided for exiting"),s){let O=a.executionAsyncId(),P=a.triggerAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);g(`${A}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${P} asyncHooksCurrentId:${O} len:${this._set.length} ${t.inspect(E)}`)}if(this.active===E){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let T=this._set.lastIndexOf(E);T<0?(s&&g("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(E)),n.ok(T>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(E))):(n.ok(T,"can't remove top context"),this._set.splice(T,1))},f.prototype.bindEmitter=function(E){n.ok(E.on&&E.addListener&&E.emit,"can only bind real EEs");let T=this,O="context@"+this.name;function P(M){!M||(M[o]||(M[o]=Object.create(null)),M[o][O]={namespace:T,context:T.active})}function A(M){if(!(M&&M[o]))return M;let j=M,G=M[o];return Object.keys(G).forEach(function(B){let Y=G[B];j=Y.namespace.bind(j,Y.context)}),j}u(E,P,A)},f.prototype.fromException=function(E){return E[r]};function c(E){return process.namespaces[E]}function p(E){n.ok(E,"namespace must be given a name."),s&&g(`NS-CREATING NAMESPACE (${E})`);let T=new f(E);return T.id=l,a.createHook({init(O,P,A,M){if(l=a.executionAsyncId(),T.active){if(T._contexts.set(O,T.active),s){let j=" ".repeat(T._indent<0?0:T._indent);g(`${j}INIT [${P}] (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}else if(l===0){let j=a.triggerAsyncId(),G=T._contexts.get(j);if(G){if(T._contexts.set(O,G),s){let B=" ".repeat(T._indent<0?0:T._indent);g(`${B}INIT USING CONTEXT FROM TRIGGERID [${P}] (${E}) asyncId:${O} currentUid:${l} triggerId:${j} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}else if(s){let B=" ".repeat(T._indent<0?0:T._indent);g(`${B}INIT MISSING CONTEXT [${P}] (${E}) asyncId:${O} currentUid:${l} triggerId:${j} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}}if(s&&P==="PROMISE"){g(t.inspect(M,{showHidden:!0}));let j=M.parentId,G=" ".repeat(T._indent<0?0:T._indent);g(`${G}INIT RESOURCE-PROMISE [${P}] (${E}) parentId:${j} asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} resource:${M}`)}},before(O){l=a.executionAsyncId();let P;if(P=T._contexts.get(O)||T._contexts.get(l),P){if(s){let A=a.triggerAsyncId(),M=" ".repeat(T._indent<0?0:T._indent);g(`${M}BEFORE (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`),T._indent+=2}T.enter(P)}else if(s){let A=a.triggerAsyncId(),M=" ".repeat(T._indent<0?0:T._indent);g(`${M}BEFORE MISSING CONTEXT (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${t.inspect(T._contexts,{showHidden:!0,depth:2,colors:!0})}`),T._indent+=2}},after(O){l=a.executionAsyncId();let P;if(P=T._contexts.get(O)||T._contexts.get(l),P){if(s){let A=a.triggerAsyncId();T._indent-=2;let M=" ".repeat(T._indent<0?0:T._indent);g(`${M}AFTER (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`)}T.exit(P)}else if(s){let A=a.triggerAsyncId();T._indent-=2;let M=" ".repeat(T._indent<0?0:T._indent);g(`${M}AFTER MISSING CONTEXT (${E}) asyncId:${O} currentUid:${l} triggerId:${A} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(P)}`)}},destroy(O){if(l=a.executionAsyncId(),s){let P=a.triggerAsyncId(),A=" ".repeat(T._indent<0?0:T._indent);g(`${A}DESTROY (${E}) currentUid:${l} asyncId:${O} triggerId:${P} active:${t.inspect(T.active,{showHidden:!0,depth:2,colors:!0})} context:${t.inspect(T._contexts.get(l))}`)}T._contexts.delete(O)}}).enable(),process.namespaces[E]=T,T}function v(E){let T=c(E);n.ok(T,`can't delete nonexistent namespace! "`+E+'"'),n.ok(T.id,"don't assign to process.namespaces directly! "+t.inspect(T)),process.namespaces[E]=null}function m(){process.namespaces&&Object.keys(process.namespaces).forEach(function(E){v(E)}),process.namespaces=Object.create(null)}process.namespaces={};function g(...E){s&&process._rawDebug(`${t.format(...E)}`)}}),jv=x((e,i)=>{"use strict";function t(){}i.exports=function(){let n=this._hooks,u=this._state,a=process.nextTick;process.nextTick=function(){if(!u.enabled)return a.apply(process,arguments);let o=new Array(arguments.length);for(let f=0;f<arguments.length;f++)o[f]=arguments[f];let r=o[0];if(typeof r!="function")throw new TypeError("callback is not a function");let s=new t,l=--u.counter;return n.init.call(s,l,0,null,null),o[0]=function(){n.pre.call(s,l);let f=!0;try{r.apply(this,arguments),f=!1}finally{f&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){n.post.call(s,l,!0),n.destroy.call(null,l)})}n.post.call(s,l,!1),n.destroy.call(null,l)},a.apply(process,o)}}}),Fv=x((e,i)=>{"use strict";function t(){}i.exports=function(){let n=this._hooks,u=this._state,a=global.Promise,o=a.prototype.then;a.prototype.then=f;function r(c,p,v,m){return typeof c!="function"?m?s(v):l(v):function(){n.pre.call(p,v);try{return c.apply(this,arguments)}finally{n.post.call(p,v,!1),n.destroy.call(null,v)}}}function s(c){return function(p){return n.destroy.call(null,c),p}}function l(c){return function(p){throw n.destroy.call(null,c),p}}function f(c,p){if(!u.enabled)return o.call(this,c,p);let v=new t,m=--u.counter;return n.init.call(v,m,0,null,null),o.call(this,r(c,v,m,!0),r(p,v,m,!1))}}}),Uv=x((e,i)=>{"use strict";var t=require("timers");function n(){}function u(){}function a(){}var o=new Map,r=new Map,s=new Map,l=null,f=!1;i.exports=function(){c(this._hooks,this._state,"setTimeout","clearTimeout",n,o,!0),c(this._hooks,this._state,"setInterval","clearInterval",u,r,!1),c(this._hooks,this._state,"setImmediate","clearImmediate",a,s,!0),global.setTimeout=t.setTimeout,global.setInterval=t.setInterval,global.setImmediate=t.setImmediate,global.clearTimeout=t.clearTimeout,global.clearInterval=t.clearInterval,global.clearImmediate=t.clearImmediate};function c(p,v,m,g,E,T,O){let P=t[m],A=t[g];t[m]=function(){if(!v.enabled)return P.apply(t,arguments);let M=new Array(arguments.length);for(let ne=0;ne<arguments.length;ne++)M[ne]=arguments[ne];let j=M[0];if(typeof j!="function")throw new TypeError('"callback" argument must be a function');let G=new E,B=--v.counter,Y;return p.init.call(G,B,0,null,null),M[0]=function(){l=Y,p.pre.call(G,B);let ne=!0;try{j.apply(this,arguments),ne=!1}finally{ne&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){p.post.call(G,B,!0),T.delete(Y),p.destroy.call(null,B)})}p.post.call(G,B,!1),l=null,(O||f)&&(f=!1,T.delete(Y),p.destroy.call(null,B))},Y=P.apply(t,M),T.set(Y,B),Y},t[g]=function(M){if(l===M&&M!==null)f=!0;else if(T.has(M)){let j=T.get(M);T.delete(M),p.destroy.call(null,j)}A.apply(t,arguments)}}}),Tl=x((e,i)=>{i.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}}),Hv=x((e,i)=>{"use strict";var t=process.binding("async_wrap"),n=t.Providers.TIMERWRAP,u={nextTick:jv(),promise:Fv(),timers:Uv()},a=new Set;function o(){this.enabled=!1,this.counter=0}function r(){let f=this.initFns=[],c=this.preFns=[],p=this.postFns=[],v=this.destroyFns=[];this.init=function(m,g,E,T){if(g===n){a.add(m);return}for(let O of f)O(m,this,g,E,T)},this.pre=function(m){if(!a.has(m))for(let g of c)g(m,this)},this.post=function(m,g){if(!a.has(m))for(let E of p)E(m,this,g)},this.destroy=function(m){if(a.has(m)){a.delete(m);return}for(let g of v)g(m)}}r.prototype.add=function(f){f.init&&this.initFns.push(f.init),f.pre&&this.preFns.push(f.pre),f.post&&this.postFns.push(f.post),f.destroy&&this.destroyFns.push(f.destroy)};function s(f,c){let p=f.indexOf(c);p!==-1&&f.splice(p,1)}r.prototype.remove=function(f){f.init&&s(this.initFns,f.init),f.pre&&s(this.preFns,f.pre),f.post&&s(this.postFns,f.post),f.destroy&&s(this.destroyFns,f.destroy)};function l(){this._state=new o,this._hooks=new r,this.version=Tl().version,this.providers=t.Providers;for(let f of Object.keys(u))u[f].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),t.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}i.exports=l,l.prototype.addHooks=function(f){this._hooks.add(f)},l.prototype.removeHooks=function(f){this._hooks.remove(f)},l.prototype.enable=function(){this._state.enabled=!0,t.enable()},l.prototype.disable=function(){this._state.enabled=!1,t.disable()}}),Il=x((e,i)=>{i.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}}),qv=x((e,i)=>{function t(n){try{return Error.prototype.toString.call(n)}catch(u){try{return"<error: "+u+">"}catch{return"<error>"}}}i.exports=function(n,u){var a=[];a.push(t(n));for(var o=0;o<u.length;o++){var r=u[o],s;try{s=r.toString()}catch(l){try{s="<error: "+l+">"}catch{s="<error>"}}a.push("    at "+s)}return a.join(`
`)}}),Bv=x((e,i)=>{var t=qv();function n(){this.extend=new o,this.filter=new o,this.format=new r,this.version=Il().version}var u=!1;n.prototype.callSite=function c(p){p||(p={}),u=!0;var v={};Error.captureStackTrace(v,c);var m=v.stack;return u=!1,m=m.slice(p.slice||0),p.extend&&(m=this.extend._modify(v,m)),p.filter&&(m=this.filter._modify(v,m)),m};var a=new n;function o(){this._modifiers=[]}o.prototype._modify=function(c,p){for(var v=0,m=this._modifiers.length;v<m;v++)p=this._modifiers[v](c,p);return p},o.prototype.attach=function(c){this._modifiers.push(c)},o.prototype.deattach=function(c){var p=this._modifiers.indexOf(c);return p===-1?!1:(this._modifiers.splice(p,1),!0)};function r(){this._formater=t,this._previous=void 0}r.prototype.replace=function(c){c?this._formater=c:this.restore()},r.prototype.restore=function(){this._formater=t,this._previous=void 0},r.prototype._backup=function(){this._previous=this._formater},r.prototype._roolback=function(){this._previous===t?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&a.format.replace(Error.prepareStackTrace);var s=!1;function l(c,p){if(u)return p;if(s)return t(c,p);var v=p.concat();v=a.extend._modify(c,v),v=a.filter._modify(c,v),v=v.slice(0,Error.stackTraceLimit),Object.isExtensible(c)&&Object.getOwnPropertyDescriptor(c,"callSite")===void 0&&(c.callSite={original:p,mutated:v}),s=!0;var m=a.format._formater(c,v);return s=!1,m}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return l},set:function(c){c===l?a.format._roolback():(a.format._backup(),a.format.replace(c))}});function f(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:f,set:function(c){Object.defineProperty(this,"callSite",{value:c,writable:!0,configurable:!0})},configurable:!0}),i.exports=a}),wl=x((e,i)=>{if(global._stackChain)if(global._stackChain.version===Il().version)i.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else i.exports=global._stackChain=Bv()}),Gv=x((e,i)=>{"use strict";var t=Hv();if(global._asyncHook)if(global._asyncHook.version===Tl().version)i.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else wl().filter.attach(function(n,u){return u.filter(function(a){let o=a.getFileName();return!(o&&o.slice(0,__dirname.length)===__dirname)})}),i.exports=global._asyncHook=new t}),Vv=x((e,i)=>{"use strict";var t=require("util"),n=require("assert"),u=La(),a=Gv(),o="cls@contexts",r="error@context",s=[];for(let A in a.providers)s[a.providers[A]]=A;var l=process.env.DEBUG_CLS_HOOKED,f=-1;i.exports={getNamespace:p,createNamespace:v,destroyNamespace:m,reset:g,ERROR_SYMBOL:r};function c(A){this.name=A,this.active=null,this._set=[],this.id=null,this._contexts=new Map}c.prototype.set=function(A,M){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&E("    SETTING KEY:"+A+"="+M+" in ns:"+this.name+" uid:"+f+" active:"+t.inspect(this.active,!0)),this.active[A]=M,M},c.prototype.get=function(A){if(!this.active){l&&E("    GETTING KEY:"+A+"=undefined "+this.name+" uid:"+f+" active:"+t.inspect(this.active,!0));return}return l&&E("    GETTING KEY:"+A+"="+this.active[A]+" "+this.name+" uid:"+f+" active:"+t.inspect(this.active,!0)),this.active[A]},c.prototype.createContext=function(){l&&E("   CREATING Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  active:"+t.inspect(this.active,!0,2,!0));let A=Object.create(this.active?this.active:Object.prototype);return A._ns_name=this.name,A.id=f,l&&E("   CREATED Context: "+this.name+" uid:"+f+" len:"+this._set.length+"  context:"+t.inspect(A,!0,2,!0)),A},c.prototype.run=function(A){let M=this.createContext();this.enter(M);try{return l&&E(" BEFORE RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),A(M),M}catch(j){throw j&&(j[r]=M),j}finally{l&&E(" AFTER RUN: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M)}},c.prototype.runAndReturn=function(A){var M;return this.run(function(j){M=A(j)}),M},c.prototype.runPromise=function(A){let M=this.createContext();this.enter(M);let j=A(M);if(!j||!j.then||!j.catch)throw new Error("fn must return a promise.");return l&&E(" BEFORE runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),j.then(G=>(l&&E(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M),G)).catch(G=>{throw G[r]=M,l&&E(" AFTER runPromise: "+this.name+" uid:"+f+" len:"+this._set.length+" "+t.inspect(M)),this.exit(M),G})},c.prototype.bind=function(A,M){M||(this.active?M=this.active:M=this.createContext());let j=this;return function(){j.enter(M);try{return A.apply(this,arguments)}catch(G){throw G&&(G[r]=M),G}finally{j.exit(M)}}},c.prototype.enter=function(A){n.ok(A,"context must be provided for entering"),l&&E("  ENTER "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+t.inspect(A)),this._set.push(this.active),this.active=A},c.prototype.exit=function(A){if(n.ok(A,"context must be provided for exiting"),l&&E("  EXIT "+this.name+" uid:"+f+" len:"+this._set.length+" context: "+t.inspect(A)),this.active===A){n.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let M=this._set.lastIndexOf(A);M<0?(l&&E("??ERROR?? context exiting but not entered - ignoring: "+t.inspect(A)),n.ok(M>=0,`context not currently entered; can't exit. 
`+t.inspect(this)+`
`+t.inspect(A))):(n.ok(M,"can't remove top context"),this._set.splice(M,1))},c.prototype.bindEmitter=function(A){n.ok(A.on&&A.addListener&&A.emit,"can only bind real EEs");let M=this,j="context@"+this.name;function G(Y){!Y||(Y[o]||(Y[o]=Object.create(null)),Y[o][j]={namespace:M,context:M.active})}function B(Y){if(!(Y&&Y[o]))return Y;let ne=Y,ye=Y[o];return Object.keys(ye).forEach(function(Re){let st=ye[Re];ne=st.namespace.bind(ne,st.context)}),ne}u(A,G,B)},c.prototype.fromException=function(A){return A[r]};function p(A){return process.namespaces[A]}function v(A){n.ok(A,"namespace must be given a name."),l&&E("CREATING NAMESPACE "+A);let M=new c(A);return M.id=f,a.addHooks({init(j,G,B,Y,ne){f=j,Y?(M._contexts.set(j,M._contexts.get(Y)),l&&E("PARENTID: "+A+" uid:"+j+" parent:"+Y+" provider:"+B)):M._contexts.set(f,M.active),l&&E("INIT "+A+" uid:"+j+" parent:"+Y+" provider:"+s[B]+" active:"+t.inspect(M.active,!0))},pre(j,G){f=j;let B=M._contexts.get(j);B?(l&&E(" PRE "+A+" uid:"+j+" handle:"+T(G)+" context:"+t.inspect(B)),M.enter(B)):l&&E(" PRE MISSING CONTEXT "+A+" uid:"+j+" handle:"+T(G))},post(j,G){f=j;let B=M._contexts.get(j);B?(l&&E(" POST "+A+" uid:"+j+" handle:"+T(G)+" context:"+t.inspect(B)),M.exit(B)):l&&E(" POST MISSING CONTEXT "+A+" uid:"+j+" handle:"+T(G))},destroy(j){f=j,l&&E("DESTROY "+A+" uid:"+j+" context:"+t.inspect(M._contexts.get(f))+" active:"+t.inspect(M.active,!0)),M._contexts.delete(j)}}),process.namespaces[A]=M,M}function m(A){let M=p(A);n.ok(M,`can't delete nonexistent namespace! "`+A+'"'),n.ok(M.id,"don't assign to process.namespaces directly! "+t.inspect(M)),process.namespaces[A]=null}function g(){process.namespaces&&Object.keys(process.namespaces).forEach(function(A){m(A)}),process.namespaces=Object.create(null)}process.namespaces={},a._state&&!a._state.enabled&&a.enable();function E(A){process.env.DEBUG&&process._rawDebug(A)}function T(A){if(!A)return A;if(typeof A=="function")return A.name?A.name:(A.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(A.constructor&&A.constructor.name)return A.constructor.name}if(l){O=wl();for(P in O.filter._modifiers)O.filter.deattach(P)}var O,P}),zv=x((e,i)=>{"use strict";var t=kv();process&&t.gte(process.versions.node,"8.0.0")?i.exports=Lv():i.exports=Vv()}),$v=x((e,i)=>{e=i.exports=ue;var t;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?t=function(){var d=Array.prototype.slice.call(arguments,0);d.unshift("SEMVER"),console.log.apply(console,d)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var n=256,u=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,o=e.re=[],r=e.src=[],s=0,l=s++;r[l]="0|[1-9]\\d*";var f=s++;r[f]="[0-9]+";var c=s++;r[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=s++;r[p]="("+r[l]+")\\.("+r[l]+")\\.("+r[l]+")";var v=s++;r[v]="("+r[f]+")\\.("+r[f]+")\\.("+r[f]+")";var m=s++;r[m]="(?:"+r[l]+"|"+r[c]+")";var g=s++;r[g]="(?:"+r[f]+"|"+r[c]+")";var E=s++;r[E]="(?:-("+r[m]+"(?:\\."+r[m]+")*))";var T=s++;r[T]="(?:-?("+r[g]+"(?:\\."+r[g]+")*))";var O=s++;r[O]="[0-9A-Za-z-]+";var P=s++;r[P]="(?:\\+("+r[O]+"(?:\\."+r[O]+")*))";var A=s++,M="v?"+r[p]+r[E]+"?"+r[P]+"?";r[A]="^"+M+"$";var j="[v=\\s]*"+r[v]+r[T]+"?"+r[P]+"?",G=s++;r[G]="^"+j+"$";var B=s++;r[B]="((?:<|>)?=?)";var Y=s++;r[Y]=r[f]+"|x|X|\\*";var ne=s++;r[ne]=r[l]+"|x|X|\\*";var ye=s++;r[ye]="[v=\\s]*("+r[ne]+")(?:\\.("+r[ne]+")(?:\\.("+r[ne]+")(?:"+r[E]+")?"+r[P]+"?)?)?";var Re=s++;r[Re]="[v=\\s]*("+r[Y]+")(?:\\.("+r[Y]+")(?:\\.("+r[Y]+")(?:"+r[T]+")?"+r[P]+"?)?)?";var st=s++;r[st]="^"+r[B]+"\\s*"+r[ye]+"$";var ot=s++;r[ot]="^"+r[B]+"\\s*"+r[Re]+"$";var Dt=s++;r[Dt]="(?:^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])";var at=s++;r[at]="(?:~>?)";var oe=s++;r[oe]="(\\s*)"+r[at]+"\\s+",o[oe]=new RegExp(r[oe],"g");var ge="$1~",le=s++;r[le]="^"+r[at]+r[ye]+"$";var Ue=s++;r[Ue]="^"+r[at]+r[Re]+"$";var X=s++;r[X]="(?:\\^)";var Ee=s++;r[Ee]="(\\s*)"+r[X]+"\\s+",o[Ee]=new RegExp(r[Ee],"g");var se="$1^",$e=s++;r[$e]="^"+r[X]+r[ye]+"$";var rt=s++;r[rt]="^"+r[X]+r[Re]+"$";var W=s++;r[W]="^"+r[B]+"\\s*("+j+")$|^$";var ee=s++;r[ee]="^"+r[B]+"\\s*("+M+")$|^$";var re=s++;r[re]="(\\s*)"+r[B]+"\\s*("+j+"|"+r[ye]+")",o[re]=new RegExp(r[re],"g");var ve="$1$2$3",Ve=s++;r[Ve]="^\\s*("+r[ye]+")\\s+-\\s+("+r[ye]+")\\s*$";var Ae=s++;r[Ae]="^\\s*("+r[Re]+")\\s+-\\s+("+r[Re]+")\\s*$";var Ne=s++;for(r[Ne]="(<|>)?=?\\s*\\*",Qe=0;Qe<s;Qe++)t(Qe,r[Qe]),o[Qe]||(o[Qe]=new RegExp(r[Qe]));var Qe;e.parse=At;function At(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue)return d;if(typeof d!="string"||d.length>n)return null;var S=_.loose?o[G]:o[A];if(!S.test(d))return null;try{return new ue(d,_)}catch{return null}}e.valid=gr;function gr(d,_){var S=At(d,_);return S?S.version:null}e.clean=dr;function dr(d,_){var S=At(d.trim().replace(/^[=v]+/,""),_);return S?S.version:null}e.SemVer=ue;function ue(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof ue){if(d.loose===_.loose)return d;d=d.version}else if(typeof d!="string")throw new TypeError("Invalid Version: "+d);if(d.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof ue))return new ue(d,_);t("SemVer",d,_),this.options=_,this.loose=!!_.loose;var S=d.trim().match(_.loose?o[G]:o[A]);if(!S)throw new TypeError("Invalid Version: "+d);if(this.raw=d,this.major=+S[1],this.minor=+S[2],this.patch=+S[3],this.major>u||this.major<0)throw new TypeError("Invalid major version");if(this.minor>u||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>u||this.patch<0)throw new TypeError("Invalid patch version");S[4]?this.prerelease=S[4].split(".").map(function(C){if(/^[0-9]+$/.test(C)){var R=+C;if(R>=0&&R<u)return R}return C}):this.prerelease=[],this.build=S[5]?S[5].split("."):[],this.format()}ue.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ue.prototype.toString=function(){return this.version},ue.prototype.compare=function(d){return t("SemVer.compare",this.version,this.options,d),d instanceof ue||(d=new ue(d,this.options)),this.compareMain(d)||this.comparePre(d)},ue.prototype.compareMain=function(d){return d instanceof ue||(d=new ue(d,this.options)),Ut(this.major,d.major)||Ut(this.minor,d.minor)||Ut(this.patch,d.patch)},ue.prototype.comparePre=function(d){if(d instanceof ue||(d=new ue(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;var _=0;do{var S=this.prerelease[_],C=d.prerelease[_];if(t("prerelease compare",_,S,C),S===void 0&&C===void 0)return 0;if(C===void 0)return 1;if(S===void 0)return-1;if(S!==C)return Ut(S,C)}while(++_)},ue.prototype.inc=function(d,_){switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",_);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",_);break;case"prepatch":this.prerelease.length=0,this.inc("patch",_),this.inc("pre",_);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",_),this.inc("pre",_);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var S=this.prerelease.length;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);S===-1&&this.prerelease.push(0)}_&&(this.prerelease[0]===_?isNaN(this.prerelease[1])&&(this.prerelease=[_,0]):this.prerelease=[_,0]);break;default:throw new Error("invalid increment argument: "+d)}return this.format(),this.raw=this.version,this},e.inc=_r;function _r(d,_,S,C){typeof S=="string"&&(C=S,S=void 0);try{return new ue(d,S).inc(_,C).version}catch{return null}}e.diff=tr;function tr(d,_){if(St(d,_))return null;var S=At(d),C=At(_),R="";if(S.prerelease.length||C.prerelease.length){R="pre";var k="prerelease"}for(var L in S)if((L==="major"||L==="minor"||L==="patch")&&S[L]!==C[L])return R+L;return k}e.compareIdentifiers=Ut;var Vt=/^[0-9]+$/;function Ut(d,_){var S=Vt.test(d),C=Vt.test(_);return S&&C&&(d=+d,_=+_),d===_?0:S&&!C?-1:C&&!S?1:d<_?-1:1}e.rcompareIdentifiers=or;function or(d,_){return Ut(_,d)}e.major=rr;function rr(d,_){return new ue(d,_).major}e.minor=yr;function yr(d,_){return new ue(d,_).minor}e.patch=ie;function ie(d,_){return new ue(d,_).patch}e.compare=K;function K(d,_,S){return new ue(d,S).compare(new ue(_,S))}e.compareLoose=xe;function xe(d,_){return K(d,_,!0)}e.rcompare=Te;function Te(d,_,S){return K(_,d,S)}e.sort=ht;function ht(d,_){return d.sort(function(S,C){return e.compare(S,C,_)})}e.rsort=Ke;function Ke(d,_){return d.sort(function(S,C){return e.rcompare(S,C,_)})}e.gt=He;function He(d,_,S){return K(d,_,S)>0}e.lt=We;function We(d,_,S){return K(d,_,S)<0}e.eq=St;function St(d,_,S){return K(d,_,S)===0}e.neq=Tt;function Tt(d,_,S){return K(d,_,S)!==0}e.gte=Oe;function Oe(d,_,S){return K(d,_,S)>=0}e.lte=Ye;function Ye(d,_,S){return K(d,_,S)<=0}e.cmp=ae;function ae(d,_,S,C){switch(_){case"===":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d===S;case"!==":return typeof d=="object"&&(d=d.version),typeof S=="object"&&(S=S.version),d!==S;case"":case"=":case"==":return St(d,S,C);case"!=":return Tt(d,S,C);case">":return He(d,S,C);case">=":return Oe(d,S,C);case"<":return We(d,S,C);case"<=":return Ye(d,S,C);default:throw new TypeError("Invalid operator: "+_)}}e.Comparator=we;function we(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof we){if(d.loose===!!_.loose)return d;d=d.value}if(!(this instanceof we))return new we(d,_);t("comparator",d,_),this.options=_,this.loose=!!_.loose,this.parse(d),this.semver===Le?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var Le={};we.prototype.parse=function(d){var _=this.options.loose?o[W]:o[ee],S=d.match(_);if(!S)throw new TypeError("Invalid comparator: "+d);this.operator=S[1],this.operator==="="&&(this.operator=""),S[2]?this.semver=new ue(S[2],this.options.loose):this.semver=Le},we.prototype.toString=function(){return this.value},we.prototype.test=function(d){return t("Comparator.test",d,this.options.loose),this.semver===Le?!0:(typeof d=="string"&&(d=new ue(d,this.options)),ae(d,this.operator,this.semver,this.options))},we.prototype.intersects=function(d,_){if(!(d instanceof we))throw new TypeError("a Comparator is required");(!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1});var S;if(this.operator==="")return S=new he(d.value,_),pe(this.value,S,_);if(d.operator==="")return S=new he(this.value,_),pe(d.semver,S,_);var C=(this.operator===">="||this.operator===">")&&(d.operator===">="||d.operator===">"),R=(this.operator==="<="||this.operator==="<")&&(d.operator==="<="||d.operator==="<"),k=this.semver.version===d.semver.version,L=(this.operator===">="||this.operator==="<=")&&(d.operator===">="||d.operator==="<="),Q=ae(this.semver,"<",d.semver,_)&&(this.operator===">="||this.operator===">")&&(d.operator==="<="||d.operator==="<"),te=ae(this.semver,">",d.semver,_)&&(this.operator==="<="||this.operator==="<")&&(d.operator===">="||d.operator===">");return C||R||k&&L||Q||te},e.Range=he;function he(d,_){if((!_||typeof _!="object")&&(_={loose:!!_,includePrerelease:!1}),d instanceof he)return d.loose===!!_.loose&&d.includePrerelease===!!_.includePrerelease?d:new he(d.raw,_);if(d instanceof we)return new he(d.value,_);if(!(this instanceof he))return new he(d,_);if(this.options=_,this.loose=!!_.loose,this.includePrerelease=!!_.includePrerelease,this.raw=d,this.set=d.split(/\s*\|\|\s*/).map(function(S){return this.parseRange(S.trim())},this).filter(function(S){return S.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+d);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(d){return d.join(" ").trim()}).join("||").trim(),this.range},he.prototype.toString=function(){return this.range},he.prototype.parseRange=function(d){var _=this.options.loose;d=d.trim();var S=_?o[Ae]:o[Ve];d=d.replace(S,et),t("hyphen replace",d),d=d.replace(o[re],ve),t("comparator trim",d,o[re]),d=d.replace(o[oe],ge),d=d.replace(o[Ee],se),d=d.split(/\s+/).join(" ");var C=_?o[W]:o[ee],R=d.split(" ").map(function(k){return qt(k,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(R=R.filter(function(k){return!!k.match(C)})),R=R.map(function(k){return new we(k,this.options)},this),R},he.prototype.intersects=function(d,_){if(!(d instanceof he))throw new TypeError("a Range is required");return this.set.some(function(S){return S.every(function(C){return d.set.some(function(R){return R.every(function(k){return C.intersects(k,_)})})})})},e.toComparators=ut;function ut(d,_){return new he(d,_).set.map(function(S){return S.map(function(C){return C.value}).join(" ").trim().split(" ")})}function qt(d,_){return t("comp",d,_),d=Er(d,_),t("caret",d),d=$t(d,_),t("tildes",d),d=je(d,_),t("xrange",d),d=Z(d,_),t("stars",d),d}function Ze(d){return!d||d.toLowerCase()==="x"||d==="*"}function $t(d,_){return d.trim().split(/\s+/).map(function(S){return pr(S,_)}).join(" ")}function pr(d,_){var S=_.loose?o[Ue]:o[le];return d.replace(S,function(C,R,k,L,Q){t("tilde",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":Q?(t("replaceTilde pr",Q),te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0"):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0",t("tilde return",te),te})}function Er(d,_){return d.trim().split(/\s+/).map(function(S){return Me(S,_)}).join(" ")}function Me(d,_){t("caret",d,_);var S=_.loose?o[rt]:o[$e];return d.replace(S,function(C,R,k,L,Q){t("caret",d,C,R,k,L,Q);var te;return Ze(R)?te="":Ze(k)?te=">="+R+".0.0 <"+(+R+1)+".0.0":Ze(L)?R==="0"?te=">="+R+"."+k+".0 <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+".0 <"+(+R+1)+".0.0":Q?(t("replaceCaret pr",Q),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+"-"+Q+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+"-"+Q+" <"+(+R+1)+".0.0"):(t("no pr"),R==="0"?k==="0"?te=">="+R+"."+k+"."+L+" <"+R+"."+k+"."+(+L+1):te=">="+R+"."+k+"."+L+" <"+R+"."+(+k+1)+".0":te=">="+R+"."+k+"."+L+" <"+(+R+1)+".0.0"),t("caret return",te),te})}function je(d,_){return t("replaceXRanges",d,_),d.split(/\s+/).map(function(S){return Se(S,_)}).join(" ")}function Se(d,_){d=d.trim();var S=_.loose?o[ot]:o[st];return d.replace(S,function(C,R,k,L,Q,te){t("xRange",d,C,R,k,L,Q,te);var Fe=Ze(k),lt=Fe||Ze(L),qe=lt||Ze(Q),it=qe;return R==="="&&it&&(R=""),Fe?R===">"||R==="<"?C="<0.0.0":C="*":R&&it?(lt&&(L=0),Q=0,R===">"?(R=">=",lt?(k=+k+1,L=0,Q=0):(L=+L+1,Q=0)):R==="<="&&(R="<",lt?k=+k+1:L=+L+1),C=R+k+"."+L+"."+Q):lt?C=">="+k+".0.0 <"+(+k+1)+".0.0":qe&&(C=">="+k+"."+L+".0 <"+k+"."+(+L+1)+".0"),t("xRange return",C),C})}function Z(d,_){return t("replaceStars",d,_),d.trim().replace(o[Ne],"")}function et(d,_,S,C,R,k,L,Q,te,Fe,lt,qe,it){return Ze(S)?_="":Ze(C)?_=">="+S+".0.0":Ze(R)?_=">="+S+"."+C+".0":_=">="+_,Ze(te)?Q="":Ze(Fe)?Q="<"+(+te+1)+".0.0":Ze(lt)?Q="<"+te+"."+(+Fe+1)+".0":qe?Q="<="+te+"."+Fe+"."+lt+"-"+qe:Q="<="+Q,(_+" "+Q).trim()}he.prototype.test=function(d){if(!d)return!1;typeof d=="string"&&(d=new ue(d,this.options));for(var _=0;_<this.set.length;_++)if(ze(this.set[_],d,this.options))return!0;return!1};function ze(d,_,S){for(var C=0;C<d.length;C++)if(!d[C].test(_))return!1;if(_.prerelease.length&&!S.includePrerelease){for(C=0;C<d.length;C++)if(t(d[C].semver),d[C].semver!==Le&&d[C].semver.prerelease.length>0){var R=d[C].semver;if(R.major===_.major&&R.minor===_.minor&&R.patch===_.patch)return!0}return!1}return!0}e.satisfies=pe;function pe(d,_,S){try{_=new he(_,S)}catch{return!1}return _.test(d)}e.maxSatisfying=vt;function vt(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===-1)&&(C=L,R=new ue(C,S))}),C}e.minSatisfying=Et;function Et(d,_,S){var C=null,R=null;try{var k=new he(_,S)}catch{return null}return d.forEach(function(L){k.test(L)&&(!C||R.compare(L)===1)&&(C=L,R=new ue(C,S))}),C}e.minVersion=Pt;function Pt(d,_){d=new he(d,_);var S=new ue("0.0.0");if(d.test(S)||(S=new ue("0.0.0-0"),d.test(S)))return S;S=null;for(var C=0;C<d.set.length;++C){var R=d.set[C];R.forEach(function(k){var L=new ue(k.semver.version);switch(k.operator){case">":L.prerelease.length===0?L.patch++:L.prerelease.push(0),L.raw=L.format();case"":case">=":(!S||He(S,L))&&(S=L);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+k.operator)}})}return S&&d.test(S)?S:null}e.validRange=Bt;function Bt(d,_){try{return new he(d,_).range||"*"}catch{return null}}e.ltr=zt;function zt(d,_,S){return nt(d,_,"<",S)}e.gtr=jt;function jt(d,_,S){return nt(d,_,">",S)}e.outside=nt;function nt(d,_,S,C){d=new ue(d,C),_=new he(_,C);var R,k,L,Q,te;switch(S){case">":R=He,k=Ye,L=We,Q=">",te=">=";break;case"<":R=We,k=Oe,L=He,Q="<",te="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(pe(d,_,C))return!1;for(var Fe=0;Fe<_.set.length;++Fe){var lt=_.set[Fe],qe=null,it=null;if(lt.forEach(function(dt){dt.semver===Le&&(dt=new we(">=0.0.0")),qe=qe||dt,it=it||dt,R(dt.semver,qe.semver,C)?qe=dt:L(dt.semver,it.semver,C)&&(it=dt)}),qe.operator===Q||qe.operator===te||(!it.operator||it.operator===Q)&&k(d,it.semver)||it.operator===te&&L(d,it.semver))return!1}return!0}e.prerelease=Ct;function Ct(d,_){var S=At(d,_);return S&&S.prerelease.length?S.prerelease:null}e.intersects=ct;function ct(d,_,S){return d=new he(d,S),_=new he(_,S),d.intersects(_)}e.coerce=mt;function mt(d){if(d instanceof ue)return d;if(typeof d!="string")return null;var _=d.match(o[Dt]);return _==null?null:At(_[1]+"."+(_[2]||"0")+"."+(_[3]||"0"))}}),Wv=x((e,i)=>{var t=ka().wrap,n=1<<0,u=1<<1,a=1<<2,o=1<<3,r=[],s=0,l=!1,f=[],c,p;function v(G,B){var Y=G.length,ne=B.length,ye=[];if(Y===0&&ne===0)return ye;for(var Re=0;Re<Y;Re++)ye[Re]=G[Re];if(ne===0)return ye;for(var st=0;st<ne;st++){var ot=!0;for(Re=0;Re<Y;Re++)if(G[Re].uid===B[st].uid){ot=!1;break}ot&&ye.push(B[st])}return ye}process._fatalException?(m=!1,c=function(G){var B=r.length;if(m||B===0)return!1;var Y=!1;m=!0;for(var ne=0;ne<B;++ne){var ye=r[ne];if((ye.flags&o)!==0){var Re=g&&g[ye.uid];Y=ye.error(Re,G)||Y}}return m=!1,f.length>0&&(r=f.pop()),g=void 0,Y&&!l},p=function(G,B,Y){var ne=[];l=!0;for(var ye=0;ye<Y;++ye){var Re=B[ye];if(ne[Re.uid]=Re.data,(Re.flags&n)!==0){var st=Re.create(Re.data);st!==void 0&&(ne[Re.uid]=st)}}return l=!1,function(){g=ne,f.push(r),r=v(B,r),l=!0;for(var ot=0;ot<Y;++ot)(B[ot].flags&u)>0&&B[ot].before(this,ne[B[ot].uid]);l=!1;var Dt=G.apply(this,arguments);for(l=!0,ot=0;ot<Y;++ot)(B[ot].flags&a)>0&&B[ot].after(this,ne[B[ot].uid]);return l=!1,r=f.pop(),g=void 0,Dt}},t(process,"_fatalException",function(G){return function(B){return c(B)||G(B)}})):(E=!1,c=function(G){if(E)throw G;for(var B=!1,Y=r.length,ne=0;ne<Y;++ne){var ye=r[ne];(ye.flags&o)!==0&&(B=ye.error(null,G)||B)}if(!B&&l)throw G},p=function(G,B,Y){var ne=[];l=!0;for(var ye=0;ye<Y;++ye){var Re=B[ye];if(ne[Re.uid]=Re.data,(Re.flags&n)!==0){var st=Re.create(Re.data);st!==void 0&&(ne[Re.uid]=st)}}return l=!1,function(){var ot=!1,Dt=!1;f.push(r),r=v(B,r),l=!0;for(var at=0;at<Y;++at)(B[at].flags&u)>0&&B[at].before(this,ne[B[at].uid]);l=!1;var oe;try{oe=G.apply(this,arguments)}catch(ge){ot=!0;for(var at=0;at<Y;++at)if((r[at].flags&o)!=0)try{Dt=r[at].error(ne[B[at].uid],ge)||Dt}catch(Ue){throw E=!0,Ue}if(!Dt)throw process.removeListener("uncaughtException",c),process._originalNextTick(function(){process.addListener("uncaughtException",c)}),ge}finally{if(!ot||Dt){for(l=!0,at=0;at<Y;++at)(B[at].flags&a)>0&&B[at].after(this,ne[B[at].uid]);l=!1}r=f.pop()}return oe}},process.addListener("uncaughtException",c));var m,g,E;function T(G,B,Y){l=!0;for(var ne=0;ne<Y;++ne){var ye=B[ne];ye.create&&ye.create(ye.data)}return l=!1,function(){f.push(r),r=v(B,r);var Re=G.apply(this,arguments);return r=f.pop(),Re}}function O(G){var B=r.length;if(B===0)return G;for(var Y=r.slice(),ne=0;ne<B;++ne)if(Y[ne].flags>0)return p(G,Y,B);return T(G,Y,B)}function P(G,B){typeof G.create=="function"&&(this.create=G.create,this.flags|=n),typeof G.before=="function"&&(this.before=G.before,this.flags|=u),typeof G.after=="function"&&(this.after=G.after,this.flags|=a),typeof G.error=="function"&&(this.error=G.error,this.flags|=o),this.uid=++s,this.data=B===void 0?null:B}P.prototype.create=void 0,P.prototype.before=void 0,P.prototype.after=void 0,P.prototype.error=void 0,P.prototype.data=void 0,P.prototype.uid=0,P.prototype.flags=0;function A(G,B){if(typeof G!="object"||!G)throw new TypeError("callbacks argument must be an object");return G instanceof P?G:new P(G,B)}function M(G,B){var Y;G instanceof P?Y=G:Y=A(G,B);for(var ne=!1,ye=0;ye<r.length;ye++)if(Y===r[ye]){ne=!0;break}return ne||r.push(Y),Y}function j(G){for(var B=0;B<r.length;B++)if(G===r[B]){r.splice(B,1);break}}process.createAsyncListener=A,process.addAsyncListener=M,process.removeAsyncListener=j,i.exports=O}),Kv=x((e,i)=>{"use strict";i.exports=(t,n)=>class extends t{constructor(u){var a,o;super(s);var r=this;try{u.apply(a,o)}catch(l){o[1](l)}return r;function s(l,f){a=this,o=[c,p];function c(v){return n(r,!1),l(v)}function p(v){return n(r,!1),f(v)}}}}}),Xv=x(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var e=ka(),i=$v(),t=e.wrap,n=e.massWrap,u=Wv(),a=require("util"),o=i.gte(process.version,"6.0.0"),r=i.gte(process.version,"7.0.0"),s=i.gte(process.version,"8.0.0"),l=i.gte(process.version,"11.0.0"),f=require("net");r&&!f._normalizeArgs?f._normalizeArgs=function(oe){if(oe.length===0)return[{},null];var ge=oe[0],le={};typeof ge=="object"&&ge!==null?le=ge:at(ge)?le.path=ge:(le.port=ge,oe.length>1&&typeof oe[1]=="string"&&(le.host=oe[1]));var Ue=oe[oe.length-1];return typeof Ue!="function"?[le,null]:[le,Ue]}:!r&&!f._normalizeConnectArgs&&(f._normalizeConnectArgs=function(oe){var ge={};function le(X){return(X=Number(X))>=0?X:!1}typeof oe[0]=="object"&&oe[0]!==null?ge=oe[0]:typeof oe[0]=="string"&&le(oe[0])===!1?ge.path=oe[0]:(ge.port=oe[0],typeof oe[1]=="string"&&(ge.host=oe[1]));var Ue=oe[oe.length-1];return typeof Ue=="function"?[ge,Ue]:[ge]}),"_setUpListenHandle"in f.Server.prototype?t(f.Server.prototype,"_setUpListenHandle",c):t(f.Server.prototype,"_listen2",c);function c(oe){return function(){this.on("connection",function(ge){ge._handle&&(ge._handle.onread=u(ge._handle.onread))});try{return oe.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=u(this._handle.onconnection))}}}function p(oe){if(oe&&oe._handle){var ge=oe._handle;ge._originalOnread||(ge._originalOnread=ge.onread),ge.onread=u(ge._originalOnread)}}t(f.Socket.prototype,"connect",function(oe){return function(){var ge;s&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?ge=arguments[0]:ge=r?f._normalizeArgs(arguments):f._normalizeConnectArgs(arguments),ge[1]&&(ge[1]=u(ge[1]));var le=oe.apply(this,ge);return p(this),le}});var v=require("http");t(v.Agent.prototype,"addRequest",function(oe){return function(ge){var le=ge.onSocket;return ge.onSocket=u(function(Ue){return p(Ue),le.apply(this,arguments)}),oe.apply(this,arguments)}});var m=require("child_process");function g(oe){Array.isArray(oe.stdio)&&oe.stdio.forEach(function(ge){ge&&ge._handle&&(ge._handle.onread=u(ge._handle.onread),t(ge._handle,"close",ot))}),oe._handle&&(oe._handle.onexit=u(oe._handle.onexit))}m.ChildProcess?t(m.ChildProcess.prototype,"spawn",function(oe){return function(){var ge=oe.apply(this,arguments);return g(this),ge}}):n(m,["execFile","fork","spawn"],function(oe){return function(){var ge=oe.apply(this,arguments);return g(ge),ge}}),process._fatalException||(process._originalNextTick=process.nextTick);var E=[];process._nextDomainTick&&E.push("_nextDomainTick"),process._tickDomainCallback&&E.push("_tickDomainCallback"),n(process,E,st),t(process,"nextTick",ot);var T=["setTimeout","setInterval"];global.setImmediate&&T.push("setImmediate");var O=require("timers"),P=global.setTimeout===O.setTimeout;n(O,T,ot),P&&n(global,T,ot);var A=require("dns");n(A,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],st),A.resolveNaptr&&t(A,"resolveNaptr",st);var M=require("fs");n(M,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],st),M.lchown&&t(M,"lchown",st),M.lchmod&&t(M,"lchmod",st),M.ftruncate&&t(M,"ftruncate",st);var j;try{j=require("zlib")}catch{}j&&j.Deflate&&j.Deflate.prototype&&(G=Object.getPrototypeOf(j.Deflate.prototype),G._transform?t(G,"_transform",st):G.write&&G.flush&&G.end&&n(G,["write","flush","end"],st));var G,B;try{B=require("crypto")}catch{}B&&(Y=["pbkdf2","randomBytes"],l||Y.push("pseudoRandomBytes"),n(B,Y,st));var Y,ne=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";ne&&(ye=process.addAsyncListener({create:function(){ne=!1}}),global.Promise.resolve(!0).then(function(){ne=!1}),process.removeAsyncListener(ye));var ye;ne&&Re();function Re(){var oe=global.Promise;function ge(se){if(!(this instanceof ge))return oe(se);if(typeof se!="function")return new oe(se);var $e,rt,W=new oe(ee);W.__proto__=ge.prototype;try{se.apply($e,rt)}catch(re){rt[1](re)}return W;function ee(re,ve){$e=this,rt=[Ve,Ae];function Ve(Ne){return Ue(W,!1),re(Ne)}function Ae(Ne){return Ue(W,!1),ve(Ne)}}}if(a.inherits(ge,oe),t(oe.prototype,"then",Ee),oe.prototype.chain&&t(oe.prototype,"chain",Ee),o)global.Promise=Kv()(oe,Ue);else{var le=["all","race","reject","resolve","accept","defer"];le.forEach(function(se){typeof oe[se]=="function"&&(ge[se]=oe[se])}),global.Promise=ge}function Ue(se,$e){(!se.__asl_wrapper||$e)&&(se.__asl_wrapper=u(X))}function X(se,$e,rt,W){var ee;try{return ee=$e.call(se,rt),{returnVal:ee,error:!1}}catch(re){return{errorVal:re,error:!0}}finally{ee instanceof oe?W.__asl_wrapper=function(){var re=ee.__asl_wrapper||X;return re.apply(this,arguments)}:Ue(W,!0)}}function Ee(se){return function(){var $e=this,rt=se.apply($e,Array.prototype.map.call(arguments,W));return rt.__asl_wrapper=function(ee,re,ve,Ve){return $e.__asl_wrapper?($e.__asl_wrapper(ee,function(){},null,rt),rt.__asl_wrapper(ee,re,ve,Ve)):X(ee,re,ve,Ve)},rt;function W(ee){return typeof ee!="function"?ee:u(function(re){var ve=($e.__asl_wrapper||X)(this,ee,re,rt);if(ve.error)throw ve.errorVal;return ve.returnVal})}}}}function st(oe){var ge=function(){var le,Ue=arguments.length-1;if(typeof arguments[Ue]=="function"){le=Array(arguments.length);for(var X=0;X<arguments.length-1;X++)le[X]=arguments[X];le[Ue]=u(arguments[Ue])}return oe.apply(this,le||arguments)};switch(oe.length){case 1:return function(le){return arguments.length!==1?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le))};case 2:return function(le,Ue){return arguments.length!==2?ge.apply(this,arguments):(typeof Ue=="function"&&(Ue=u(Ue)),oe.call(this,le,Ue))};case 3:return function(le,Ue,X){return arguments.length!==3?ge.apply(this,arguments):(typeof X=="function"&&(X=u(X)),oe.call(this,le,Ue,X))};case 4:return function(le,Ue,X,Ee){return arguments.length!==4?ge.apply(this,arguments):(typeof Ee=="function"&&(Ee=u(Ee)),oe.call(this,le,Ue,X,Ee))};case 5:return function(le,Ue,X,Ee,se){return arguments.length!==5?ge.apply(this,arguments):(typeof se=="function"&&(se=u(se)),oe.call(this,le,Ue,X,Ee,se))};case 6:return function(le,Ue,X,Ee,se,$e){return arguments.length!==6?ge.apply(this,arguments):(typeof $e=="function"&&($e=u($e)),oe.call(this,le,Ue,X,Ee,se,$e))};default:return ge}}function ot(oe){var ge=function(){var le;if(typeof arguments[0]=="function"){le=Array(arguments.length),le[0]=u(arguments[0]);for(var Ue=1;Ue<arguments.length;Ue++)le[Ue]=arguments[Ue]}return oe.apply(this,le||arguments)};switch(oe.length){case 1:return function(le){return arguments.length!==1?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le))};case 2:return function(le,Ue){return arguments.length!==2?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue))};case 3:return function(le,Ue,X){return arguments.length!==3?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X))};case 4:return function(le,Ue,X,Ee){return arguments.length!==4?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X,Ee))};case 5:return function(le,Ue,X,Ee,se){return arguments.length!==5?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X,Ee,se))};case 6:return function(le,Ue,X,Ee,se,$e){return arguments.length!==6?ge.apply(this,arguments):(typeof le=="function"&&(le=u(le)),oe.call(this,le,Ue,X,Ee,se,$e))};default:return ge}}function Dt(oe){return(oe=Number(oe))>=0?oe:!1}function at(oe){return typeof oe=="string"&&Dt(oe)===!1}}),Qv=x((e,i)=>{"use strict";var t=require("assert"),n=La(),u="cls@contexts",a="error@context";process.addAsyncListener||Xv();function o(c){this.name=c,this.active=null,this._set=[],this.id=null}o.prototype.set=function(c,p){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[c]=p,p},o.prototype.get=function(c){if(this.active)return this.active[c]},o.prototype.createContext=function(){return Object.create(this.active)},o.prototype.run=function(c){var p=this.createContext();this.enter(p);try{return c(p),p}catch(v){throw v&&(v[a]=p),v}finally{this.exit(p)}},o.prototype.runAndReturn=function(c){var p;return this.run(function(v){p=c(v)}),p},o.prototype.bind=function(c,p){p||(this.active?p=this.active:p=this.createContext());var v=this;return function(){v.enter(p);try{return c.apply(this,arguments)}catch(m){throw m&&(m[a]=p),m}finally{v.exit(p)}}},o.prototype.enter=function(c){t.ok(c,"context must be provided for entering"),this._set.push(this.active),this.active=c},o.prototype.exit=function(c){if(t.ok(c,"context must be provided for exiting"),this.active===c){t.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var p=this._set.lastIndexOf(c);t.ok(p>=0,"context not currently entered; can't exit"),t.ok(p,"can't remove top context"),this._set.splice(p,1)},o.prototype.bindEmitter=function(c){t.ok(c.on&&c.addListener&&c.emit,"can only bind real EEs");var p=this,v="context@"+this.name;function m(E){!E||(E[u]||(E[u]=Object.create(null)),E[u][v]={namespace:p,context:p.active})}function g(E){if(!(E&&E[u]))return E;var T=E,O=E[u];return Object.keys(O).forEach(function(P){var A=O[P];T=A.namespace.bind(T,A.context)}),T}n(c,m,g)},o.prototype.fromException=function(c){return c[a]};function r(c){return process.namespaces[c]}function s(c){t.ok(c,"namespace must be given a name!");var p=new o(c);return p.id=process.addAsyncListener({create:function(){return p.active},before:function(v,m){m&&p.enter(m)},after:function(v,m){m&&p.exit(m)},error:function(v){v&&p.exit(v)}}),process.namespaces[c]=p,p}function l(c){var p=r(c);t.ok(p,"can't delete nonexistent namespace!"),t.ok(p.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(p.id),process.namespaces[c]=null}function f(){process.namespaces&&Object.keys(process.namespaces).forEach(function(c){l(c)}),process.namespaces=Object.create(null)}process.namespaces||f(),i.exports={getNamespace:r,createNamespace:s,destroyNamespace:l,reset:f}}),qn=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CorrelationContextManager=void 0;var i=mr(),t=Ma(),n=ro(),u=ml(),a=Sl(),o=function(){function s(){}return s.getCurrentContext=function(){if(!s.enabled)return null;var l=s.session.get(s.CONTEXT_NAME);return l===void 0?null:l},s.generateContextObject=function(l,f,c,p,v,m){return f=f||l,this.enabled?{operation:{name:c,id:l,parentId:f,traceparent:v,tracestate:m},customProperties:new r(p)}:null},s.spanToContextObject=function(l,f,c){var p=new n;return p.traceId=l.traceId,p.spanId=l.spanId,p.traceFlag=n.formatOpenTelemetryTraceFlags(l.traceFlags)||n.DEFAULT_TRACE_FLAG,p.parentId=f,s.generateContextObject(p.traceId,p.parentId,c,null,p)},s.runWithContext=function(l,f){var c;return s.enabled?s.session.bind(f,(c={},c[s.CONTEXT_NAME]=l,c))():f()},s.wrapEmitter=function(l){s.enabled&&s.session.bindEmitter(l)},s.wrapCallback=function(l,f){var c;return s.enabled?s.session.bind(l,f?(c={},c[s.CONTEXT_NAME]=f,c):void 0):l},s.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}s.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls>"u"&&(s.forceClsHooked===!0||s.forceClsHooked===void 0&&s.shouldUseClsHooked()?this.cls=zv():this.cls=Qv()),s.session=this.cls.createNamespace("AI-CLS-Session"),t.registerContextPreservation(function(f){return s.session.bind(f)})),this.enabled=!0}},s.startOperation=function(l,f){var c=l&&l.traceContext||null,p=l&&l.traceId?l:null,v=l&&l.headers;if(p){var m=new n("00-"+p.traceId+"-"+p.spanId+"-01"),g=new u(p.traceState?p.traceState.serialize():null),E=s.generateContextObject(p.traceId,"|"+p.traceId+"."+p.spanId+".",typeof f=="string"?f:"",void 0,m,g);return E}if(c){var m=new n(c.traceparent),g=new u(c.tracestate),T=typeof f=="object"?new a(f):null,E=s.generateContextObject(m.traceId,m.parentId,typeof f=="string"?f:T.getOperationName({}),T&&T.getCorrelationContextHeader()||void 0,m,g);return E}if(v){var m=new n(v.traceparent?v.traceparent.toString():null),g=new u(v.tracestate?v.tracestate.toString():null),T=new a(l),E=s.generateContextObject(m.traceId,m.parentId,T.getOperationName({}),T.getCorrelationContextHeader(),m,g);return E}return i.warn("startOperation was called with invalid arguments",arguments),null},s.disable=function(){this.enabled=!1},s.reset=function(){s.hasEverEnabled&&(s.session=null,s.session=this.cls.createNamespace("AI-CLS-Session"))},s.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},s.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},s.canUseClsHooked=function(){var l=process.versions.node.split("."),f=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,c=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,p=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(f&&c)&&p},s.enabled=!1,s.hasEverEnabled=!1,s.forceClsHooked=void 0,s.CONTEXT_NAME="ApplicationInsights-Context",s}();e.CorrelationContextManager=o;var r=function(){function s(l){this.props=[],this.addHeaderData(l)}return s.prototype.addHeaderData=function(l){var f=l?l.split(", "):[];this.props=f.map(function(c){var p=c.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},s.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},s.prototype.getProperty=function(l){for(var f=0;f<this.props.length;++f){var c=this.props[f];if(c.key===l)return c.value}},s.prototype.setProperty=function(l,f){if(s.bannedCharacters.test(l)||s.bannedCharacters.test(f)){i.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+f);return}for(var c=0;c<this.props.length;++c){var p=this.props[c];if(p.key===l){p.value=f;return}}this.props.push({key:l,value:f})},s.bannedCharacters=/[,=]/,s}()}),Yv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var i=Mr(),t=ur(),n=[],u=function(r){var s=r.data.message;n.forEach(function(l){s instanceof Error?l.trackException({exception:s}):(s.lastIndexOf(`
`)==s.length-1&&(s=s.substring(0,s.length-1)),l.trackTrace({message:s,severity:r.data.stderr?i.SeverityLevel.Warning:i.SeverityLevel.Information}))})};function a(r,s){r?(n.length===0&&t.channel.subscribe("console",u),n.push(s)):(n=n.filter(function(l){return l!=s}),n.length===0&&t.channel.unsubscribe("console",u))}e.enable=a;function o(){t.channel.unsubscribe("console",u),n=[]}e.dispose=o}),Zv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var i=Mr(),t=ur(),n=[],u={10:i.SeverityLevel.Verbose,20:i.SeverityLevel.Verbose,30:i.SeverityLevel.Information,40:i.SeverityLevel.Warning,50:i.SeverityLevel.Error,60:i.SeverityLevel.Critical},a=function(s){var l=s.data.result;n.forEach(function(f){var c=u[s.data.level];l instanceof Error?f.trackException({exception:l}):f.trackTrace({message:l,severity:c})})};function o(s,l){s?(n.length===0&&t.channel.subscribe("bunyan",a),n.push(l)):(n=n.filter(function(f){return f!=l}),n.length===0&&t.channel.unsubscribe("bunyan",a))}e.enable=o;function r(){t.channel.unsubscribe("bunyan",a),n=[]}e.dispose=r}),Jv=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.enable=void 0;var i=Mr(),t=ur(),n=[],u={syslog:function(s){var l={emerg:i.SeverityLevel.Critical,alert:i.SeverityLevel.Critical,crit:i.SeverityLevel.Critical,error:i.SeverityLevel.Error,warning:i.SeverityLevel.Warning,notice:i.SeverityLevel.Information,info:i.SeverityLevel.Information,debug:i.SeverityLevel.Verbose};return l[s]===void 0?i.SeverityLevel.Information:l[s]},npm:function(s){var l={error:i.SeverityLevel.Error,warn:i.SeverityLevel.Warning,info:i.SeverityLevel.Information,verbose:i.SeverityLevel.Verbose,debug:i.SeverityLevel.Verbose,silly:i.SeverityLevel.Verbose};return l[s]===void 0?i.SeverityLevel.Information:l[s]},unknown:function(s){return i.SeverityLevel.Information}},a=function(s){var l=s.data.message;n.forEach(function(f){if(l instanceof Error)f.trackException({exception:l,properties:s.data.meta});else{var c=u[s.data.levelKind](s.data.level);f.trackTrace({message:l,severity:c,properties:s.data.meta})}})};function o(s,l){s?(n.length===0&&t.channel.subscribe("winston",a),n.push(l)):(n=n.filter(function(f){return f!=l}),n.length===0&&t.channel.unsubscribe("winston",a))}e.enable=o;function r(){t.channel.unsubscribe("winston",a),n=[]}e.dispose=r}),em=x((e,i)=>{"use strict";var t=Ma(),n=function(){function u(a){if(u.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=a,u.INSTANCE=this}return u.prototype.enable=function(a,o){t.IsInitialized&&(Yv().enable(a&&o,this._client),Zv().enable(a,this._client),Jv().enable(a,this._client))},u.prototype.isInitialized=function(){return this._isInitialized},u.prototype.dispose=function(){u.INSTANCE=null,this.enable(!1,!1)},u._methodNames=["debug","info","log","warn","error"],u}();i.exports=n}),tm=x((e,i)=>{"use strict";var t=function(){function n(u){if(n.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");n.INSTANCE=this,this._client=u;var a=process.versions.node.split(".");n._canUseUncaughtExceptionMonitor=parseInt(a[0])>13||parseInt(a[0])===13&&parseInt(a[1])>=7}return n.prototype.isInitialized=function(){return this._isInitialized},n.prototype.enable=function(u){var a=this;if(u){this._isInitialized=!0;var o=this;if(!this._exceptionListenerHandle){var r=function(s,l,f){f===void 0&&(f=new Error(n._FALLBACK_ERROR_MESSAGE)),a._client.trackException({exception:f}),a._client.flush({isAppCrashing:!0}),s&&l&&process.listeners(l).length===1&&(console.error(f),process.exit(1))};n._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=r.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=r.bind(this,!0,n.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=r.bind(this,!1,void 0),process.on(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(n._canUseUncaughtExceptionMonitor?process.removeListener(n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(n.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(n.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},n.prototype.dispose=function(){n.INSTANCE=null,this.enable(!1),this._isInitialized=!1},n.INSTANCE=null,n.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",n.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",n.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",n._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",n._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",n._canUseUncaughtExceptionMonitor=!1,n}();i.exports=t}),mn=x(e=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.HeartBeatMetricName=e.DependencyTypeName=e.SpanAttribute=e.TelemetryTypeStringToQuickPulseDocumentType=e.TelemetryTypeStringToQuickPulseType=e.QuickPulseType=e.QuickPulseDocumentType=e.PerformanceToQuickPulseCounter=e.MetricId=e.PerformanceCounter=e.QuickPulseCounter=e.DEFAULT_LIVEMETRICS_HOST=e.DEFAULT_LIVEMETRICS_ENDPOINT=e.DEFAULT_BREEZE_ENDPOINT=void 0,e.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",e.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var t;(function(a){a.COMMITTED_BYTES="\\Memory\\Committed Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",a.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",a.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",a.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",a.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",a.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",a.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(t=e.QuickPulseCounter||(e.QuickPulseCounter={}));var n;(function(a){a.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",a.AVAILABLE_BYTES="\\Memory\\Available Bytes",a.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",a.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",a.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",a.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(n=e.PerformanceCounter||(e.PerformanceCounter={}));var u;(function(a){a.REQUESTS_DURATION="requests/duration",a.DEPENDENCIES_DURATION="dependencies/duration",a.EXCEPTIONS_COUNT="exceptions/count",a.TRACES_COUNT="traces/count"})(u=e.MetricId||(e.MetricId={})),e.PerformanceToQuickPulseCounter=(i={},i[n.PROCESSOR_TIME]=t.PROCESSOR_TIME,i[n.REQUEST_RATE]=t.REQUEST_RATE,i[n.REQUEST_DURATION]=t.REQUEST_DURATION,i[t.COMMITTED_BYTES]=t.COMMITTED_BYTES,i[t.REQUEST_FAILURE_RATE]=t.REQUEST_FAILURE_RATE,i[t.DEPENDENCY_RATE]=t.DEPENDENCY_RATE,i[t.DEPENDENCY_FAILURE_RATE]=t.DEPENDENCY_FAILURE_RATE,i[t.DEPENDENCY_DURATION]=t.DEPENDENCY_DURATION,i[t.EXCEPTION_RATE]=t.EXCEPTION_RATE,i),e.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"},e.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"},e.TelemetryTypeStringToQuickPulseType={EventData:e.QuickPulseType.Event,ExceptionData:e.QuickPulseType.Exception,MessageData:e.QuickPulseType.Trace,MetricData:e.QuickPulseType.Metric,RequestData:e.QuickPulseType.Request,RemoteDependencyData:e.QuickPulseType.Dependency,AvailabilityData:e.QuickPulseType.Availability,PageViewData:e.QuickPulseType.PageView},e.TelemetryTypeStringToQuickPulseDocumentType={EventData:e.QuickPulseDocumentType.Event,ExceptionData:e.QuickPulseDocumentType.Exception,MessageData:e.QuickPulseDocumentType.Trace,MetricData:e.QuickPulseDocumentType.Metric,RequestData:e.QuickPulseDocumentType.Request,RemoteDependencyData:e.QuickPulseDocumentType.Dependency,AvailabilityData:e.QuickPulseDocumentType.Availability,PageViewData:e.QuickPulseDocumentType.PageView},e.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"},e.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"},e.HeartBeatMetricName="HeartBeat"}),ja=x((e,i)=>{"use strict";var t=require("os"),n=mn(),u=function(){function a(o,r,s){r===void 0&&(r=6e4),s===void 0&&(s=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,a.INSTANCE||(a.INSTANCE=this),this._isInitialized=!1,this._client=o,this._collectionInterval=r,this._enableLiveMetricsCounters=s}return a.prototype.enable=function(o,r){var s=this;this._isEnabled=o,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),o?this._handle||(this._lastCpus=t.cpus(),this._lastRequests={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:a._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return s.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},a.countRequest=function(o,r){var s;if(a.isEnabled()){if(typeof o=="string")s=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")s=o;else return;a._intervalRequestExecutionTime+=s,r===!1&&a._totalFailedRequestCount++,a._totalRequestCount++}},a.countException=function(){a._totalExceptionCount++},a.countDependency=function(o,r){var s;if(a.isEnabled()){if(typeof o=="string")s=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")s=o;else return;a._intervalDependencyExecutionTime+=s,r===!1&&a._totalFailedDependencyCount++,a._totalDependencyCount++}},a.prototype.isInitialized=function(){return this._isInitialized},a.isEnabled=function(){return a.INSTANCE&&a.INSTANCE._isEnabled},a.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},a.prototype._trackCpu=function(){var o=t.cpus();if(o&&o.length&&this._lastCpus&&o.length===this._lastCpus.length){for(var r=0,s=0,l=0,f=0,c=0,p=0;!!o&&p<o.length;p++){var v=o[p],m=this._lastCpus[p],g="% cpu("+p+") ",E=v.model,T=v.speed,O=v.times,P=m.times,A=O.user-P.user||0;r+=A;var M=O.sys-P.sys||0;s+=M;var j=O.nice-P.nice||0;l+=j;var G=O.idle-P.idle||0;f+=G;var B=O.irq-P.irq||0;c+=B}var Y=void 0;if(typeof process.cpuUsage=="function"){var ne=process.cpuUsage(),ye=process.hrtime(),Re=ne.user-this._lastAppCpuUsage.user+(ne.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var st=(ye[0]-this._lastHrtime[0])*1e6+(ye[1]-this._lastHrtime[1])/1e3||0;Y=100*Re/(st*o.length)}this._lastAppCpuUsage=ne,this._lastHrtime=ye}var ot=r+s+l+f+c||1;this._client.trackMetric({name:n.PerformanceCounter.PROCESSOR_TIME,value:(ot-f)/ot*100}),this._client.trackMetric({name:n.PerformanceCounter.PROCESS_TIME,value:Y||r/ot*100})}this._lastCpus=o},a.prototype._trackMemory=function(){var o=t.freemem(),r=process.memoryUsage().rss,s=t.totalmem()-o;this._client.trackMetric({name:n.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:n.PerformanceCounter.AVAILABLE_BYTES,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.COMMITTED_BYTES,value:s})},a.prototype._trackNetwork=function(){var o=this._lastRequests,r={totalRequestCount:a._totalRequestCount,totalFailedRequestCount:a._totalFailedRequestCount,time:+new Date},s=r.totalRequestCount-o.totalRequestCount||0,l=r.totalFailedRequestCount-o.totalFailedRequestCount||0,f=r.time-o.time,c=f/1e3,p=(a._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/s||0;if(this._lastIntervalRequestExecutionTime=a._intervalRequestExecutionTime,f>0){var v=s/c,m=l/c;this._client.trackMetric({name:n.PerformanceCounter.REQUEST_RATE,value:v}),(!this._enableLiveMetricsCounters||s>0)&&this._client.trackMetric({name:n.PerformanceCounter.REQUEST_DURATION,value:p}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:n.QuickPulseCounter.REQUEST_FAILURE_RATE,value:m})}this._lastRequests=r},a.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastDependencies,r={totalDependencyCount:a._totalDependencyCount,totalFailedDependencyCount:a._totalFailedDependencyCount,time:+new Date},s=r.totalDependencyCount-o.totalDependencyCount||0,l=r.totalFailedDependencyCount-o.totalFailedDependencyCount||0,f=r.time-o.time,c=f/1e3,p=(a._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/s||0;if(this._lastIntervalDependencyExecutionTime=a._intervalDependencyExecutionTime,f>0){var v=s/c,m=l/c;this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_RATE,value:v}),this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:m}),(!this._enableLiveMetricsCounters||s>0)&&this._client.trackMetric({name:n.QuickPulseCounter.DEPENDENCY_DURATION,value:p})}this._lastDependencies=r}},a.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastExceptions,r={totalExceptionCount:a._totalExceptionCount,time:+new Date},s=r.totalExceptionCount-o.totalExceptionCount||0,l=r.time-o.time,f=l/1e3;if(l>0){var c=s/f;this._client.trackMetric({name:n.QuickPulseCounter.EXCEPTION_RATE,value:c})}this._lastExceptions=r}},a.prototype.dispose=function(){a.INSTANCE=null,this.enable(!1),this._isInitialized=!1},a._totalRequestCount=0,a._totalFailedRequestCount=0,a._totalDependencyCount=0,a._totalFailedDependencyCount=0,a._totalExceptionCount=0,a._intervalDependencyExecutionTime=0,a._intervalRequestExecutionTime=0,a}();i.exports=u}),rm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregatedMetricCounter=void 0;var i=function(){function t(n){this.dimensions=n,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t}();e.AggregatedMetricCounter=i}),nm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PreaggregatedMetricPropertyNames=void 0,e.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}}),Al=x((e,i)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(r){for(var s,l=1,f=arguments.length;l<f;l++){s=arguments[l];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(r[c]=s[c])}return r},t.apply(this,arguments)},n=mn(),u=rm(),a=nm(),o=function(){function r(s,l){l===void 0&&(l=6e4),r.INSTANCE||(r.INSTANCE=this),this._isInitialized=!1,r._dependencyCountersCollection=[],r._requestCountersCollection=[],r._exceptionCountersCollection=[],r._traceCountersCollection=[],this._client=s,this._collectionInterval=l}return r.prototype.enable=function(s,l){var f=this;this._isEnabled=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),s?this._handle||(this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return f.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},r.countException=function(s){if(r.isEnabled()){var l=r._getAggregatedCounter(s,this._exceptionCountersCollection);l.totalCount++}},r.countTrace=function(s){if(r.isEnabled()){var l=r._getAggregatedCounter(s,this._traceCountersCollection);l.totalCount++}},r.countRequest=function(s,l){if(r.isEnabled()){var f,c=r._getAggregatedCounter(l,this._requestCountersCollection);if(typeof s=="string")f=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")f=s;else return;c.intervalExecutionTime+=f,c.totalCount++}},r.countDependency=function(s,l){if(r.isEnabled()){var f=r._getAggregatedCounter(l,this._dependencyCountersCollection),c;if(typeof s=="string")c=+new Date("1970-01-01T"+s+"Z");else if(typeof s=="number")c=s;else return;f.intervalExecutionTime+=c,f.totalCount++}},r.prototype.isInitialized=function(){return this._isInitialized},r.isEnabled=function(){return r.INSTANCE&&r.INSTANCE._isEnabled},r.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},r._getAggregatedCounter=function(s,l){for(var f=!1,c=0;c<l.length;c++){if(s===l[c].dimensions)return l[c];if(Object.keys(s).length===Object.keys(l[c].dimensions).length){for(var p in s)if(s[p]!=l[c].dimensions[p]){f=!0;break}if(!f)return l[c];f=!1}}var v=new u.AggregatedMetricCounter(s);return l.push(v),v},r.prototype._trackRequestMetrics=function(){for(var s=0;s<r._requestCountersCollection.length;s++){var l=r._requestCountersCollection[s];l.time=+new Date;var f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/f||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,c>0&&f>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:l.dimensions,value:p,count:f,aggregationInterval:c,metricType:n.MetricId.REQUESTS_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},r.prototype._trackDependencyMetrics=function(){for(var s=0;s<r._dependencyCountersCollection.length;s++){var l=r._dependencyCountersCollection[s];l.time=+new Date;var f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime,p=(l.intervalExecutionTime-l.lastIntervalExecutionTime)/f||0;l.lastIntervalExecutionTime=l.intervalExecutionTime,c>0&&f>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:l.dimensions,value:p,count:f,aggregationInterval:c,metricType:n.MetricId.DEPENDENCIES_DURATION}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},r.prototype._trackExceptionMetrics=function(){for(var s=0;s<r._exceptionCountersCollection.length;s++){var l=r._exceptionCountersCollection[s],f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:l.dimensions,value:f,count:f,aggregationInterval:c,metricType:n.MetricId.EXCEPTIONS_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},r.prototype._trackTraceMetrics=function(){for(var s=0;s<r._traceCountersCollection.length;s++){var l=r._traceCountersCollection[s],f=l.totalCount-l.lastTotalCount||0,c=l.time-l.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:l.dimensions,value:f,count:f,aggregationInterval:c,metricType:n.MetricId.TRACES_COUNT}),l.lastTotalCount=l.totalCount,l.lastTime=l.time}},r.prototype._trackPreAggregatedMetric=function(s){var l={};for(var f in s.dimensions)l[a.PreaggregatedMetricPropertyNames[f]]=s.dimensions[f];l=t(t({},l),{"_MS.MetricId":s.metricType,"_MS.AggregationIntervalMs":String(s.aggregationInterval),"_MS.IsAutocollected":"True"});var c={name:s.name,value:s.value,count:s.count,properties:l,kind:"Aggregation"};this._client.trackMetric(c)},r.prototype.dispose=function(){r.INSTANCE=null,this.enable(!1),this._isInitialized=!1},r}();i.exports=o}),no=x((e,i)=>{"use strict";var t=require("os"),n=require("fs"),u=require("path"),a=Mr(),o=mr(),r=function(){function s(l){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(l),this._loadDeviceContext(),this._loadInternalContext()}return s.prototype._loadApplicationContext=function(l){if(l=l||u.resolve(__dirname,"../../../../package.json"),!s.appVersion[l]){s.appVersion[l]="unknown";try{var f=JSON.parse(n.readFileSync(l,"utf8"));f&&typeof f.version=="string"&&(s.appVersion[l]=f.version)}catch(c){o.info("unable to read app version: ",c)}}this.tags[this.keys.applicationVersion]=s.appVersion[l]},s.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=t&&t.hostname(),this.tags[this.keys.deviceOSVersion]=t&&t.type()+" "+t.release(),this.tags[this.keys.cloudRole]=s.DefaultRoleName,this.tags["ai.device.osArchitecture"]=t&&t.arch(),this.tags["ai.device.osPlatform"]=t&&t.platform()},s.prototype._loadInternalContext=function(){var l=u.resolve(__dirname,"../../package.json");if(!s.sdkVersion){s.sdkVersion="unknown";try{var f=JSON.parse(n.readFileSync(l,"utf8"));f&&typeof f.version=="string"&&(s.sdkVersion=f.version)}catch(c){o.info("unable to read app version: ",c)}}this.tags[this.keys.internalSdkVersion]="node:"+s.sdkVersion},s.DefaultRoleName="Web",s.appVersion={},s.sdkVersion=null,s}();i.exports=r}),im=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var f=function(c,p){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(v[g]=m[g])},f(c,p)};return function(c,p){f(c,p);function v(){this.constructor=c}c.prototype=p===null?Object.create(p):(v.prototype=p.prototype,new v)}}(),n=require("url"),u=Mr(),a=Ur(),o=pi(),r=bl(),s=Hn(),l=function(f){t(c,f);function c(p,v){var m=f.call(this)||this;return v&&v.method&&p&&(m.method=v.method,m.url=c._getUrlFromRequestOptions(p,v),m.startTime=+new Date),m}return c.prototype.onError=function(p){this._setStatus(void 0,p)},c.prototype.onResponse=function(p){this._setStatus(p.statusCode,void 0),this.correlationId=a.getCorrelationContextTarget(p,o.requestContextTargetKey)},c.prototype.getDependencyTelemetry=function(p,v){var m=n.parse(this.url);m.search=void 0,m.hash=void 0;var g=this.method.toUpperCase()+" "+m.pathname,E=u.RemoteDependencyDataConstants.TYPE_HTTP,T=m.hostname;m.port&&(T+=":"+m.port),this.correlationId?(E=u.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==s.correlationIdPrefix&&(T+=" | "+this.correlationId)):E=u.RemoteDependencyDataConstants.TYPE_HTTP;var O={id:v,name:g,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:E,target:T};if(p&&p.time?O.time=p.time:this.startTime&&(O.time=new Date(this.startTime)),p){for(var P in p)O[P]||(O[P]=p[P]);if(p.properties)for(var P in p.properties)O.properties[P]=p.properties[P]}return O},c._getUrlFromRequestOptions=function(p,v){if(typeof p=="string")if(p.indexOf("http://")===0||p.indexOf("https://")===0)p=n.parse(p);else{var m=n.parse(p);m.host==="443"?p=n.parse("https://"+p):p=n.parse("http://"+p)}else{if(p&&typeof n.URL=="function"&&p instanceof n.URL)return n.format(p);var g=p;p={},g&&Object.keys(g).forEach(function(O){p[O]=g[O]})}if(p.path){var E=n.parse(p.path);p.pathname=E.pathname,p.search=E.search}if(p.host&&p.port){var T=n.parse("http://"+p.host);!T.port&&p.port&&(p.hostname=p.host,delete p.host)}return p.protocol=p.protocol||v.agent&&v.agent.protocol||v.protocol||void 0,p.hostname=p.hostname||"localhost",n.format(p)},c}(r);i.exports=l}),om=x(e=>{"use strict";var i=e&&e.__assign||function(){return i=Object.assign||function(o){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(o[f]=r[f])}return o},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.spanToTelemetryContract=void 0;var t=Jt(),n=mn();function u(o){var r=i({},o);return Object.keys(n.SpanAttribute).forEach(function(s){delete r[s]}),r}function a(o){var r="|"+o.spanContext().traceId+"."+o.spanContext().spanId+".",s=Math.round(o._duration[0]*1e3+o._duration[1]/1e6),l=o.attributes["peer.address"]?o.attributes["peer.address"].toString():"",f=o.attributes.component?o.attributes.component.toString():"",c=f.toUpperCase()===n.DependencyTypeName.Http||!!o.attributes[n.SpanAttribute.HttpUrl],p=f.toLowerCase()===n.DependencyTypeName.Grpc;if(c){var v=o.attributes[n.SpanAttribute.HttpMethod]||"GET",m=new URL(o.attributes[n.SpanAttribute.HttpUrl].toString()),g=o.attributes[n.SpanAttribute.HttpHost]||m.host,E=o.attributes[n.SpanAttribute.HttpPort]||m.port||null,T=m.pathname||"/",O=v+" "+T,P=n.DependencyTypeName.Http,A=E?(g+":"+E).toString():g.toString(),M=m.toString(),j=o.attributes[n.SpanAttribute.HttpStatusCode]||o.status.code||0,G=j<400;return{id:r,name:O,dependencyTypeName:P,target:A,data:M,success:G,duration:s,url:M,resultCode:String(j),properties:u(o.attributes)}}else if(p){var v=o.attributes[n.SpanAttribute.GrpcMethod]||"rpc",B=o.attributes[n.SpanAttribute.GrpcService],Y=B?v+" "+B:o.name;return{id:r,duration:s,name:Y,target:B.toString(),data:B.toString()||Y,url:B.toString()||Y,dependencyTypeName:n.DependencyTypeName.Grpc,resultCode:String(o.status.code||0),success:o.status.code===0,properties:u(o.attributes)}}else{var ne=o.name,ye=o.links&&o.links.map(function(Re){return{operation_Id:Re.context.traceId,id:Re.context.spanId}});return{id:r,duration:s,name:ne,target:l,data:l||ne,url:l||ne,dependencyTypeName:o.kind===t.SpanKind.INTERNAL?n.DependencyTypeName.InProc:f||o.name,resultCode:String(o.status.code||0),success:o.status.code===0,properties:i(i({},u(o.attributes)),{"_MS.links":ye||void 0})}}}e.spanToTelemetryContract=a}),am=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var i=Jt(),t=ur(),n=ro(),u=om(),a=Gc(),o=[],r=function(l){var f=l.data,c=u.spanToTelemetryContract(f),p=f.spanContext(),v=new n;v.traceId=p.traceId,v.spanId=p.spanId,v.traceFlag=n.formatOpenTelemetryTraceFlags(p.traceFlags),v.parentId=f.parentSpanId?"|"+p.traceId+"."+f.parentSpanId+".":null,a.AsyncScopeManager.with(f,function(){o.forEach(function(m){f.kind===i.SpanKind.SERVER?m.trackRequest(c):(f.kind===i.SpanKind.CLIENT||f.kind===i.SpanKind.INTERNAL)&&m.trackDependency(c)})})};e.subscriber=r;function s(l,f){l?(o.length===0&&t.channel.subscribe("azure-coretracing",e.subscriber),o.push(f)):(o=o.filter(function(c){return c!=f}),o.length===0&&t.channel.unsubscribe("azure-coretracing",e.subscriber))}e.enable=s}),sm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var i=ur(),t=[],n=function(a){a.data.event.commandName!=="ismaster"&&t.forEach(function(o){var r=a.data.startedData&&a.data.startedData.databaseName||"Unknown database";o.trackDependency({target:r,data:a.data.event.commandName,name:a.data.event.commandName,duration:a.data.event.duration,success:a.data.succeeded,resultCode:a.data.succeeded?"0":"1",time:a.data.startedData.time,dependencyTypeName:"mongodb"})})};e.subscriber=n;function u(a,o){a?(t.length===0&&i.channel.subscribe("mongodb",e.subscriber),t.push(o)):(t=t.filter(function(r){return r!=o}),t.length===0&&i.channel.unsubscribe("mongodb",e.subscriber))}e.enable=u}),um=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var i=ur(),t=[],n=function(a){t.forEach(function(o){var r=a.data.query||{},s=r.sql||"Unknown query",l=!a.data.err,f=r._connection||{},c=f.config||{},p=c.socketPath?c.socketPath:(c.host||"localhost")+":"+c.port;o.trackDependency({target:p,data:s,name:s,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"mysql"})})};e.subscriber=n;function u(a,o){a?(t.length===0&&i.channel.subscribe("mysql",e.subscriber),t.push(o)):(t=t.filter(function(r){return r!=o}),t.length===0&&i.channel.unsubscribe("mysql",e.subscriber))}e.enable=u}),cm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var i=ur(),t=[],n=function(a){t.forEach(function(o){a.data.commandObj.command!=="info"&&o.trackDependency({target:a.data.address,name:a.data.commandObj.command,data:a.data.commandObj.command,duration:a.data.duration,success:!a.data.err,resultCode:a.data.err?"1":"0",time:a.data.time,dependencyTypeName:"redis"})})};e.subscriber=n;function u(a,o){a?(t.length===0&&i.channel.subscribe("redis",e.subscriber),t.push(o)):(t=t.filter(function(r){return r!=o}),t.length===0&&i.channel.unsubscribe("redis",e.subscriber))}e.enable=u}),lm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.enable=e.subscriber=void 0;var i=ur(),t=[],n=function(a){t.forEach(function(o){var r=a.data.query,s=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",l=!a.data.error,f=a.data.database.host+":"+a.data.database.port;o.trackDependency({target:f,data:s,name:s,duration:a.data.duration,success:l,resultCode:l?"0":"1",time:a.data.time,dependencyTypeName:"postgres"})})};e.subscriber=n;function u(a,o){a?(t.length===0&&i.channel.subscribe("postgres",e.subscriber),t.push(o)):(t=t.filter(function(r){return r!=o}),t.length===0&&i.channel.unsubscribe("postgres",e.subscriber))}e.enable=u}),hi=x((e,i)=>{"use strict";var t=e&&e.__spreadArrays||function(){for(var m=0,g=0,E=arguments.length;g<E;g++)m+=arguments[g].length;for(var T=Array(m),O=0,g=0;g<E;g++)for(var P=arguments[g],A=0,M=P.length;A<M;A++,O++)T[O]=P[A];return T},n=require("http"),u=require("https"),a=mr(),o=Ur(),r=pi(),s=im(),l=qn(),f=Hn(),c=ro(),p=Ma(),v=function(){function m(g){if(m.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");m.INSTANCE=this,this._client=g}return m.prototype.enable=function(g){this._isEnabled=g,this._isEnabled&&!this._isInitialized&&this._initialize(),p.IsInitialized&&(am().enable(!0,this._client),sm().enable(g,this._client),um().enable(g,this._client),cm().enable(g,this._client),lm().enable(g,this._client))},m.prototype.isInitialized=function(){return this._isInitialized},m.prototype._initialize=function(){var g=this;this._isInitialized=!0;var E=n.request,T=u.request,O=function(P,A){var M=!A[m.disableCollectionRequestOption]&&!P[m.alreadyAutoCollectedFlag];A.headers&&A.headers["user-agent"]&&A.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(M=!1),P[m.alreadyAutoCollectedFlag]=!0,P&&A&&M&&(l.CorrelationContextManager.wrapEmitter(P),m.trackRequest(g._client,{options:A,request:P}))};n.request=function(P){for(var A=[],M=1;M<arguments.length;M++)A[M-1]=arguments[M];var j=E.call.apply(E,t([n,P],A));return O(j,P),j},u.request=function(P){for(var A=[],M=1;M<arguments.length;M++)A[M-1]=arguments[M];var j=T.call.apply(T,t([u,P],A));return O(j,P),j},n.get=function(P){for(var A,M=[],j=1;j<arguments.length;j++)M[j-1]=arguments[j];var G=(A=n.request).call.apply(A,t([n,P],M));return G.end(),G},u.get=function(P){for(var A,M=[],j=1;j<arguments.length;j++)M[j-1]=arguments[j];var G=(A=u.request).call.apply(A,t([u,P],M));return G.end(),G}},m.trackRequest=function(g,E){if(!E.options||!E.request||!g){a.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!E.options,!E.request,!g);return}var T=new s(E.options,E.request),O=l.CorrelationContextManager.getCurrentContext(),P,A;if(O&&O.operation&&O.operation.traceparent&&c.isValidTraceId(O.operation.traceparent.traceId))O.operation.traceparent.updateSpanId(),P=O.operation.traceparent.getBackCompatRequestId();else if(f.w3cEnabled){var M=new c;A=M.toString(),P=M.getBackCompatRequestId()}else P=O&&O.operation&&O.operation.parentId+m.requestNumber+++".";if(o.canIncludeCorrelationHeader(g,T.getUrl())&&E.request.getHeader&&E.request.setHeader&&g.config&&g.config.correlationId){var j=E.request.getHeader(r.requestContextHeader);try{o.safeIncludeCorrelationHeader(g,E.request,j)}catch(Y){a.warn("Request-Context header could not be set. Correlation of requests may be lost",Y)}if(O&&O.operation)try{if(E.request.setHeader(r.requestIdHeader,P),g.config.ignoreLegacyHeaders||(E.request.setHeader(r.parentIdHeader,O.operation.id),E.request.setHeader(r.rootIdHeader,P)),A||O.operation.traceparent)E.request.setHeader(r.traceparentHeader,A||O.operation.traceparent.toString());else if(f.w3cEnabled){var M=new c().toString();E.request.setHeader(r.traceparentHeader,M)}if(O.operation.tracestate){var G=O.operation.tracestate.toString();G&&E.request.setHeader(r.traceStateHeader,G)}var B=O.customProperties.serializeToHeader();B&&E.request.setHeader(r.correlationContextHeader,B)}catch(Y){a.warn("Correlation headers could not be set. Correlation of requests may be lost.",Y)}}E.request.on&&(E.request.on("response",function(Y){T.onResponse(Y);var ne=T.getDependencyTelemetry(E,P);ne.contextObjects=ne.contextObjects||{},ne.contextObjects["http.RequestOptions"]=E.options,ne.contextObjects["http.ClientRequest"]=E.request,ne.contextObjects["http.ClientResponse"]=Y,g.trackDependency(ne)}),E.request.on("error",function(Y){T.onError(Y);var ne=T.getDependencyTelemetry(E,P);ne.contextObjects=ne.contextObjects||{},ne.contextObjects["http.RequestOptions"]=E.options,ne.contextObjects["http.ClientRequest"]=E.request,ne.contextObjects.Error=Y,g.trackDependency(ne)}),E.request.on("abort",function(){T.onError(new Error);var Y=T.getDependencyTelemetry(E,P);Y.contextObjects=Y.contextObjects||{},Y.contextObjects["http.RequestOptions"]=E.options,Y.contextObjects["http.ClientRequest"]=E.request,g.trackDependency(Y)}))},m.prototype.dispose=function(){m.INSTANCE=null,this.enable(!1),this._isInitialized=!1},m.disableCollectionRequestOption="disableAppInsightsAutoCollection",m.requestNumber=1,m.alreadyAutoCollectedFlag="_appInsightsAutoCollected",m}();i.exports=v}),fm=x((e,i)=>{"use strict";var t=require("os"),n=mn(),u=Ur(),a=no(),o=hi(),r="http://169.254.169.254/metadata/instance/compute",s="api-version=2017-12-01",l="format=json",f="ENETUNREACH",c=function(){function p(v){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",p.INSTANCE||(p.INSTANCE=this),this._isInitialized=!1,this._client=v}return p.prototype.enable=function(v,m){var g=this;this._isEnabled=v,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),v?this._handle||(this._handle=setInterval(function(){return g.trackHeartBeat(m,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},p.prototype.isInitialized=function(){return this._isInitialized},p.isEnabled=function(){return p.INSTANCE&&p.INSTANCE._isEnabled},p.prototype.trackHeartBeat=function(v,m){var g=this,E=!1,T={},O=a.sdkVersion;T.sdk=O,T.osType=t.type(),process.env.WEBSITE_SITE_NAME?(T.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",T.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",T.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?T.azfunction_appId=process.env.WEBSITE_HOSTNAME:v&&(this._isVM===void 0?(E=!0,this._getAzureComputeMetadata(v,function(){g._isVM&&Object.keys(g._vmData).length>0&&(T.azInst_vmId=g._vmData.vmId||"",T.azInst_subscriptionId=g._vmData.subscriptionId||"",T.azInst_osType=g._vmData.osType||"",g._azInst_vmId=g._vmData.vmId||"",g._azInst_subscriptionId=g._vmData.subscriptionId||"",g._azInst_osType=g._vmData.osType||""),g._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:T}),m()})):this._isVM&&(T.azInst_vmId=this._azInst_vmId,T.azInst_subscriptionId=this._azInst_subscriptionId,T.azInst_osType=this._azInst_osType)),E||(this._client.trackMetric({name:n.HeartBeatMetricName,value:0,properties:T}),m())},p.prototype.dispose=function(){p.INSTANCE=null,this.enable(!1),this._isInitialized=!1},p.prototype._getAzureComputeMetadata=function(v,m){var g,E=this,T=r+"?"+s+"&"+l,O=(g={method:"GET"},g[o.disableCollectionRequestOption]=!0,g.headers={Metadata:"True"},g),P=u.makeRequest(v,T,O,function(A){if(A.statusCode===200){E._isVM=!0;var M="";A.on("data",function(j){M+=j}),A.on("end",function(){E._vmData=E._isJSON(M)?JSON.parse(M):{},m()})}else m()});P&&(P.on("error",function(A){A&&A.message&&A.message.indexOf(f)>-1&&(E._isVM=!1),m()}),P.end())},p.prototype._isJSON=function(v){try{return JSON.parse(v)&&!!v}catch{return!1}},p}();i.exports=c}),Ol=x((e,i)=>{"use strict";var t=require("http"),n=require("https"),u=mr(),a=Ur(),o=pi(),r=Sl(),s=qn(),l=ja(),f=function(){function c(p){if(c.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");c.INSTANCE=this,this._client=p}return c.prototype.enable=function(p){this._isEnabled=p,(this._isAutoCorrelating||this._isEnabled||l.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},c.prototype.useAutoCorrelation=function(p,v){p&&!this._isAutoCorrelating?s.CorrelationContextManager.enable(v):!p&&this._isAutoCorrelating&&s.CorrelationContextManager.disable(),this._isAutoCorrelating=p},c.prototype.isInitialized=function(){return this._isInitialized},c.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},c.prototype._generateCorrelationContext=function(p){if(this._isAutoCorrelating)return s.CorrelationContextManager.generateContextObject(p.getOperationId(this._client.context.tags),p.getRequestId(),p.getOperationName(this._client.context.tags),p.getCorrelationContextHeader(),p.getTraceparent(),p.getTracestate())},c.prototype._initialize=function(){var p=this;this._isInitialized=!0;var v=function(T){if(T){if(typeof T!="function")throw new Error("onRequest handler must be a function");return function(O,P){s.CorrelationContextManager.wrapEmitter(O),s.CorrelationContextManager.wrapEmitter(P);var A=O&&!O[c.alreadyAutoCollectedFlag];if(O&&A){var M=new r(O),j=p._generateCorrelationContext(M);s.CorrelationContextManager.runWithContext(j,function(){p._isEnabled&&(O[c.alreadyAutoCollectedFlag]=!0,c.trackRequest(p._client,{request:O,response:P},M)),typeof T=="function"&&T(O,P)})}else typeof T=="function"&&T(O,P)}}},m=function(T){var O=T.addListener.bind(T);T.addListener=function(P,A){switch(P){case"request":case"checkContinue":return O(P,v(A));default:return O(P,A)}},T.on=T.addListener},g=t.createServer;t.createServer=function(T,O){if(O&&typeof O=="function"){var P=g(T,v(O));return m(P),P}else{var P=g(v(T));return m(P),P}};var E=n.createServer;n.createServer=function(T,O){var P=E(T,v(O));return m(P),P}},c.trackRequestSync=function(p,v){if(!v.request||!v.response||!p){u.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!v.request,!v.response,!p);return}c.addResponseCorrelationIdHeader(p,v.response);var m=s.CorrelationContextManager.getCurrentContext(),g=new r(v.request,m&&m.operation.parentId);m&&(m.operation.id=g.getOperationId(p.context.tags)||m.operation.id,m.operation.name=g.getOperationName(p.context.tags)||m.operation.name,m.operation.parentId=g.getRequestId()||m.operation.parentId,m.customProperties.addHeaderData(g.getCorrelationContextHeader())),c.endRequest(p,g,v,v.duration,v.error)},c.trackRequest=function(p,v,m){if(!v.request||!v.response||!p){u.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!v.request,!v.response,!p);return}var g=s.CorrelationContextManager.getCurrentContext(),E=m||new r(v.request,g&&g.operation.parentId);a.canIncludeCorrelationHeader(p,E.getUrl())&&c.addResponseCorrelationIdHeader(p,v.response),g&&!m&&(g.operation.id=E.getOperationId(p.context.tags)||g.operation.id,g.operation.name=E.getOperationName(p.context.tags)||g.operation.name,g.operation.parentId=E.getOperationParentId(p.context.tags)||g.operation.parentId,g.customProperties.addHeaderData(E.getCorrelationContextHeader())),v.response.once&&v.response.once("finish",function(){c.endRequest(p,E,v,null,null)}),v.request.on&&v.request.on("error",function(T){c.endRequest(p,E,v,null,T)}),v.request.on&&v.request.on("aborted",function(){var T="The request has been aborted and the network socket has closed.";c.endRequest(p,E,v,null,T)})},c.addResponseCorrelationIdHeader=function(p,v){if(p.config&&p.config.correlationId&&v.getHeader&&v.setHeader&&!v.headersSent){var m=v.getHeader(o.requestContextHeader);a.safeIncludeCorrelationHeader(p,v,m)}},c.endRequest=function(p,v,m,g,E){E?v.onError(E,g):v.onResponse(m.response,g);var T=v.getRequestTelemetry(m);if(T.tagOverrides=v.getRequestTags(p.context.tags),m.tagOverrides)for(var O in m.tagOverrides)T.tagOverrides[O]=m.tagOverrides[O];var P=v.getLegacyRootId();P&&(T.properties.ai_legacyRootId=P),T.contextObjects=T.contextObjects||{},T.contextObjects["http.ServerRequest"]=m.request,T.contextObjects["http.ServerResponse"]=m.response,p.trackRequest(T)},c.prototype.dispose=function(){c.INSTANCE=null,this.enable(!1),this._isInitialized=!1,s.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},c.alreadyAutoCollectedFlag="_appInsightsAutoCollected",c}();i.exports=f}),dm=x((e,i)=>{"use strict";var t=e&&e.__assign||function(){return t=Object.assign||function(f){for(var c,p=1,v=arguments.length;p<v;p++){c=arguments[p];for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(f[m]=c[m])}return f},t.apply(this,arguments)},n=require("os"),u=Mr(),a=mn(),o=Ur(),r=mr(),s=o.w3cTraceId(),l=function(){function f(){}return f.createQuickPulseEnvelope=function(c,p,v,m){var g=n&&typeof n.hostname=="function"&&n.hostname()||"Unknown",E=m.tags&&m.keys&&m.keys.cloudRoleInstance&&m.tags[m.keys.cloudRoleInstance]||g,T=m.tags&&m.keys&&m.keys.cloudRole&&m.tags[m.keys.cloudRole]||null,O={Documents:p.length>0?p:null,InstrumentationKey:v.instrumentationKey||"",Metrics:c.length>0?c:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:m.tags[m.keys.internalSdkVersion],StreamId:s,MachineName:g,Instance:E,RoleName:T};return O},f.createQuickPulseMetric=function(c){var p;return p={Name:c.name,Value:c.value,Weight:c.count||1},p},f.telemetryEnvelopeToQuickPulseDocument=function(c){switch(c.data.baseType){case u.TelemetryTypeString.Event:return f.createQuickPulseEventDocument(c);case u.TelemetryTypeString.Exception:return f.createQuickPulseExceptionDocument(c);case u.TelemetryTypeString.Trace:return f.createQuickPulseTraceDocument(c);case u.TelemetryTypeString.Dependency:return f.createQuickPulseDependencyDocument(c);case u.TelemetryTypeString.Request:return f.createQuickPulseRequestDocument(c)}return null},f.createQuickPulseEventDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData.name,m=t(t({},p),{Name:v});return m},f.createQuickPulseTraceDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData.severityLevel||0,m=t(t({},p),{Message:c.data.baseData.message,SeverityLevel:u.SeverityLevel[v]});return m},f.createQuickPulseExceptionDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData.exceptions,m="",g="",E="";v&&v.length>0&&(v[0].parsedStack&&v[0].parsedStack.length>0?v[0].parsedStack.forEach(function(O){m+=O.assembly+`
`}):v[0].stack&&v[0].stack.length>0&&(m=v[0].stack),g=v[0].message,E=v[0].typeName);var T=t(t({},p),{Exception:m,ExceptionMessage:g,ExceptionType:E});return T},f.createQuickPulseRequestDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData,m=t(t({},p),{Name:v.name,Success:v.success,Duration:v.duration,ResponseCode:v.responseCode,OperationName:v.name});return m},f.createQuickPulseDependencyDocument=function(c){var p=f.createQuickPulseDocument(c),v=c.data.baseData,m=t(t({},p),{Name:v.name,Target:v.target,Success:v.success,Duration:v.duration,ResultCode:v.resultCode,CommandName:v.data,OperationName:p.OperationId,DependencyTypeName:v.type});return m},f.createQuickPulseDocument=function(c){var p,v,m,g;c.data.baseType?(v=a.TelemetryTypeStringToQuickPulseType[c.data.baseType],p=a.TelemetryTypeStringToQuickPulseDocumentType[c.data.baseType]):r.warn("Document type invalid; not sending live metric document",c.data.baseType),m=c.tags[f.keys.operationId],g=f.aggregateProperties(c);var E={DocumentType:p,__type:v,OperationId:m,Version:"1.0",Properties:g};return E},f.aggregateProperties=function(c){var p=[],v=c.data.baseData.measurements||{};for(var m in v)if(v.hasOwnProperty(m)){var g=v[m],E={key:m,value:g};p.push(E)}var T=c.data.baseData.properties||{};for(var m in T)if(T.hasOwnProperty(m)){var g=T[m],E={key:m,value:g};p.push(E)}return p},f.keys=new u.ContextTagKeys,f}();i.exports=l}),pm=x((e,i)=>{"use strict";var t=function(){return(Date.now()+621355968e5)*1e4};i.exports={getTransmissionTime:t}}),hm=x((e,i)=>{"use strict";var t=e&&e.__awaiter||function(c,p,v,m){function g(E){return E instanceof v?E:new v(function(T){T(E)})}return new(v||(v=Promise))(function(E,T){function O(M){try{A(m.next(M))}catch(j){T(j)}}function P(M){try{A(m.throw(M))}catch(j){T(j)}}function A(M){M.done?E(M.value):g(M.value).then(O,P)}A((m=m.apply(c,p||[])).next())})},n=e&&e.__generator||function(c,p){var v={label:0,sent:function(){if(E[0]&1)throw E[1];return E[1]},trys:[],ops:[]},m,g,E,T;return T={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(T[Symbol.iterator]=function(){return this}),T;function O(A){return function(M){return P([A,M])}}function P(A){if(m)throw new TypeError("Generator is already executing.");for(;v;)try{if(m=1,g&&(E=A[0]&2?g.return:A[0]?g.throw||((E=g.return)&&E.call(g),0):g.next)&&!(E=E.call(g,A[1])).done)return E;switch(g=0,E&&(A=[A[0]&2,E.value]),A[0]){case 0:case 1:E=A;break;case 4:return v.label++,{value:A[1],done:!1};case 5:v.label++,g=A[1],A=[0];continue;case 7:A=v.ops.pop(),v.trys.pop();continue;default:if(E=v.trys,!(E=E.length>0&&E[E.length-1])&&(A[0]===6||A[0]===2)){v=0;continue}if(A[0]===3&&(!E||A[1]>E[0]&&A[1]<E[3])){v.label=A[1];break}if(A[0]===6&&v.label<E[1]){v.label=E[1],E=A;break}if(E&&v.label<E[2]){v.label=E[2],v.ops.push(A);break}E[2]&&v.ops.pop(),v.trys.pop();continue}A=p.call(c,v)}catch(M){A=[6,M],g=0}finally{m=E=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},u=require("https"),a=hi(),o=mr(),r=pm(),s=Ur(),l={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},f=function(){function c(p){this._config=p,this._consecutiveErrors=0}return c.prototype.ping=function(p,v,m){var g=[{name:l.streamId,value:p.StreamId},{name:l.machineName,value:p.MachineName},{name:l.roleName,value:p.RoleName},{name:l.instanceName,value:p.Instance},{name:l.invariantVersion,value:p.InvariantVersion.toString()}];this._submitData(p,v,m,"ping",g)},c.prototype.post=function(p,v,m){return t(this,void 0,void 0,function(){return n(this,function(g){switch(g.label){case 0:return[4,this._submitData([p],v,m,"post")];case 1:return g.sent(),[2]}})})},c.prototype._submitData=function(p,v,m,g,E){return t(this,void 0,void 0,function(){var T,O,P,A,M,j=this;return n(this,function(G){return T=JSON.stringify(p),O=(A={},A[a.disableCollectionRequestOption]=!0,A.host=v&&v.length>0?v:this._config.quickPulseHost,A.method=l.method,A.path="/QuickPulseService.svc/"+g+"?ikey="+this._config.instrumentationKey,A.headers=(M={Expect:"100-continue"},M[l.time]=r.getTransmissionTime(),M["Content-Type"]="application/json",M["Content-Length"]=Buffer.byteLength(T),M),A),E&&E.length>0&&E.forEach(function(B){return O.headers[B.name]=B.value}),this._config.httpsAgent?O.agent=this._config.httpsAgent:O.agent=s.tlsRestrictedAgent,P=u.request(O,function(B){if(B.statusCode==200){var Y=B.headers[l.subscribed]==="true",ne=B.headers[l.endpointRedirect]?B.headers[l.endpointRedirect].toString():null,ye=B.headers[l.pollingIntervalHint]?parseInt(B.headers[l.pollingIntervalHint].toString()):null;j._consecutiveErrors=0,m(Y,B,ne,ye)}else j._onError("StatusCode:"+B.statusCode+" StatusMessage:"+B.statusMessage),m()}),P.on("error",function(B){j._onError(B),m()}),P.write(T),P.end(),[2]})})},c.prototype._onError=function(p){this._consecutiveErrors++;var v="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%c.MAX_QPS_FAILURES_BEFORE_WARN===0?(v="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",o.warn(c.TAG,v,p)):o.info(c.TAG,v,p)},c.TAG="QuickPulseSender",c.MAX_QPS_FAILURES_BEFORE_WARN=25,c}();i.exports=f}),vm=x((e,i)=>{"use strict";var t=e&&e.__awaiter||function(f,c,p,v){function m(g){return g instanceof p?g:new p(function(E){E(g)})}return new(p||(p=Promise))(function(g,E){function T(A){try{P(v.next(A))}catch(M){E(M)}}function O(A){try{P(v.throw(A))}catch(M){E(M)}}function P(A){A.done?g(A.value):m(A.value).then(T,O)}P((v=v.apply(f,c||[])).next())})},n=e&&e.__generator||function(f,c){var p={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},v,m,g,E;return E={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function T(P){return function(A){return O([P,A])}}function O(P){if(v)throw new TypeError("Generator is already executing.");for(;p;)try{if(v=1,m&&(g=P[0]&2?m.return:P[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,P[1])).done)return g;switch(m=0,g&&(P=[P[0]&2,g.value]),P[0]){case 0:case 1:g=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,m=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(g=p.trys,!(g=g.length>0&&g[g.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!g||P[1]>g[0]&&P[1]<g[3])){p.label=P[1];break}if(P[0]===6&&p.label<g[1]){p.label=g[1],g=P;break}if(g&&p.label<g[2]){p.label=g[2],p.ops.push(P);break}g[2]&&p.ops.pop(),p.trys.pop();continue}P=c.call(f,p)}catch(A){P=[6,A],m=0}finally{v=g=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},u=mr(),a=dm(),o=hm(),r=mn(),s=no(),l=function(){function f(c,p){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=c,this.context=p||new s,this._sender=new o(this.config),this._isEnabled=!1}return f.prototype.addCollector=function(c){this._collectors.push(c)},f.prototype.trackMetric=function(c){this._addMetric(c)},f.prototype.addDocument=function(c){var p=a.telemetryEnvelopeToQuickPulseDocument(c);p&&this._documents.push(p)},f.prototype.enable=function(c){c&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!c&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},f.prototype.enableCollectors=function(c){this._collectors.forEach(function(p){p.enable(c)})},f.prototype._addMetric=function(c){var p=c.value,v=c.count||1,m=r.PerformanceToQuickPulseCounter[c.name];m&&(this._metrics[m]?(this._metrics[m].Value=(this._metrics[m].Value*this._metrics[m].Weight+p*v)/(this._metrics[m].Weight+v),this._metrics[m].Weight+=v):(this._metrics[m]=a.createQuickPulseMetric(c),this._metrics[m].Name=m,this._metrics[m].Weight=1))},f.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},f.prototype._goQuickPulse=function(){return t(this,void 0,void 0,function(){var c,p,v,m,g=this;return n(this,function(E){switch(E.label){case 0:return c=Object.keys(this._metrics).map(function(T){return g._metrics[T]}),p=a.createQuickPulseEnvelope(c,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(p)]:[3,2];case 1:return E.sent(),[3,3];case 2:this._ping(p),E.label=3;case 3:return v=this._pollingIntervalHint>0?this._pollingIntervalHint:f.PING_INTERVAL,m=this._isCollectingData?f.POST_INTERVAL:v,this._isCollectingData&&Date.now()-this._lastSuccessTime>=f.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,m=f.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=f.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(m=f.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),m),this._handle.unref(),[2]}})})},f.prototype._ping=function(c){this._sender.ping(c,this._redirectedHost,this._quickPulseDone.bind(this))},f.prototype._post=function(c){return t(this,void 0,void 0,function(){return n(this,function(p){switch(p.label){case 0:return[4,this._sender.post(c,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return p.sent(),[2]}})})},f.prototype._quickPulseDone=function(c,p,v,m){c!=null?(this._isCollectingData!==c&&(u.info("Live Metrics sending data",c),this.enableCollectors(c)),this._isCollectingData=c,v&&v.length>0&&(this._redirectedHost=v,u.info("Redirecting endpoint to: ",v)),m&&m>0&&(this._pollingIntervalHint=m),p&&p.statusCode<300&&p.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},f.MAX_POST_WAIT_TIME=2e4,f.MAX_PING_WAIT_TIME=6e4,f.FALLBACK_INTERVAL=6e4,f.PING_INTERVAL=5e3,f.POST_INTERVAL=1e3,f}();i.exports=l}),mm=x((e,i)=>{"use strict";var t=mn(),n=function(){function u(){}return u.parse=function(a){if(!a)return{};var o=a.split(u._FIELDS_SEPARATOR),r=o.reduce(function(l,f){var c=f.split(u._FIELD_KEY_VALUE_SEPARATOR);if(c.length===2){var p=c[0].toLowerCase(),v=c[1];l[p]=v}return l},{});if(Object.keys(r).length>0){if(r.endpointsuffix){var s=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+s+"dc."+r.endpointsuffix,r.liveendpoint=r.liveendpoint||"https://"+s+"live."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||t.DEFAULT_BREEZE_ENDPOINT,r.liveendpoint=r.liveendpoint||t.DEFAULT_LIVEMETRICS_ENDPOINT}return r},u._FIELDS_SEPARATOR=";",u._FIELD_KEY_VALUE_SEPARATOR="=",u}();i.exports=n}),Pl=x((e,i)=>{"use strict";var t=Hn(),n=mm(),u=mr(),a=mn(),o=require("url"),r=function(){function s(l){var f=this;this.endpointBase=a.DEFAULT_BREEZE_ENDPOINT;var c=process.env[s.ENV_connectionString],p=n.parse(l),v=n.parse(c),m=!p.instrumentationkey&&Object.keys(p).length>0?null:l;this.instrumentationKey=p.instrumentationkey||m||v.instrumentationkey||s._getInstrumentationKey(),s._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(p.ingestionendpoint||v.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(g){return f.correlationId=g},this.proxyHttpUrl=process.env[s.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[s.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=p.ingestionendpoint||v.ingestionendpoint||process.env[s.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=p.liveendpoint||v.liveendpoint||process.env[s.ENV_quickPulseHost]||a.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=o.parse(this._quickPulseHost).host)}return Object.defineProperty(s.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(l){t.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=l,this.correlationId=t.correlationIdPrefix,t.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(l){this._quickPulseHost=l},enumerable:!1,configurable:!0}),s._getInstrumentationKey=function(){var l=process.env[s.ENV_iKey]||process.env[s.ENV_azurePrefix+s.ENV_iKey]||process.env[s.legacy_ENV_iKey]||process.env[s.ENV_azurePrefix+s.legacy_ENV_iKey];if(!l||l=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return l},s._validateInstrumentationKey=function(l){var f="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",c=new RegExp(f);return c.test(l)},s.ENV_azurePrefix="APPSETTING_",s.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",s.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",s.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",s.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",s.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",s.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",s.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",s.ENV_http_proxy="http_proxy",s.ENV_https_proxy="https_proxy",s}();i.exports=r}),gm=x(e=>{"use strict";var i=e&&e.__assign||function(){return i=Object.assign||function(o){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(o[f]=r[f])}return o},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCollectNativePerformance=void 0;var t=Pl(),n=no(),u=mr(),a=function(){function o(r){this._disabledMetrics={},o.INSTANCE&&o.INSTANCE.dispose(),o.INSTANCE=this,this._client=r}return o.isNodeVersionCompatible=function(){var r=process.versions.node.split(".");return parseInt(r[0])>=6},o.prototype.enable=function(r,s,l){var f=this;if(s===void 0&&(s={}),l===void 0&&(l=6e4),!!o.isNodeVersionCompatible()){if(o._metricsAvailable==null&&r&&!this._isInitialized)try{var c=require("applicationinsights-native-metrics");o._emitter=new c,o._metricsAvailable=!0,u.info("Native metrics module successfully loaded!")}catch{o._metricsAvailable=!1;return}this._isEnabled=r,this._disabledMetrics=s,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&o._emitter?(o._emitter.enable(!0,l),this._handle||(this._handle=setInterval(function(){return f._trackNativeMetrics()},l),this._handle.unref())):o._emitter&&(o._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},o.prototype.dispose=function(){this.enable(!1)},o.parseEnabled=function(r){var s=process.env[t.ENV_nativeMetricsDisableAll],l=process.env[t.ENV_nativeMetricsDisablers];if(s)return{isEnabled:!1,disabledMetrics:{}};if(l){var f=l.split(","),c={};if(f.length>0)for(var p=0,v=f;p<v.length;p++){var m=v[p];c[m]=!0}return typeof r=="object"?{isEnabled:!0,disabledMetrics:i(i({},r),c)}:{isEnabled:r,disabledMetrics:c}}return typeof r=="boolean"?{isEnabled:r,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:r}},o.prototype._trackNativeMetrics=function(){var r=!0;typeof this._isEnabled!="object"&&(r=this._isEnabled),r&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},o.prototype._trackGarbageCollection=function(){var r;if(!this._disabledMetrics.gc){var s=o._emitter.getGCData();for(var l in s){var f=s[l].metrics,c=l+" Garbage Collection Duration",p=Math.sqrt(f.sumSquares/f.count-Math.pow(f.total/f.count,2))||0;this._client.trackMetric({name:c,value:f.total,count:f.count,max:f.max,min:f.min,stdDev:p,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,r)})}}},o.prototype._trackEventLoop=function(){var r;if(!this._disabledMetrics.loop){var s=o._emitter.getLoopData(),l=s.loopUsage;if(l.count!=0){var f="Event Loop CPU Time",c=Math.sqrt(l.sumSquares/l.count-Math.pow(l.total/l.count,2))||0;this._client.trackMetric({name:f,value:l.total,count:l.count,min:l.min,max:l.max,stdDev:c,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,r)})}}},o.prototype._trackHeapUsage=function(){var r,s,l;if(!this._disabledMetrics.heap){var f=process.memoryUsage(),c=f.heapUsed,p=f.heapTotal,v=f.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:c,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,r)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,s)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:v-p,count:1,tagOverrides:(l={},l[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+n.sdkVersion,l)})}},o}();e.AutoCollectNativePerformance=a}),_m=x((e,i)=>{"use strict";var t=mr(),n=function(){function u(a,o,r,s){this._buffer=[],this._lastSend=0,this._isDisabled=a,this._getBatchSize=o,this._getBatchIntervalMs=r,this._sender=s}return u.prototype.setUseDiskRetryCaching=function(a,o,r){this._sender.setDiskRetryMode(a,o,r)},u.prototype.send=function(a){var o=this;if(!this._isDisabled()){if(!a){t.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(a),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){o._timeoutHandle=null,o.triggerSend(!1)},this._getBatchIntervalMs()))}},u.prototype.triggerSend=function(a,o){var r=this._buffer.length<1;r||(a?(this._sender.saveOnCrash(this._buffer),typeof o=="function"&&o("data saved on crash")):this._sender.send(this._buffer,o)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&typeof o=="function"&&o("no data to send")},u}();i.exports=n}),ym=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.azureRoleEnvironmentTelemetryProcessor=void 0;function i(t,n){process.env.WEBSITE_SITE_NAME&&(t.tags[n.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}e.azureRoleEnvironmentTelemetryProcessor=i}),Em=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSamplingHashCode=e.samplingTelemetryProcessor=void 0;var i=Mr();function t(u,a){var o=u.sampleRate,r=!1;return o==null||o>=100||u.data&&i.TelemetryType.Metric===i.baseTypeToTelemetryType(u.data.baseType)?!0:(a.correlationContext&&a.correlationContext.operation?r=n(a.correlationContext.operation.id)<o:r=Math.random()*100<o,r)}e.samplingTelemetryProcessor=t;function n(u){var a=-2147483648,o=2147483647,r=5381;if(!u)return 0;for(;u.length<8;)u=u+u;for(var s=0;s<u.length;s++)r=((r<<5)+r|0)+u.charCodeAt(s)|0;return r=r<=a?o:Math.abs(r),r/o*100}e.getSamplingHashCode=n}),bm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.performanceMetricsTelemetryProcessor=void 0;var i=ja(),t=Mr();function n(u,a){switch(a&&a.addDocument(u),u.data.baseType){case t.TelemetryTypeString.Exception:i.countException();break;case t.TelemetryTypeString.Request:var o=u.data.baseData;i.countRequest(o.duration,o.success);break;case t.TelemetryTypeString.Dependency:var r=u.data.baseData;i.countDependency(r.duration,r.success);break}return!0}e.performanceMetricsTelemetryProcessor=n}),Sm=x(e=>{"use strict";var i=e&&e.__assign||function(){return i=Object.assign||function(o){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(o[f]=r[f])}return o},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.preAggregatedMetricsTelemetryProcessor=void 0;var t=Mr(),n=Al(),u=Mr();function a(o,r){if(n.isEnabled())switch(o.data.baseType){case u.TelemetryTypeString.Exception:var s=o.data.baseData;s.properties=i(i({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var l={cloudRoleInstance:o.tags[r.keys.cloudRoleInstance],cloudRoleName:o.tags[r.keys.cloudRole]};n.countException(l);break;case u.TelemetryTypeString.Trace:var f=o.data.baseData;f.properties=i(i({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var c={cloudRoleInstance:o.tags[r.keys.cloudRoleInstance],cloudRoleName:o.tags[r.keys.cloudRole],traceSeverityLevel:t.SeverityLevel[f.severity]};n.countTrace(c);break;case u.TelemetryTypeString.Request:var p=o.data.baseData;p.properties=i(i({},p.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var v={cloudRoleInstance:o.tags[r.keys.cloudRoleInstance],cloudRoleName:o.tags[r.keys.cloudRole],operationSynthetic:o.tags[r.keys.operationSyntheticSource],requestSuccess:p.success,requestResultCode:p.responseCode};n.countRequest(p.duration,v);break;case u.TelemetryTypeString.Dependency:var m=o.data.baseData;m.properties=i(i({},m.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var g={cloudRoleInstance:o.tags[r.keys.cloudRoleInstance],cloudRoleName:o.tags[r.keys.cloudRole],operationSynthetic:o.tags[r.keys.operationSyntheticSource],dependencySuccess:m.success,dependencyType:m.type,dependencyTarget:m.target,dependencyResultCode:m.resultCode};n.countDependency(m.duration,g);break}return!0}e.preAggregatedMetricsTelemetryProcessor=a}),Tm=x(e=>{"use strict";var i=e&&e.__createBinding||(Object.create?function(n,u,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,o){o===void 0&&(o=a),n[o]=u[a]}),t=e&&e.__exportStar||function(n,u){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&i(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),t(ym(),e),t(Em(),e),t(bm(),e),t(Sm(),e)}),Im=x((e,i)=>{"use strict";var t=e&&e.__awaiter||function(v,m,g,E){function T(O){return O instanceof g?O:new g(function(P){P(O)})}return new(g||(g=Promise))(function(O,P){function A(G){try{j(E.next(G))}catch(B){P(B)}}function M(G){try{j(E.throw(G))}catch(B){P(B)}}function j(G){G.done?O(G.value):T(G.value).then(A,M)}j((E=E.apply(v,m||[])).next())})},n=e&&e.__generator||function(v,m){var g={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},E,T,O,P;return P={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(P[Symbol.iterator]=function(){return this}),P;function A(j){return function(G){return M([j,G])}}function M(j){if(E)throw new TypeError("Generator is already executing.");for(;g;)try{if(E=1,T&&(O=j[0]&2?T.return:j[0]?T.throw||((O=T.return)&&O.call(T),0):T.next)&&!(O=O.call(T,j[1])).done)return O;switch(T=0,O&&(j=[j[0]&2,O.value]),j[0]){case 0:case 1:O=j;break;case 4:return g.label++,{value:j[1],done:!1};case 5:g.label++,T=j[1],j=[0];continue;case 7:j=g.ops.pop(),g.trys.pop();continue;default:if(O=g.trys,!(O=O.length>0&&O[O.length-1])&&(j[0]===6||j[0]===2)){g=0;continue}if(j[0]===3&&(!O||j[1]>O[0]&&j[1]<O[3])){g.label=j[1];break}if(j[0]===6&&g.label<O[1]){g.label=O[1],O=j;break}if(O&&g.label<O[2]){g.label=O[2],g.ops.push(j);break}O[2]&&g.ops.pop(),g.trys.pop();continue}j=m.call(v,g)}catch(G){j=[6,G],T=0}finally{E=O=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}},u=require("fs"),a=require("os"),o=require("path"),r=require("zlib"),s=require("child_process"),l=mr(),f=hi(),c=Ur(),p=function(){function v(m,g,E){if(this._redirectedHost=null,this._config=m,this._onSuccess=g,this._onError=E,this._enableDiskRetryMode=!1,this._resendInterval=v.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=v.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=o.join(a.tmpdir(),v.TEMPDIR_PREFIX+this._config.instrumentationKey),!v.OS_PROVIDES_FILE_PROTECTION)if(v.USE_ICACLS){try{v.OS_PROVIDES_FILE_PROTECTION=u.existsSync(v.ICACLS_PATH)}catch{}v.OS_PROVIDES_FILE_PROTECTION||l.warn(v.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else v.OS_PROVIDES_FILE_PROTECTION=!0}return v.prototype.setDiskRetryMode=function(m,g,E){var T=this;this._enableDiskRetryMode=v.OS_PROVIDES_FILE_PROTECTION&&m,typeof g=="number"&&g>=0&&(this._resendInterval=Math.floor(g)),typeof E=="number"&&E>=0&&(this._maxBytesOnDisk=Math.floor(E)),m&&!v.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(v.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){T._fileCleanupTask()},v.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},v.prototype.send=function(m,g){return t(this,void 0,void 0,function(){var E,T,O,P,A=this;return n(this,function(M){return m&&(E=this._redirectedHost||this._config.endpointUrl,T={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},O="",m.forEach(function(j){var G=A._stringify(j);typeof G=="string"&&(O+=G+`
`)}),O.length>0&&(O=O.substring(0,O.length-1)),P=Buffer.from?Buffer.from(O):new Buffer(O),r.gzip(P,function(j,G){var B=G;j?(l.warn(j),B=P,T.headers["Content-Length"]=P.length.toString()):(T.headers["Content-Encoding"]="gzip",T.headers["Content-Length"]=G.length.toString()),l.info(v.TAG,T),T[f.disableCollectionRequestOption]=!0;var Y=function(ye){ye.setEncoding("utf-8");var Re="";ye.on("data",function(st){Re+=st}),ye.on("end",function(){if(A._numConsecutiveFailures=0,A._enableDiskRetryMode){if(ye.statusCode===200)A._resendTimer||(A._resendTimer=setTimeout(function(){A._resendTimer=null,A._sendFirstFileOnDisk()},A._resendInterval),A._resendTimer.unref());else if(A._isRetriable(ye.statusCode))try{var st=JSON.parse(Re),ot=[];st.errors.forEach(function(at){A._isRetriable(at.statusCode)&&ot.push(m[at.index])}),ot.length>0&&A._storeToDisk(ot)}catch{A._storeToDisk(m)}}if(ye.statusCode===307||ye.statusCode===308)if(A._numConsecutiveRedirects++,A._numConsecutiveRedirects<10){var Dt=ye.headers.location?ye.headers.location.toString():null;Dt&&(A._redirectedHost=Dt,A.send(m,g))}else typeof g=="function"&&g("Error sending telemetry because of circular redirects.");else A._numConsecutiveRedirects=0,typeof g=="function"&&g(Re),l.info(v.TAG,Re),typeof A._onSuccess=="function"&&A._onSuccess(Re)})},ne=c.makeRequest(A._config,E,T,Y);ne.on("error",function(ye){if(A._numConsecutiveFailures++,!A._enableDiskRetryMode||A._numConsecutiveFailures>0&&A._numConsecutiveFailures%v.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var Re="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";A._enableDiskRetryMode&&(Re="Ingestion endpoint could not be reached "+A._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(v.TAG,Re,c.dumpObj(ye))}else{var Re="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(v.TAG,Re,c.dumpObj(ye))}A._onErrorHelper(ye),typeof g=="function"&&(ye&&g(c.dumpObj(ye)),g("Error sending telemetry")),A._enableDiskRetryMode&&A._storeToDisk(m)}),ne.write(B),ne.end()})),[2]})})},v.prototype.saveOnCrash=function(m){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(m))},v.prototype._isRetriable=function(m){return m===206||m===408||m===429||m===439||m===500||m===503},v.prototype._runICACLS=function(m,g){var E=s.spawn(v.ICACLS_PATH,m,{windowsHide:!0});E.on("error",function(T){return g(T)}),E.on("close",function(T,O){return g(T===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+T+")"))})},v.prototype._runICACLSSync=function(m){if(s.spawnSync){var g=s.spawnSync(v.ICACLS_PATH,m,{windowsHide:!0});if(g.error)throw g.error;if(g.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+g.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},v.prototype._getACLIdentity=function(m){if(v.ACL_IDENTITY)return m(null,v.ACL_IDENTITY);var g=s.spawn(v.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),E="";g.stdout.on("data",function(T){return E+=T}),g.on("error",function(T){return m(T,null)}),g.on("close",function(T,O){return v.ACL_IDENTITY=E&&E.trim(),m(T===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+T+")"),v.ACL_IDENTITY)})},v.prototype._getACLIdentitySync=function(){if(v.ACL_IDENTITY)return v.ACL_IDENTITY;if(s.spawnSync){var m=s.spawnSync(v.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(m.error)throw m.error;if(m.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+m.status+")");return v.ACL_IDENTITY=m.stdout&&m.stdout.toString().trim(),v.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},v.prototype._getACLArguments=function(m,g){return[m,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",g+":(OI)(CI)F","/inheritance:r"]},v.prototype._applyACLRules=function(m,g){var E=this;if(!v.USE_ICACLS)return g(null);if(v.ACLED_DIRECTORIES[m]===void 0)v.ACLED_DIRECTORIES[m]=!1,this._getACLIdentity(function(T,O){if(T)return v.ACLED_DIRECTORIES[m]=!1,g(T);E._runICACLS(E._getACLArguments(m,O),function(P){return v.ACLED_DIRECTORIES[m]=!P,g(P)})});else return g(v.ACLED_DIRECTORIES[m]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},v.prototype._applyACLRulesSync=function(m){if(v.USE_ICACLS){if(v.ACLED_DIRECTORIES[m]===void 0){this._runICACLSSync(this._getACLArguments(m,this._getACLIdentitySync())),v.ACLED_DIRECTORIES[m]=!0;return}else if(!v.ACLED_DIRECTORIES[m])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},v.prototype._confirmDirExists=function(m,g){var E=this;u.lstat(m,function(T,O){T&&T.code==="ENOENT"?u.mkdir(m,function(P){P&&P.code!=="EEXIST"?g(P):E._applyACLRules(m,g)}):!T&&O.isDirectory()?E._applyACLRules(m,g):g(T||new Error("Path existed but was not a directory"))})},v.prototype._getShallowDirectorySize=function(m,g){u.readdir(m,function(E,T){if(E)return g(E,-1);var O=null,P=0,A=0;if(T.length===0){g(null,0);return}for(var M=0;M<T.length;M++)u.stat(o.join(m,T[M]),function(j,G){A++,j?O=j:G.isFile()&&(P+=G.size),A===T.length&&(O?g(O,-1):g(O,P))})})},v.prototype._getShallowDirectorySizeSync=function(m){for(var g=u.readdirSync(m),E=0,T=0;T<g.length;T++)E+=u.statSync(o.join(m,g[T])).size;return E},v.prototype._storeToDisk=function(m){var g=this;l.info(v.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(E){if(E){l.warn(v.TAG,"Error while checking/creating directory: "+(E&&E.message)),g._onErrorHelper(E);return}g._getShallowDirectorySize(g._tempDir,function(T,O){if(T||O<0){l.warn(v.TAG,"Error while checking directory size: "+(T&&T.message)),g._onErrorHelper(T);return}else if(O>g._maxBytesOnDisk){l.warn(v.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+O);return}var P=new Date().getTime()+".ai.json",A=o.join(g._tempDir,P);l.info(v.TAG,"saving data to disk at: "+A),u.writeFile(A,g._stringify(m),{mode:384},function(M){return g._onErrorHelper(M)})})})},v.prototype._storeToDiskSync=function(m){try{l.info(v.TAG,"Checking existence of data storage directory: "+this._tempDir),u.existsSync(this._tempDir)||u.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var g=this._getShallowDirectorySizeSync(this._tempDir);if(g>this._maxBytesOnDisk){l.info(v.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+g);return}var E=new Date().getTime()+".ai.json",T=o.join(this._tempDir,E);l.info(v.TAG,"saving data before crash to disk at: "+T),u.writeFileSync(T,m,{mode:384})}catch(O){l.warn(v.TAG,"Error while saving data to disk: "+(O&&O.message)),this._onErrorHelper(O)}},v.prototype._sendFirstFileOnDisk=function(){var m=this;u.exists(this._tempDir,function(g){g&&u.readdir(m._tempDir,function(E,T){if(E)m._onErrorHelper(E);else if(T=T.filter(function(A){return o.basename(A).indexOf(".ai.json")>-1}),T.length>0){var O=T[0],P=o.join(m._tempDir,O);u.readFile(P,function(A,M){A?m._onErrorHelper(A):u.unlink(P,function(j){if(j)m._onErrorHelper(j);else try{var G=JSON.parse(M.toString());m.send(G)}catch(B){l.warn("Failed to read persisted file",B)}})})}})})},v.prototype._onErrorHelper=function(m){typeof this._onError=="function"&&this._onError(m)},v.prototype._stringify=function(m){try{return JSON.stringify(m)}catch(g){l.warn("Failed to serialize payload",g,m)}},v.prototype._fileCleanupTask=function(){var m=this;u.exists(this._tempDir,function(g){g&&u.readdir(m._tempDir,function(E,T){E?m._onErrorHelper(E):(T=T.filter(function(O){return o.basename(O).indexOf(".ai.json")>-1}),T.length>0&&T.forEach(function(O){var P=new Date(parseInt(O.split(".ai.json")[0])),A=new Date(+new Date-v.FILE_RETEMPTION_PERIOD)>P;if(A){var M=o.join(m._tempDir,O);u.unlink(M,function(j){j&&m._onErrorHelper(j)})}}))})})},v.TAG="Sender",v.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",v.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",v.ACLED_DIRECTORIES={},v.ACL_IDENTITY=null,v.WAIT_BETWEEN_RESEND=60*1e3,v.MAX_BYTES_ON_DISK=50*1024*1024,v.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,v.CLEANUP_TIMEOUT=60*60*1e3,v.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,v.TEMPDIR_PREFIX="appInsights-node",v.OS_PROVIDES_FILE_PROTECTION=!1,v.USE_ICACLS=a.type()==="Windows_NT",v}();i.exports=p}),wm=x((e,i)=>{"use strict";var t=Mr(),n=Ur(),u=qn(),a=function(){function r(){}return r.createEnvelope=function(s,l,f,c,p){var v=null;switch(l){case t.TelemetryType.Trace:v=r.createTraceData(s);break;case t.TelemetryType.Dependency:v=r.createDependencyData(s);break;case t.TelemetryType.Event:v=r.createEventData(s);break;case t.TelemetryType.Exception:v=r.createExceptionData(s);break;case t.TelemetryType.Request:v=r.createRequestData(s);break;case t.TelemetryType.Metric:v=r.createMetricData(s);break;case t.TelemetryType.Availability:v=r.createAvailabilityData(s);break;case t.TelemetryType.PageView:v=r.createPageViewData(s);break}if(f&&t.domainSupportsProperties(v.baseData)){if(v&&v.baseData)if(!v.baseData.properties)v.baseData.properties=f;else for(var m in f)v.baseData.properties[m]||(v.baseData.properties[m]=f[m]);v.baseData.properties=n.validateStringMap(v.baseData.properties)}var g=p&&p.instrumentationKey||"",E=new t.Envelope;return E.data=v,E.iKey=g,E.name="Microsoft.ApplicationInsights."+g.replace(/-/g,"")+"."+v.baseType.substr(0,v.baseType.length-4),E.tags=this.getTags(c,s.tagOverrides),E.time=new Date().toISOString(),E.ver=1,E.sampleRate=p?p.samplingPercentage:100,l===t.TelemetryType.Metric&&(E.sampleRate=100),E},r.createTraceData=function(s){var l=new t.MessageData;l.message=s.message,l.properties=s.properties,isNaN(s.severity)?l.severityLevel=t.SeverityLevel.Information:l.severityLevel=s.severity;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Trace),f.baseData=l,f},r.createDependencyData=function(s){var l=new t.RemoteDependencyData;typeof s.name=="string"&&(l.name=s.name.length>1024?s.name.slice(0,1021)+"...":s.name),l.data=s.data,l.target=s.target,l.duration=n.msToTimeSpan(s.duration),l.success=s.success,l.type=s.dependencyTypeName,l.properties=s.properties,l.resultCode=s.resultCode?s.resultCode+"":"",s.id?l.id=s.id:l.id=n.w3cTraceId();var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Dependency),f.baseData=l,f},r.createEventData=function(s){var l=new t.EventData;l.name=s.name,l.properties=s.properties,l.measurements=s.measurements;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Event),f.baseData=l,f},r.createExceptionData=function(s){var l=new t.ExceptionData;l.properties=s.properties,isNaN(s.severity)?l.severityLevel=t.SeverityLevel.Error:l.severityLevel=s.severity,l.measurements=s.measurements,l.exceptions=[];var f=s.exception.stack,c=new t.ExceptionDetails;c.message=s.exception.message,c.typeName=s.exception.name,c.parsedStack=this.parseStack(f),c.hasFullStack=n.isArray(c.parsedStack)&&c.parsedStack.length>0,l.exceptions.push(c);var p=new t.Data;return p.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Exception),p.baseData=l,p},r.createRequestData=function(s){var l=new t.RequestData;s.id?l.id=s.id:l.id=n.w3cTraceId(),l.name=s.name,l.url=s.url,l.source=s.source,l.duration=n.msToTimeSpan(s.duration),l.responseCode=s.resultCode?s.resultCode+"":"",l.success=s.success,l.properties=s.properties;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Request),f.baseData=l,f},r.createMetricData=function(s){var l=new t.MetricData;l.metrics=[];var f=new t.DataPoint;f.count=isNaN(s.count)?1:s.count,f.kind=t.DataPointType.Aggregation,f.max=isNaN(s.max)?s.value:s.max,f.min=isNaN(s.min)?s.value:s.min,f.name=s.name,f.stdDev=isNaN(s.stdDev)?0:s.stdDev,f.value=s.value,l.metrics.push(f),l.properties=s.properties;var c=new t.Data;return c.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Metric),c.baseData=l,c},r.createAvailabilityData=function(s){var l=new t.AvailabilityData;s.id?l.id=s.id:l.id=n.w3cTraceId(),l.name=s.name,l.duration=n.msToTimeSpan(s.duration),l.success=s.success,l.runLocation=s.runLocation,l.message=s.message,l.measurements=s.measurements,l.properties=s.properties;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.Availability),f.baseData=l,f},r.createPageViewData=function(s){var l=new t.PageViewData;l.name=s.name,l.duration=n.msToTimeSpan(s.duration),l.url=s.url,l.measurements=s.measurements,l.properties=s.properties;var f=new t.Data;return f.baseType=t.telemetryTypeToBaseType(t.TelemetryType.PageView),f.baseData=l,f},r.getTags=function(s,l){var f=u.CorrelationContextManager.getCurrentContext(),c={};if(s&&s.tags)for(var p in s.tags)c[p]=s.tags[p];if(l)for(var p in l)c[p]=l[p];return f&&(c[s.keys.operationId]=c[s.keys.operationId]||f.operation.id,c[s.keys.operationName]=c[s.keys.operationName]||f.operation.name,c[s.keys.operationParentId]=c[s.keys.operationParentId]||f.operation.parentId),c},r.parseStack=function(s){var l=void 0;if(typeof s=="string"){var f=s.split(`
`);l=[];for(var c=0,p=0,v=0;v<=f.length;v++){var m=f[v];if(o.regex.test(m)){var g=new o(f[v],c++);p+=g.sizeInBytes,l.push(g)}}var E=32*1024;if(p>E)for(var T=0,O=l.length-1,P=0,A=T,M=O;T<O;){var j=l[T].sizeInBytes,G=l[O].sizeInBytes;if(P+=j+G,P>E){var B=M-A+1;l.splice(A,B);break}A=T,M=O,T++,O--}}return l},r}(),o=function(){function r(s,l){this.sizeInBytes=0,this.level=l,this.method="<no_method>",this.assembly=n.trim(s);var f=s.match(r.regex);f&&f.length>=5&&(this.method=n.trim(f[2])||this.method,this.fileName=n.trim(f[4])||"<no_filename>",this.line=parseInt(f[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=r.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return r.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,r.baseSize=58,r}();i.exports=a}),Am=x((e,i)=>{"use strict";var t=require("url"),n=Pl(),u=no(),a=Mr(),o=_m(),r=Tm(),s=qn(),l=Im(),f=Ur(),c=mr(),p=wm(),v=function(){function m(g){this._telemetryProcessors=[],this._enableAzureProperties=!1;var E=new n(g);this.config=E,this.context=new u,this.commonProperties={};var T=new l(this.config);this.channel=new o(function(){return E.disableAppInsights},function(){return E.maxBatchSize},function(){return E.maxBatchIntervalMs},T)}return m.prototype.trackAvailability=function(g){this.track(g,a.TelemetryType.Availability)},m.prototype.trackPageView=function(g){this.track(g,a.TelemetryType.PageView)},m.prototype.trackTrace=function(g){this.track(g,a.TelemetryType.Trace)},m.prototype.trackMetric=function(g){this.track(g,a.TelemetryType.Metric)},m.prototype.trackException=function(g){g&&g.exception&&!f.isError(g.exception)&&(g.exception=new Error(g.exception.toString())),this.track(g,a.TelemetryType.Exception)},m.prototype.trackEvent=function(g){this.track(g,a.TelemetryType.Event)},m.prototype.trackRequest=function(g){this.track(g,a.TelemetryType.Request)},m.prototype.trackDependency=function(g){g&&!g.target&&g.data&&(g.target=t.parse(g.data).host),this.track(g,a.TelemetryType.Dependency)},m.prototype.flush=function(g){this.channel.triggerSend(g?!!g.isAppCrashing:!1,g?g.callback:void 0)},m.prototype.track=function(g,E){if(g&&a.telemetryTypeToBaseType(E)){var T=p.createEnvelope(g,E,this.commonProperties,this.context,this.config);g.time&&(T.time=g.time.toISOString()),this._enableAzureProperties&&r.azureRoleEnvironmentTelemetryProcessor(T,this.context);var O=this.runTelemetryProcessors(T,g.contextObjects);O=O&&r.samplingTelemetryProcessor(T,{correlationContext:s.CorrelationContextManager.getCurrentContext()}),r.preAggregatedMetricsTelemetryProcessor(T,this.context),O&&(r.performanceMetricsTelemetryProcessor(T,this.quickPulseClient),this.channel.send(T))}else c.warn("track() requires telemetry object and telemetryType to be specified.")},m.prototype.setAutoPopulateAzureProperties=function(g){this._enableAzureProperties=g},m.prototype.addTelemetryProcessor=function(g){this._telemetryProcessors.push(g)},m.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},m.prototype.runTelemetryProcessors=function(g,E){var T=!0,O=this._telemetryProcessors.length;if(O===0)return T;E=E||{},E.correlationContext=s.CorrelationContextManager.getCurrentContext();for(var P=0;P<O;++P)try{var A=this._telemetryProcessors[P];if(A&&A.apply(null,[g,E])===!1){T=!1;break}}catch(M){T=!0,c.warn("One of telemetry processors failed, telemetry item will be sent.",M,g)}return T&&(g&&g.tags&&(g.tags=f.validateStringMap(g.tags)),g&&g.data&&g.data.baseData&&g.data.baseData.properties&&(g.data.baseData.properties=f.validateStringMap(g.data.baseData.properties))),T},m}();i.exports=v}),Om=x((e,i)=>{"use strict";var t=e&&e.__extends||function(){var s=function(l,f){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,p){c.__proto__=p}||function(c,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(c[v]=p[v])},s(l,f)};return function(l,f){s(l,f);function c(){this.constructor=l}l.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)}}(),n=Am(),u=Ol(),a=hi(),o=mr(),r=function(s){t(l,s);function l(){return s!==null&&s.apply(this,arguments)||this}return l.prototype.trackNodeHttpRequestSync=function(f){f&&f.request&&f.response&&f.duration?u.trackRequestSync(this,f):o.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},l.prototype.trackNodeHttpRequest=function(f){(f.duration||f.error)&&o.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),f&&f.request&&f.response?u.trackRequest(this,f):o.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},l.prototype.trackNodeHttpDependency=function(f){f&&f.request?a.trackRequest(this,f):o.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},l}(n);i.exports=r}),Pm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),Cm=x(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.Configuration=e.wrapWithCorrelationContext=e.startOperation=e.getCorrelationContext=e.start=e.setup=e.liveMetricsClient=e.defaultClient=e.DistributedTracingModes=void 0;var i=qn(),t=em(),n=tm(),u=ja(),a=Al(),o=fm(),r=hi(),s=Ol(),l=Hn(),f=mr(),c=vm(),p=gm();e.TelemetryClient=Om(),e.Contracts=Mr(),e.azureFunctionsTypes=Pm();var v;(function(Ae){Ae[Ae.AI=0]="AI",Ae[Ae.AI_AND_W3C=1]="AI_AND_W3C"})(v=e.DistributedTracingModes||(e.DistributedTracingModes={}));var m=!0,g=!1,E=!0,T=!0,O=!0,P=!1,A=!0,M=!0,j=!0,G=!0,B,Y=!1,ne=!0,ye,Re=void 0,st=void 0,ot,Dt,at,oe,ge,le,Ue,X,Ee=!1,se;function $e(Ae){return e.defaultClient?f.info("The default client is already setup"):(e.defaultClient=new e.TelemetryClient(Ae),ot=new t(e.defaultClient),Dt=new n(e.defaultClient),at=new u(e.defaultClient),oe=new a(e.defaultClient),ge=new o(e.defaultClient),Ue=new s(e.defaultClient),X=new r(e.defaultClient),le||(le=new p.AutoCollectNativePerformance(e.defaultClient))),e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(j,Re,st),ve}e.setup=$e;function rt(){return e.defaultClient?(Ee=!0,ot.enable(m,g),Dt.enable(E),at.enable(T),oe.enable(O),ge.enable(P,e.defaultClient.config),le.enable(ne,ye),Ue.useAutoCorrelation(G,B),Ue.enable(A),X.enable(M),e.liveMetricsClient&&Y&&e.liveMetricsClient.enable(Y)):f.warn("Start cannot be called before setup"),ve}e.start=rt;function W(){return G?i.CorrelationContextManager.getCurrentContext():null}e.getCorrelationContext=W;function ee(Ae,Ne){return i.CorrelationContextManager.startOperation(Ae,Ne)}e.startOperation=ee;function re(Ae,Ne){return i.CorrelationContextManager.wrapCallback(Ae,Ne)}e.wrapWithCorrelationContext=re;var ve=function(){function Ae(){}return Ae.setDistributedTracingMode=function(Ne){return l.w3cEnabled=Ne===v.AI_AND_W3C,Ae},Ae.setAutoCollectConsole=function(Ne,Qe){return Qe===void 0&&(Qe=!1),m=Ne,g=Qe,Ee&&ot.enable(Ne,Qe),Ae},Ae.setAutoCollectExceptions=function(Ne){return E=Ne,Ee&&Dt.enable(Ne),Ae},Ae.setAutoCollectPerformance=function(Ne,Qe){Qe===void 0&&(Qe=!0),T=Ne;var At=p.AutoCollectNativePerformance.parseEnabled(Qe);return ne=At.isEnabled,ye=At.disabledMetrics,Ee&&(at.enable(Ne),le.enable(At.isEnabled,At.disabledMetrics)),Ae},Ae.setAutoCollectPreAggregatedMetrics=function(Ne){return O=Ne,Ee&&oe.enable(Ne),Ae},Ae.setAutoCollectHeartbeat=function(Ne){return P=Ne,Ee&&ge.enable(Ne,e.defaultClient.config),Ae},Ae.setAutoCollectRequests=function(Ne){return A=Ne,Ee&&Ue.enable(Ne),Ae},Ae.setAutoCollectDependencies=function(Ne){return M=Ne,Ee&&X.enable(Ne),Ae},Ae.setAutoDependencyCorrelation=function(Ne,Qe){return G=Ne,B=Qe,Ee&&Ue.useAutoCorrelation(Ne,Qe),Ae},Ae.setUseDiskRetryCaching=function(Ne,Qe,At){return j=Ne,Re=Qe,st=At,e.defaultClient&&e.defaultClient.channel&&e.defaultClient.channel.setUseDiskRetryCaching(Ne,Qe,At),Ae},Ae.setInternalLogging=function(Ne,Qe){return Ne===void 0&&(Ne=!1),Qe===void 0&&(Qe=!0),f.enableDebug=Ne,f.disableWarnings=!Qe,Ae},Ae.setSendLiveMetrics=function(Ne){return Ne===void 0&&(Ne=!1),e.defaultClient?(!e.liveMetricsClient&&Ne?(e.liveMetricsClient=new c(e.defaultClient.config,null),se=new u(e.liveMetricsClient,1e3,!0),e.liveMetricsClient.addCollector(se),e.defaultClient.quickPulseClient=e.liveMetricsClient):e.liveMetricsClient&&e.liveMetricsClient.enable(Ne),Y=Ne,Ae):(f.warn("Live metrics client cannot be setup without the default client"),Ae)},Ae.start=rt,Ae}();e.Configuration=ve;function Ve(){l.w3cEnabled=!0,e.defaultClient=null,Ee=!1,ot&&ot.dispose(),Dt&&Dt.dispose(),at&&at.dispose(),oe&&oe.dispose(),ge&&ge.dispose(),le&&le.dispose(),Ue&&Ue.dispose(),X&&X.dispose(),e.liveMetricsClient&&(e.liveMetricsClient.enable(!1),Y=!1,e.liveMetricsClient=void 0)}e.dispose=Ve}),Cl={};sp(Cl,{default:()=>Fm});Rl.exports=up(Cl);var Aa=eo(require("os")),hn=eo(require("vscode")),Rm=eo(require("https")),Vr=class{constructor(e){this.vscodeAPI=e}getTelemetryLevel(){let e="telemetry",i="enableTelemetry";try{let t=this.vscodeAPI.env.telemetryConfiguration;return t.isUsageEnabled&&t.isErrorsEnabled&&t.isCrashEnabled?"on":t.isErrorsEnabled&&t.isCrashEnabled?"error":"off"}catch{return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(e).get(i)?"on":"off"}}static applyReplacements(e,i){for(let t of Object.keys(e))for(let n of i)n.lookup.test(t)&&(n.replacementString!==void 0?e[t]=n.replacementString:delete e[t])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getInstance(e){return Vr._instance||(Vr._instance=new Vr(e)),Vr._instance}},Dm=class{constructor(e,i,t,n,u,a){this.extensionId=e,this.extensionVersion=i,this.telemetryAppender=t,this.osShim=n,this.vscodeAPI=u,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!a,this.updateUserOptStatus(),u.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(u.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(u.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(u.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let e=Vr.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=e==="on",this.errorOptIn=e==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(e){if(!e)return"none";let i="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(t=>{e.indexOf(`${t}`)===0&&(i=t)}),i}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(e,i){if(e===null||typeof e!="object"||typeof i!="function")return e;let t={};for(let n in e)t[n]=i(n,e[n]);return t}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let e={};if(e["common.os"]=this.osShim.platform,e["common.nodeArch"]=this.osShim.architecture,e["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(e["common.vscodemachineid"]=this.vscodeAPI.env.machineId,e["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,e["common.vscodeversion"]=this.vscodeAPI.version,e["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",e["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:e["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return e}anonymizeFilePaths(e,i){let t;if(e==null)return"";let n=[];this.vscodeAPI.env.appRoot!==""&&n.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let u=e;if(i){let a=[];for(let l of n)for(;(t=l.exec(e))&&t;)a.push([t.index,l.lastIndex]);let o=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,r=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,s=0;for(u="";(t=r.exec(e))&&t;)t[0]&&!o.test(t[0])&&a.every(([l,f])=>t.index<l||t.index>=f)&&(u+=e.substring(s,t.index)+"<REDACTED: user-file-path>",s=r.lastIndex);s<e.length&&(u+=e.substr(s))}for(let a of n)u=u.replace(a,"");return u}removePropertiesWithPossibleUserInfo(e){if(typeof e!="object")return;let i={};for(let t of Object.keys(e)){let n=e[t];if(!n)continue;let u=/@[a-zA-Z0-9-.]+/,a=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,o=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;a.test(n.toLowerCase())?i[t]="<REDACTED: secret>":u.test(n)?i[t]="<REDACTED: email>":o.test(n)?i[t]="<REDACTED: token>":i[t]=n}return i}get telemetryLevel(){switch(Vr.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(e,i,t,n,u){if((this.userOptIn||u)&&e!==""){if(i=Pn(Pn({},i),this.getCommonProperties()),n){let a=this.cloneAndChange(i,(o,r)=>this.anonymizeFilePaths(r,this.firstParty));i=this.removePropertiesWithPossibleUserInfo(a)}i=i??{},t=t??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:i,measurements:t})}}sendTelemetryEvent(e,i,t){this.internalSendTelemetryEvent(e,i,t,!0,!1)}sendRawTelemetryEvent(e,i,t){this.internalSendTelemetryEvent(e,i,t,!1,!1)}sendDangerousTelemetryEvent(e,i,t,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(e,i,t,n,!0)}internalSendTelemetryErrorEvent(e,i,t,n,u){if((this.shouldSendErrorTelemetry()||u)&&e!==""){if(i=Pn(Pn({},i),this.getCommonProperties()),n){let a=this.cloneAndChange(i,(o,r)=>this.anonymizeFilePaths(r,this.firstParty));i=this.removePropertiesWithPossibleUserInfo(a)}i=i??{},t=t??{},e=`${this.extensionId}/${e}`,this.telemetryAppender.logEvent(e,{properties:i,measurements:t})}}sendTelemetryErrorEvent(e,i,t){this.internalSendTelemetryErrorEvent(e,i,t,!0,!1)}sendDangerousTelemetryErrorEvent(e,i,t,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(e,i,t,n,!0)}internalSendTelemetryException(e,i,t,n,u){if((this.shouldSendErrorTelemetry()||u)&&e){if(i=Pn(Pn({},i),this.getCommonProperties()),n){let a=this.cloneAndChange(i,(o,r)=>this.anonymizeFilePaths(r,this.firstParty));e.stack&&(e.stack=this.anonymizeFilePaths(e.stack,this.firstParty)),i=this.removePropertiesWithPossibleUserInfo(a)}i=i??{},t=t??{},this.telemetryAppender.logException(e,{properties:i,measurements:t})}}sendTelemetryException(e,i,t){this.internalSendTelemetryException(e,i,t,!0,!1)}sendDangerousTelemetryException(e,i,t,n=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(e,i,t,n,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(e=>e.dispose()))}},xm=class{constructor(e,i){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=i,this._key=e}logEvent(e,i){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:e,data:i});return}this._telemetryClient.logEvent(e,i)}logException(e,i){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:e,data:i});return}this._telemetryClient.logException(e,i)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:i})=>this.logEvent(e,i)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:i})=>this.logException(e,i)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=2,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=2}))}},Nm=async(e,i,t)=>{let n=await Promise.resolve().then(()=>Nr(wa())),u=await Promise.resolve().then(()=>Nr(jc())),a=new n.AppInsightsCore,o=new u.PostChannel,r={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[o]]};if(t){r.extensionConfig={};let l={alwaysUseXhrOverride:!0,httpXHROverride:t};r.extensionConfig[o.identifier]=l}let s=i.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(r,[]),a.addTelemetryInitializer(l=>{!s||(l.ext=l.ext??{},l.ext.utc=l.ext.utc??{},l.ext.utc.flags=8462029)}),a},Mm=async(e,i,t)=>{let n=await Nm(e,i,t);return{logEvent:(u,a)=>{try{n?.track({name:u,baseData:{name:u,properties:a?.properties,measurements:a?.measurements}})}catch(o){throw new Error(`Failed to log event to app insights!
`+o.message)}},logException:(u,a)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{n?.unload()}catch(u){throw new Error(`Failed to flush app insights!
`+u.message)}}}},km=async(e,i)=>{let t;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let n=await Promise.resolve().then(()=>eo(Cm()));n.defaultClient?(t=new n.TelemetryClient(e),t.channel.setUseDiskRetryCaching(!0)):(n.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),t=n.defaultClient),hn&&hn.env&&(t.context.tags[t.context.keys.userId]=hn.env.machineId,t.context.tags[t.context.keys.sessionId]=hn.env.sessionId,t.context.tags[t.context.keys.cloudRole]=hn.env.appName,t.context.tags[t.context.keys.cloudRoleInstance]=hn.env.appName),e&&e.indexOf("AIF-")===0&&(t.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(n){return Promise.reject(`Failed to initialize app insights!
`+n.message)}return i!=null&&i.length&&Lm(t,i),{logEvent:(n,u)=>{try{t?.trackEvent({name:n,properties:u?.properties,measurements:u?.measurements})}catch(a){throw new Error(`Failed to log event to app insights!
`+a.message)}},logException:(n,u)=>{try{t?.trackException({exception:n,properties:u?.properties,measurements:u?.measurements})}catch(a){throw new Error(`Failed to log exception to app insights!
`+a.message)}},flush:async()=>{try{t?.flush()}catch(n){throw new Error(`Failed to flush app insights!
`+n.message)}}}};function Lm(e,i){e.addTelemetryProcessor(t=>(Array.isArray(t.tags)?t.tags.forEach(n=>Vr.applyReplacements(n,i)):t.tags&&Vr.applyReplacements(t.tags,i),t.data.baseData&&Vr.applyReplacements(t.data.baseData,i),!0))}function jm(){return{sendPOST:(e,i)=>{let t={method:"POST",headers:ap(Pn({},e.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)})};try{let n=Rm.request(e.urlString,t,u=>{u.on("data",function(a){i(u.statusCode??200,u.headers,a.toString())}),u.on("error",function(){i(0,{})})});n.write(e.data),n.end()}catch{i(0,{})}}}}var Fm=class extends Dm{constructor(e,i,t,n,u){let a=r=>km(r,u);Vr.shouldUseOneDataSystemSDK(t)&&(a=r=>Mm(r,hn,jm()));let o=new xm(t,a);t&&(t.indexOf("AIF-")===0||Vr.shouldUseOneDataSystemSDK(t))&&(n=!0),super(e,i,o,{release:Aa.release(),platform:Aa.platform(),architecture:Aa.arch()},hn,n)}}});var Ga=Ht(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});var qa=class{constructor(i,t,n){this.bias=i,this.backoffA=t,this.backoffB=n}next(i){let t=this.backoffA.next(i),n=this.backoffB.next(i);return t&&n&&ql(this.bias,t,n)}};Ba.CompositeBackoff=qa;var ql=(e,i,t)=>({get duration(){switch(e){case"a":return i.duration;case"b":return t.duration;case"max":return Math.max(t.duration,i.duration);case"min":return Math.min(t.duration,i.duration);default:throw new Error(`Unknown bias "${e}" given to CompositeBackoff`)}},next(n){let u=i.next(n),a=t.next(n);return u&&a&&ql(e,u,a)}})});var Va=Ht(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});var fo=class{constructor(i,t){this.interval=i,this.limit=t}next(){return Bl(this.interval,this.limit)}};po.ConstantBackoff=fo;po.NeverRetryBackoff=new fo(0,0);var Bl=(e,i,t=0)=>({duration:e,next(){if(i===void 0)return this;if(!(t>=i-1))return Bl(e,i,t+1)}})});var Ka=Ht(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});var za=class{constructor(i){this.fn=i}next(i){return $a(this.fn).next(i)}};Wa.DelegateBackoff=za;var $a=(e,i,t=0)=>({duration:t,next(n){let u=e(n,i);if(u!==void 0)return typeof u=="number"?$a(e,i,u):$a(e,u.state,u.delay)}})});var Xa=Ht(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.noJitterGenerator=(e=0,i)=>[Math.min(i.maxDelay,i.initialDelay*2**e),e+1];gn.fullJitterGenerator=(e,i)=>{let[t,n]=gn.noJitterGenerator(e,i);return[Math.floor(Math.random()*t),n]};gn.halfJitterGenerator=(e,i)=>{let[t,n]=gn.noJitterGenerator(e,i);return[Math.floor((t+Math.random()*t)/2),n]};var tg=4,rg=1/1.4;gn.decorrelatedJitterGenerator=(e,i)=>{let[t,n]=e||[0,0],u=t+Math.random(),a=Math.pow(i.exponent,u)*Math.tanh(Math.sqrt(tg*u)),o=Math.max(0,a-n);return[Math.min(o*rg*i.initialDelay,i.maxDelay),[t+1,a]]}});var zl=Ht(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});var ng=Xa(),Gl={generator:ng.decorrelatedJitterGenerator,maxDelay:3e4,maxAttempts:1/0,exponent:2,initialDelay:128},Qa=class{constructor(i){this.options=i?{...Gl,...i}:Gl}next(){return Vl(this.options).next(void 0)}};Ya.ExponentialBackoff=Qa;var Vl=(e,i,t=0,n=-1)=>({duration:t,next(){if(n>=e.maxAttempts-1)return;let[u,a]=e.generator(i,e);return Vl(e,a,u,n+1)}})});var es=Ht(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});var Za=class{constructor(i){this.durations=i}next(){return $l(this.durations,0)}};Ja.IterableBackoff=Za;var $l=(e,i)=>({duration:e[i],next:()=>i<e.length-1?$l(e,i+1):void 0})});var ts=Ht(ho=>{"use strict";function Gn(e){for(var i in e)ho.hasOwnProperty(i)||(ho[i]=e[i])}Object.defineProperty(ho,"__esModule",{value:!0});Gn(Ga());Gn(Va());Gn(Ka());Gn(zl());Gn(Xa());Gn(es())});var vo=Ht(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});var rs=class extends Error{constructor(i="Operation cancelled"){super(i),this.message=i,this.isTaskCancelledError=!0}};ns.TaskCancelledError=rs});var yn=Ht(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var Wl=vo();_n.noopDisposable={dispose:()=>{}};var ig;(function(e){e.once=(i,t)=>{let n=!1,u;return u=i(a=>{t(a),u?u.dispose():n=!0}),n?(u.dispose(),_n.noopDisposable):u},e.toPromise=(i,t)=>t?t.isCancellationRequested?Promise.reject(new Wl.TaskCancelledError):new Promise((n,u)=>{let a=e.once(i,r=>{o.dispose(),n(r)}),o=e.once(t.onCancellationRequested,()=>{a.dispose(),u(new Wl.TaskCancelledError)})}):new Promise(n=>e.once(i,n))})(ig=_n.Event||(_n.Event={}));var mo=class{constructor(){this.addListener=i=>this.addListenerInner(i)}get size(){return this.listeners?typeof this.listeners=="function"?1:this.listeners.length:0}emit(i){if(this.listeners)if(typeof this.listeners=="function")this.listeners(i);else for(let t of this.listeners)t(i)}addListenerInner(i){return this.listeners?typeof this.listeners=="function"?this.listeners=[this.listeners,i]:this.listeners.push(i):this.listeners=i,{dispose:()=>this.removeListener(i)}}removeListener(i){if(!this.listeners)return;if(typeof this.listeners=="function"){this.listeners===i&&(this.listeners=void 0);return}let t=this.listeners.indexOf(i);t!==-1&&(this.listeners.length===2?this.listeners=t===0?this.listeners[1]:this.listeners[0]:this.listeners=this.listeners.slice(0,t).concat(this.listeners.slice(t+1)))}};_n.EventEmitter=mo;var is=class extends mo{constructor(){super(...arguments),this.addListener=i=>{let t=this.addListenerInner(i);return this.lastValue&&i(this.lastValue.value),t}}get hasEmitted(){return!!this.lastValue}emit(i){this.lastValue={value:i},super.emit(i)}};_n.MemorizingEventEmitter=is});var nn=Ht(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});var mi=yn(),os=class{constructor(i){this.onCancel=new mi.MemorizingEventEmitter,this.token=new En(this.onCancel.addListener),i&&(this.parentListener=i.onCancellationRequested(()=>this.cancel()))}cancel(){this.parentListener&&(this.parentListener.dispose(),this.parentListener=void 0),this.onCancel.hasEmitted||this.onCancel.emit()}};go.CancellationTokenSource=os;var En=class{constructor(i){this.onCancellationRequested=i,this.isRequested=!1,mi.Event.once(i,()=>this.isRequested=!0)}get isCancellationRequested(){return this.isRequested}cancellation(i){return mi.Event.toPromise(this.onCancellationRequested,i)}};go.CancellationToken=En;En.None=new En(()=>mi.noopDisposable);En.Cancelled=new En(e=>(e(void 0),mi.noopDisposable))});var Vn=Ht(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});var Kl=yn();_o.returnOrThrow=e=>{if("error"in e)throw e.error;return"success"in e?e.success:e.value};var og=()=>{if(typeof performance<"u"){let e=performance.now();return()=>performance.now()-e}else{let e=process.hrtime.bigint();return()=>Number(process.hrtime.bigint()-e)/1e6}},gi=class{constructor(i=()=>!1,t=()=>!1){this.errorFilter=i,this.resultFilter=t,this.successEmitter=new Kl.EventEmitter,this.failureEmitter=new Kl.EventEmitter,this.onSuccess=this.successEmitter.addListener,this.onFailure=this.failureEmitter.addListener}derive(){let i=new gi(this.errorFilter,this.resultFilter);return i.onSuccess(t=>this.successEmitter.emit(t)),i.onFailure(t=>this.failureEmitter.emit(t)),i}async invoke(i,...t){let n=this.successEmitter.size||this.failureEmitter.size?og():null;try{let u=await i(...t);return this.resultFilter(u)?(n&&this.failureEmitter.emit({duration:n(),handled:!0,reason:{value:u}}),{value:u}):(n&&this.successEmitter.emit({duration:n()}),{success:u})}catch(u){let a=this.errorFilter(u);if(n&&this.failureEmitter.emit({duration:n(),handled:a,reason:{error:u}}),!a)throw u;return{error:u}}}};_o.ExecuteWrapper=gi});var us=Ht(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});var as=class extends Error{constructor(i="Execution prevented because the circuit breaker is open"){super(i),this.isBrokenCircuitError=!0}};ss.BrokenCircuitError=as});var fs=Ht(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});var cs=class extends Error{constructor(i,t){super(`Bulkhead capacity exceeded (0/${i} execution slots, 0/${t} available)`),this.isBulkheadRejectedError=!0}};ls.BulkheadRejectedError=cs});var hs=Ht(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});var ag=us(),ds=class extends ag.BrokenCircuitError{constructor(){super("Execution prevented because the circuit breaker is open"),this.isIsolatedCircuitError=!0}};ps.IsolatedCircuitError=ds});var Eo=Ht(bn=>{"use strict";function yo(e){for(var i in e)bn.hasOwnProperty(i)||(bn[i]=e[i])}Object.defineProperty(bn,"__esModule",{value:!0});yo(us());yo(fs());yo(hs());yo(vo());bn.isBrokenCircuitError=e=>!!e&&e instanceof Error&&"isBrokenCircuitError"in e;bn.isBulkheadRejectedError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;bn.isIsolatedCircuitError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e;bn.isTaskCancelledError=e=>!!e&&e instanceof Error&&"isBulkheadRejectedError"in e});var So=Ht(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});var sg=nn(),bo=yn(),Xl=Vn(),Ql=Eo(),ug=hs(),er;(function(e){e[e.Closed=0]="Closed",e[e.Open=1]="Open",e[e.HalfOpen=2]="HalfOpen",e[e.Isolated=3]="Isolated"})(er=_i.CircuitState||(_i.CircuitState={}));var vs=class{constructor(i,t){this.options=i,this.executor=t,this.breakEmitter=new bo.EventEmitter,this.resetEmitter=new bo.EventEmitter,this.halfOpenEmitter=new bo.EventEmitter,this.stateChangeEmitter=new bo.EventEmitter,this.innerState={value:er.Closed},this.onBreak=this.breakEmitter.addListener,this.onReset=this.resetEmitter.addListener,this.onHalfOpen=this.halfOpenEmitter.addListener,this.onStateChange=this.stateChangeEmitter.addListener,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}get state(){return this.innerState.value}get lastFailure(){return this.innerLastFailure}isolate(){this.innerState.value!==er.Isolated&&(this.innerState={value:er.Isolated,counters:0},this.breakEmitter.emit({isolated:!0}),this.stateChangeEmitter.emit(er.Isolated)),this.innerState.counters++;let i=!1;return{dispose:()=>{i||(i=!0,this.innerState.value===er.Isolated&&!--this.innerState.counters&&(this.innerState={value:er.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(er.Closed)))}}}async execute(i,t=sg.CancellationToken.None){let n=this.innerState;switch(n.value){case er.Closed:let u=await this.executor.invoke(i,{cancellationToken:t});return"success"in u?this.options.breaker.success(n.value):(this.innerLastFailure=u,this.options.breaker.failure(n.value)&&this.open(u)),Xl.returnOrThrow(u);case er.HalfOpen:if(await n.test.catch(()=>{}),this.state===er.Closed&&t.isCancellationRequested)throw new Ql.TaskCancelledError;return this.execute(i);case er.Open:if(Date.now()-n.openedAt<this.options.halfOpenAfter)throw new Ql.BrokenCircuitError;let a=this.halfOpen(i,t);return this.innerState={value:er.HalfOpen,test:a},this.stateChangeEmitter.emit(er.HalfOpen),a;case er.Isolated:throw new ug.IsolatedCircuitError;default:throw new Error(`Unexpected circuit state ${n}`)}}async halfOpen(i,t){this.halfOpenEmitter.emit();try{let n=await this.executor.invoke(i,{cancellationToken:t});return"success"in n?(this.options.breaker.success(er.HalfOpen),this.close()):(this.innerLastFailure=n,this.options.breaker.failure(er.HalfOpen),this.open(n)),Xl.returnOrThrow(n)}catch(n){throw this.close(),n}}open(i){this.state===er.Isolated||this.state===er.Open||(this.innerState={value:er.Open,openedAt:Date.now()},this.breakEmitter.emit(i),this.stateChangeEmitter.emit(er.Open))}close(){this.state===er.HalfOpen&&(this.innerState={value:er.Closed},this.resetEmitter.emit(),this.stateChangeEmitter.emit(er.Closed))}};_i.CircuitBreakerPolicy=vs});var Zl=Ht(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});var Yl=So(),ms=class{constructor({threshold:i,duration:t,minimumRps:n}){if(this.windows=[],this.currentWindow=0,this.currentFailures=0,this.currentSuccesses=0,i<=0||i>=1)throw new RangeError(`SamplingBreaker threshold should be between (0, 1), got ${i}`);this.threshold=i;let u=Math.max(5,Math.ceil(t/1e3));for(let a=0;a<u;a++)this.windows.push({startedAt:0,failures:0,successes:0});this.windowSize=Math.round(t/u),this.duration=this.windowSize*u,n?this.minimumRpms=n/1e3:this.minimumRpms=5/(i*1e3)}success(i){i===Yl.CircuitState.HalfOpen&&this.resetWindows(),this.push(!0)}failure(i){if(this.push(!1),i!==Yl.CircuitState.Closed)return!0;let t=this.currentSuccesses+this.currentFailures;return t<this.duration*this.minimumRpms?!1:this.currentFailures>this.threshold*t}resetWindows(){this.currentFailures=0,this.currentSuccesses=0;for(let i of this.windows)i.failures=0,i.successes=0,i.startedAt=0}rotateWindow(i){let t=(this.currentWindow+1)%this.windows.length;this.currentFailures-=this.windows[t].failures,this.currentSuccesses-=this.windows[t].successes;let n=this.windows[t]={failures:0,successes:0,startedAt:i};return this.currentWindow=t,n}push(i){let t=Date.now(),n=this.windows[this.currentWindow];t-n.startedAt>=this.windowSize&&(n=this.rotateWindow(t)),i?(n.successes++,this.currentSuccesses++):(n.failures++,this.currentFailures++)}};gs.SamplingBreaker=ms});var Jl=Ht(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var _s=class{constructor(i){this.threshold=i,this.count=0}success(){this.count=0}failure(){return++this.count>=this.threshold}};ys.ConsecutiveBreaker=_s});var tf=Ht(To=>{"use strict";function ef(e){for(var i in e)To.hasOwnProperty(i)||(To[i]=e[i])}Object.defineProperty(To,"__esModule",{value:!0});ef(Zl());ef(Jl())});var rf=Ht(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.defer=()=>{let e,i,t=new Promise((n,u)=>{e=n,i=u});return{resolve:e,reject:i,promise:t}}});var Ts=Ht(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});var cg=nn(),lg=rf(),fg=yn(),dg=Vn(),pg=fs(),hg=Eo(),bs=class{constructor(i,t){this.capacity=i,this.queueCapacity=t,this.active=0,this.queue=[],this.onRejectEmitter=new fg.EventEmitter,this.executor=new dg.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onReject=this.onRejectEmitter.addListener}get executionSlots(){return this.capacity-this.active}get queueSlots(){return this.queueCapacity-this.queue.length}async execute(i,t=cg.CancellationToken.None){if(t.isCancellationRequested)throw new hg.TaskCancelledError;if(this.active<this.capacity){this.active++;try{return await i({cancellationToken:t})}finally{this.active--,this.dequeue()}}if(this.queue.length<this.queueCapacity){let{resolve:n,reject:u,promise:a}=lg.defer();return this.queue.push({ct:t,fn:i,resolve:n,reject:u}),a}throw this.onRejectEmitter.emit(),new pg.BulkheadRejectedError(this.capacity,this.queueCapacity)}dequeue(){let i=this.queue.shift();!i||Promise.resolve().then(()=>this.execute(i.fn,i.ct)).then(i.resolve).catch(i.reject)}};Ss.BulkheadPolicy=bs});var As=Ht(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var vg=nn(),Is=class{constructor(i,t){this.executor=i,this.value=t,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(i,t=vg.CancellationToken.None){let n=await this.executor.invoke(i,{cancellationToken:t});return"success"in n?n.success:this.value()}};ws.FallbackPolicy=Is});var Cs=Ht(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var mg=nn(),nf=Vn(),Os=class{constructor(){this.executor=new nf.ExecuteWrapper,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure}async execute(i,t=mg.CancellationToken.None){return nf.returnOrThrow(await this.executor.invoke(i,{cancellationToken:t}))}};Ps.NoopPolicy=Os});var xs=Ht(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});var gg=ts(),_g=Ga(),Rs=Va(),yg=Ka(),Eg=es(),bg=nn(),of=yn(),Sg=(e,i)=>new Promise(t=>{let n=setTimeout(t,e);i&&n.unref()}),yi=class{constructor(i,t){this.options=i,this.executor=t,this.onGiveUpEmitter=new of.EventEmitter,this.onRetryEmitter=new of.EventEmitter,this.onSuccess=this.executor.onSuccess,this.onFailure=this.executor.onFailure,this.onRetry=this.onRetryEmitter.addListener,this.onGiveUp=this.onGiveUpEmitter.addListener}attempts(i){return this.composeBackoff("a",new Rs.ConstantBackoff(1,i))}delay(i){return this.composeBackoff("b",typeof i=="number"?new Rs.ConstantBackoff(i):new Eg.IterableBackoff(i))}delegate(i){return this.composeBackoff("b",new yg.DelegateBackoff(i))}exponential(i={}){return this.composeBackoff("b",new gg.ExponentialBackoff(i))}backoff(i){return this.composeBackoff("b",i)}dangerouslyUnref(){return this.derivePolicy({...this.options,unref:!0})}async execute(i,t=bg.CancellationToken.None){let n=this.options.backoff||new Rs.ConstantBackoff(0,1),u;for(let a=0;;a++){let o=await this.executor.invoke(i,{attempt:a,cancellationToken:t});if("success"in o)return o.success;if(!t.isCancellationRequested){let r={attempt:a+1,cancellationToken:t,result:o};if(a===0?u=n.next(r):u&&(u=u.next(r)),u){let s=u.duration,l=Sg(s,!!this.options.unref);this.onRetryEmitter.emit({...o,delay:s}),await l;continue}}if(this.onGiveUpEmitter.emit(o),"error"in o)throw o.error;return o.value}}composeBackoff(i,t){return this.options.backoff&&(t=new _g.CompositeBackoff(i,this.options.backoff,t)),this.derivePolicy({...this.options,backoff:t})}derivePolicy(i){let t=new yi(i,this.executor.derive());return t.onRetry(n=>this.onRetryEmitter.emit(n)),t}};Ds.RetryPolicy=yi});var Ms=Ht(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});var af=nn(),Tg=yn(),Ns=Vn(),Ig=vo(),sf;(function(e){e.Cooperative="optimistic",e.Aggressive="aggressive"})(sf=bi.TimeoutStrategy||(bi.TimeoutStrategy={}));var Ei=class{constructor(i,t,n=new Ns.ExecuteWrapper,u=!1){this.duration=i,this.strategy=t,this.executor=n,this.unref=u,this.timeoutEmitter=new Tg.EventEmitter,this.onTimeout=this.timeoutEmitter.addListener,this.onFailure=this.executor.onFailure,this.onSuccess=this.executor.onSuccess}dangerouslyUnref(){return new Ei(this.duration,this.strategy,this.executor,!0)}async execute(i,t=af.CancellationToken.None){let n=new af.CancellationTokenSource(t),u=setTimeout(()=>n.cancel(),this.duration);this.unref&&u.unref();let a={cancellation:n.token,cancellationToken:n.token},o=n.token.onCancellationRequested(()=>this.timeoutEmitter.emit());try{return this.strategy===sf.Cooperative?Ns.returnOrThrow(await this.executor.invoke(i,a,n.token)):await this.executor.invoke(async()=>Promise.race([Promise.resolve(i(a,n.token)),n.token.cancellation(n.token).then(()=>{throw new Ig.TaskCancelledError(`Operation timed out after ${this.duration}ms`)})])).then(Ns.returnOrThrow)}finally{o.dispose(),n.cancel(),clearTimeout(u)}}};bi.TimeoutPolicy=Ei});var uf=Ht(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});var wg=Ts(),Ag=nn(),Og=So(),ks=Vn(),Pg=As(),Cg=Cs(),Rg=xs(),Dg=Ms(),Io=(e,i)=>i?t=>t instanceof e&&i(t):t=>t instanceof e,xg=()=>!0,Si=()=>!1,kr=class{constructor(i){this.options=i}static wrap(...i){return{onFailure:i[0].onFailure,onSuccess:i[0].onSuccess,execute(t,n){let u=(a,o)=>o===i.length?t(a):i[o].execute(r=>u({...a,...r},o+1),a.cancellationToken);return Promise.resolve(u({cancellationToken:n},0))}}}static bulkhead(i,t=0){return new wg.BulkheadPolicy(i,t)}static handleAll(){return new kr({errorFilter:xg,resultFilter:Si})}static handleType(i,t){return new kr({errorFilter:Io(i,t),resultFilter:Si})}static handleWhen(i){return new kr({errorFilter:i,resultFilter:Si})}static handleResultType(i,t){return new kr({errorFilter:Si,resultFilter:Io(i,t)})}static handleWhenResult(i){return new kr({errorFilter:Si,resultFilter:i})}static timeout(i,t){return new Dg.TimeoutPolicy(i,t)}static use(i){return(t,n,u)=>{let a=u.value;if(typeof a!="function")throw new Error(`Can only decorate functions with @cockatiel, got ${typeof a}`);u.value=function(...o){let r=o[o.length-1]instanceof Ag.CancellationToken?o.pop():void 0;return i.execute(s=>a.apply(this,[...o,s]),r)}}}orType(i,t){let n=Io(i,t);return new kr({...this.options,errorFilter:u=>this.options.errorFilter(u)||n(u)})}orWhen(i){return new kr({...this.options,errorFilter:t=>this.options.errorFilter(t)||i(t)})}orWhenResult(i){return new kr({...this.options,resultFilter:t=>this.options.resultFilter(t)||i(t)})}orResultType(i,t){let n=Io(i,t);return new kr({...this.options,resultFilter:u=>this.options.resultFilter(u)||n(u)})}retry(){return new Rg.RetryPolicy({},new ks.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter))}circuitBreaker(i,t){return new Og.CircuitBreakerPolicy({breaker:t,halfOpenAfter:i},new ks.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter))}fallback(i){return new Pg.FallbackPolicy(new ks.ExecuteWrapper(this.options.errorFilter,this.options.resultFilter),typeof i=="function"?i:()=>i)}};Ls.Policy=kr;kr.noop=new Cg.NoopPolicy});var js=Ht(zn=>{"use strict";function $r(e){for(var i in e)zn.hasOwnProperty(i)||(zn[i]=e[i])}Object.defineProperty(zn,"__esModule",{value:!0});$r(ts());$r(tf());$r(Ts());$r(nn());$r(So());var cf=yn();zn.Event=cf.Event;zn.EventEmitter=cf.EventEmitter;$r(Eo());$r(As());$r(Cs());$r(uf());$r(xs());$r(Ms())});var Wg={};Yd(Wg,{activate:()=>zg,deactivate:()=>$g});module.exports=Zd(Wg);var Sf=Nr(Dl()),Cn=Nr(require("vscode"));var Kr=Nr(require("vscode"));var io=class{constructor(i,t){this.messageHandler=i;this.postMessage=t;this.messageIdCounter=0;this.pendingMessages=new Map}sendEvent(i){this.postMessage({body:i,messageId:this.messageIdCounter++})}sendRequest(i){let t=this.messageIdCounter++;return this.postMessage({body:i,messageId:t}),new Promise((n,u)=>{this.pendingMessages.set(t,{resolve:n,reject:u})})}sendReply(i,t){this.postMessage({body:t,messageId:this.messageIdCounter++,inReplyTo:i.messageId})}handleMessage(i){i.inReplyTo!==void 0?(this.pendingMessages.get(i.inReplyTo)?.resolve(i.body),this.pendingMessages.delete(i.inReplyTo)):Promise.resolve(this.messageHandler(i.body)).then(t=>t&&this.sendReply(i,t))}};function Um(e){for(;e.length;){let i=e.pop();i&&i.dispose()}}var Wr=class{constructor(){this._isDisposed=!1;this._disposables=[]}dispose(){this._isDisposed||(this._isDisposed=!0,Um(this._disposables))}_register(i){return this._isDisposed?i.dispose():this._disposables.push(i),i}get isDisposed(){return this._isDisposed}},oo=class{constructor(i){this._value=i}get value(){return this._value}set value(i){this._value!==i&&(this._value?.dispose(),this._value=i)}dispose(){this.value?.dispose()}};var Hm=require("vscode");function ao(e=32){let i="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++)i+=t.charAt(Math.floor(Math.random()*t.length));return i}var Fa=e=>e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(0,e.byteLength),Ua=e=>typeof Buffer<"u"?Buffer.byteLength(e):new Blob([e]).size,xl=e=>{let i=0;for(let u of e)i+=u.byteLength;let t=new Uint8Array(i),n=0;for(let u of e)t.set(u,n),n+=u.byteLength;return t};var Ha=class extends Wr{constructor(t,n){super();this._extensionURI=t;this._register(n.onDidChangeActiveDocument(u=>{let o=Kr.workspace.getConfiguration("hexeditor").get("inspectorType")==="sidebar"&&!!u;Kr.commands.executeCommand("setContext","hexEditor:showSidebarInspector",o),o&&this.show({autoReveal:!0})}))}resolveWebviewView(t,n,u){this._view=t,t.webview.options={enableScripts:!0,localResourceRoots:[this._extensionURI]},t.webview.html=this._getWebviewHTML(t.webview),t.webview.onDidReceiveMessage(a=>{a.type==="ready"&&t.show()}),this._view.onDidDispose(()=>this._view=void 0),t.onDidChangeVisibility(()=>{t.visible&&this._lastMessage&&t.webview.postMessage(this._lastMessage)}),this._lastMessage&&t.webview.postMessage(this._lastMessage)}handleEditorMessage(t){this._lastMessage=t,this._view?.webview.postMessage(t)}show(t){t?.autoReveal&&!Kr.workspace.getConfiguration("hexeditor.dataInspector").get("autoReveal",!1)||(this._view&&!t?.forceFocus?this._view.show():Kr.commands.executeCommand(`${Ha.viewType}.focus`),this._lastMessage&&this._view?.webview.postMessage(this._lastMessage))}_getWebviewHTML(t){let n=t.asWebviewUri(Kr.Uri.joinPath(this._extensionURI,"dist","inspector.js")),u=t.asWebviewUri(Kr.Uri.joinPath(this._extensionURI,"dist","inspector.css")),a=Kr.workspace.getConfiguration().get("hexeditor.defaultEndianness"),o=ao();return`<!DOCTYPE html>
            <html lang="en">
            <head>
              <meta charset="UTF-8">
              <!--
                Use a content security policy to only allow loading images from https or from our extension directory,
                and only allow scripts that have a specific nonce.
              -->
              <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${t.cspSource}; script-src 'nonce-${o}';">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <link href="${u}" rel="stylesheet">

              <title>Data Inspector</title>
            </head>
            <body>
              <div id="data-inspector">
                <div class="grid-container">
									<!-- Input elements filled in by dataInspector.ts -->
                  <div class="grid-item endian-select">
                    <label for="endianness">Endianness</label>
                  </div>
                  <div class="grid-item endian-select">
                    <select id="endianness">
                      <option value="little" ${a==="little"?"selected":""}>Little Endian</option>
                      <option value="big" ${a==="big"?"selected":""}>Big Endian</option>
                    </select>
                  </div>
                </div>
              </div>
              <script nonce="${o}" src="${n}"><\/script>
            </body>
            </html>`}},Bn=Ha;Bn.viewType="hexEditor.dataInspectorView";var Ml=Nr(require("vscode"));var Bm=/^0x[a-f0-9]+$/i,Gm=/^[0-9]+$/i,kl=e=>{let i=Ml.window.createInputBox();i.placeholder="Enter offset to go to",e.sendEvent({type:6});let t,n=!1;i.onDidChangeValue(u=>{if(!u)t=void 0;else if(Bm.test(u))t=parseInt(u.slice(2),16);else if(Gm.test(u))t=parseInt(u,10);else{i.validationMessage="Offset must be provided as a decimal (12345) or hex (0x12345) address";return}i.validationMessage="",t!==void 0&&(i.validationMessage="",e.sendEvent({type:7,offset:t}))}),i.onDidAccept(()=>{n=!0,t!==void 0&&e.sendEvent({type:8,offset:t})}),i.onDidHide(()=>{n||e.sendEvent({type:10})}),i.show()};var Vm=typeof atob=="function",zm=typeof btoa=="function",co=typeof Buffer=="function",N_=typeof TextDecoder=="function"?new TextDecoder:void 0,M_=typeof TextEncoder=="function"?new TextEncoder:void 0,$m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",vi=Array.prototype.slice.call($m),so=(e=>{let i={};return e.forEach((t,n)=>i[t]=n),i})(vi),Wm=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,uo=String.fromCharCode.bind(String),Ll=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):(e,i=t=>t)=>new Uint8Array(Array.prototype.slice.call(e,0).map(i)),Km=e=>e.replace(/=/g,"").replace(/[+\/]/g,i=>i=="+"?"-":"_"),Fl=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Xm=e=>{let i,t,n,u,a="",o=e.length%3;for(let r=0;r<e.length;){if((t=e.charCodeAt(r++))>255||(n=e.charCodeAt(r++))>255||(u=e.charCodeAt(r++))>255)throw new TypeError("invalid character found");i=t<<16|n<<8|u,a+=vi[i>>18&63]+vi[i>>12&63]+vi[i>>6&63]+vi[i&63]}return o?a.slice(0,o-3)+"===".substring(o):a},Qm=zm?e=>btoa(e):co?e=>Buffer.from(e,"binary").toString("base64"):Xm,jl=co?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,u=e.length;n<u;n+=4096)t.push(uo.apply(null,e.subarray(n,n+4096)));return Qm(t.join(""))},lo=(e,i=!1)=>i?Km(jl(e)):jl(e);var Ym=e=>{if(e=e.replace(/\s+/g,""),!Wm.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let i,t="",n,u;for(let a=0;a<e.length;)i=so[e.charAt(a++)]<<18|so[e.charAt(a++)]<<12|(n=so[e.charAt(a++)])<<6|(u=so[e.charAt(a++)]),t+=n===64?uo(i>>16&255):u===64?uo(i>>16&255,i>>8&255):uo(i>>16&255,i>>8&255,i&255);return t},Zm=Vm?e=>atob(Fl(e)):co?e=>Buffer.from(e,"base64").toString("binary"):Ym,Jm=co?e=>Ll(Buffer.from(e,"base64")):e=>Ll(Zm(e),i=>i.charCodeAt(0)),Ul=e=>Jm(eg(e));var eg=e=>Fl(e.replace(/[-_]/g,i=>i=="-"?"+":"/"));var Yt=Nr(require("vscode"));var ff=Nr(js());var lf=e=>(i,t)=>{let n,u=0,a=t.length-1;for(;u<=a;)n=Math.floor((u+a)/2),e(t[n])>=i?a=n-1:u=n+1;return u};var wo=Symbol("unset"),Fs=e=>{let i=wo,t=()=>(i===wo&&(i=e()),i);return t.getValue=()=>i===wo?void 0:i,t.forget=()=>{i=wo},t};var Ng=e=>e.op===0?{...e,op:1,previous:e.value}:e.op===1?{...e,op:0,value:e.previous}:{...e,value:e.previous,previous:e.value};var Ti=class{constructor(i){this.saveGuard=ff.Policy.bulkhead(1,1/0);this._unsavedEditIndex=0;this.getSizeInner=Fs(()=>this.accessor.getSize());this.getEditTimeline=Fs(()=>kg(this._edits));this._edits=i.edits?i.edits.saved.concat(i.edits.unsaved):[],this._unsavedEditIndex=i.edits?.saved.length??0,this.supportsLengthChanges=i.supportsLengthChanges,this.isFiniteSize=i.isFiniteSize,this.accessor=i.accessor,this.pageSize=i.accessor.pageSize}get uri(){return this.accessor.uri}get isReadonly(){return!!this.accessor.isReadonly}async size(){if(!this.isFiniteSize)return;let i=await this.getSizeInner();if(i===void 0)return;let{sizeDelta:t}=this.getEditTimeline();return i+t}get edits(){return this._edits}get unsavedEdits(){return this._edits.slice(this.unsavedEditIndex)}get unsavedEditIndex(){return this._unsavedEditIndex}get isSynced(){return this.unsavedEditIndex===this.edits.length}readInto(i,t){return this.accessor.read(i,t)}readWithEdits(i=0,t=128*1024){return Mg(this.accessor,this.getEditTimeline().ranges,i,t)}save(){let i=this._edits.slice(this.unsavedEditIndex);return i.length===0?Promise.resolve():(this._unsavedEditIndex+=i.length,this.saveGuard.execute(async()=>{i.some(t=>t.op!==2||t.previous.length!==t.value.length)?await this.accessor.writeStream(this.readWithEdits()):await this.accessor.writeBulk(i.map(t=>({offset:t.offset,data:t.value}))),this.getSizeInner.forget()}))}revert(){this._unsavedEditIndex=0,this._edits=[],this.accessor.invalidate?.(),this.getEditTimeline.forget(),this.getSizeInner.forget()}makeEdits(i){let t=this._edits.length;return this._edits.push(...i),this.getEditTimeline.forget(),{undo:()=>(this.unsavedEditIndex<=t?this._edits.splice(t,i.length):this._edits.push(...i.map(Ng)),this.getEditTimeline.forget(),this._edits),redo:()=>(this._edits.push(...i),this.getEditTimeline.forget(),this._edits)}}dispose(){this.accessor.dispose()}};async function*Mg(e,i,t=0,n=1024){let u=new Uint8Array(n);for(let a=0;a<i.length;a++){let o=i[a];if(o.op===1)continue;if(o.op===2){let l=o.offset+o.value.length-t;if(l<=0)continue;let f=l<o.value.length?o.value.subarray(-l):o.value;f.length>0&&(yield f);continue}let r=o.roffset+(a+1<i.length?i[a+1].offset:1/0)-o.offset,s=o.roffset+Math.max(0,t-o.offset);for(;s<r;){let l=await e.read(s,u.subarray(0,Math.min(u.length,r-s)));if(l===0)break;yield u.subarray(0,l),s+=l}}}var kg=e=>{let i=[{op:0,editIndex:-1,roffset:0,offset:0}],t=(o,r,s)=>r.op===0?{before:{op:0,editIndex:o,roffset:r.roffset,offset:r.offset},after:{op:0,editIndex:o,roffset:r.roffset+s,offset:r.offset+s}}:r.op===1?{before:{op:1,editIndex:o,offset:r.offset},after:{op:1,editIndex:o,offset:r.offset+s}}:{before:{op:2,editIndex:o,offset:r.offset,value:r.value.subarray(0,s)},after:{op:2,editIndex:o,offset:r.offset+s,value:r.value.subarray(s)}},n=lf(o=>o.offset),u=0,a=(o,r)=>{for(u+=r;o<i.length;o++)i[o].offset+=r};for(let o=0;o<e.length;o++){let r=e[o],s=n(r.offset,i);(s===i.length||i[s].offset>r.offset)&&s--;let l=i[s];if(r.op===0){let{before:f,after:c}=t(o,l,r.offset-l.offset);i.splice(s,1,f,{op:2,editIndex:o,offset:r.offset,value:r.value},c),a(s+2,r.value.length)}else if(r.op===1||r.op===2){let{before:f}=t(o,l,r.offset-l.offset),c=n(r.offset+r.previous.length,i);(c===i.length||i[c].offset>r.offset)&&c--;let{after:p}=t(o,i[c],r.offset+r.previous.length-i[c].offset);i.splice(s,c-s+1,f,r.op===2?{op:2,editIndex:o,offset:r.offset,value:r.value}:{op:1,editIndex:o,offset:r.offset},p),a(s+2,(r.op===2?r.value.length:0)-r.previous.length)}}return{ranges:i,sizeDelta:u}};var df=e=>typeof e=="function"?e():e,$n=class{constructor(){this.table=new Map}set(i,t){let n=jg(i),u=this.table.get(n);if(!u){let o={buf:i,value:df(t)};return this.table.set(n,[o]),o.value}for(let o of u)if(Lg(o.buf,i))return o.value;let a={buf:i,value:df(t)};return u.push(a),a.value}*entries(){for(let i of this.table.values())for(let{buf:t,value:n}of i)yield[t,n]}*keys(){for(let i of this.table.values())for(let{buf:t}of i)yield t}*values(){for(let i of this.table.values())for(let{value:t}of i)yield t}};function Lg(e,i){if(e.length!==i.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==i[t])return!1;return!0}function jg(e,i=0){i=pf(149417,i);for(let t=0,n=e.length;t<n;t++)i=pf(e[t],i);return i}function pf(e,i){return(i<<5)-i+e|0}var Ii=e=>{let i=0,t=new $n,n=o=>({offset:t.set(o,()=>{let s=i;return i+=o.length,s}),len:o.length}),u=[];for(let o of e)o.op===0?u.push({...o,value:n(o.value)}):o.op===1?u.push({...o,previous:n(o.previous)}):u.push({...o,previous:n(o.previous),value:n(o.value)});let a=new Uint8Array(i);for(let[o,r]of t.entries())a.set(o,r);return{data:a,edits:u}},hf=({edits:e,data:i})=>{let t=({offset:n,len:u})=>i.slice(n,n+u);return e.map(n=>n.op===0?{...n,value:t(n.value)}:n.op===1?{...n,previous:t(n.previous)}:{...n,previous:t(n.previous),value:t(n.value)})};var Xr=Nr(require("vscode"));var Us=Nr(require("vscode")),Ug=new TextEncoder,Hg=new TextDecoder,wi=class{constructor(i){this.uri=i}async write(i){let t=JSON.stringify(i,(n,u)=>u instanceof Uint8Array?{$u8:lo(u)}:u);await Us.workspace.fs.writeFile(this.uri,Ug.encode(t))}async read(){let i;try{i=Hg.decode(await Us.workspace.fs.readFile(this.uri))}catch{return[]}return JSON.parse(i,(t,n)=>n&&typeof n=="object"&&"$u8"in n?Ul(n.$u8):n)}};var vf=Nr(js()),ir=Nr(require("vscode")),Vs=async(e,i)=>{if(e.scheme==="untitled")return new Bs(e,i??new Uint8Array);if(e.scheme==="vscode-debug-memory"){let{permissions:t=0}=await ir.workspace.fs.stat(e);return new Gs(e,!!(t&ir.FilePermission.Readonly))}if(e.scheme==="file")try{let t=require("fs");if((await t.promises.stat(e.fsPath)).isFile())return new qs(e,t)}catch{}return new Ao(e)},Hs=class{constructor(i,t){this.path=i;this._fs=t;this.borrowQueue=[];this.disposed=!1}borrow(i){return this.disposed?Promise.reject(new Error("FileHandle was disposed")):new Promise((t,n)=>{this.borrowQueue.push(async u=>{if(u instanceof Error)return n(u);try{t(await i(u))}catch(a){n(a)}}),this.borrowQueue.length===1&&this.process()})}dispose(){this.disposed=!0,this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout),this.rejectAll(new Error("FileHandle was disposed"))}async close(){await this.handle?.close(),this.handle=void 0,this.disposeTimeout&&clearTimeout(this.disposeTimeout)}rejectAll(i){for(;this.borrowQueue.length;)this.borrowQueue.pop()(i)}async process(){for(this.disposeTimeout&&clearTimeout(this.disposeTimeout);this.borrowQueue.length;){if(!this.handle)try{this.handle=await this._fs.promises.open(this.path,this._fs.constants.O_RDWR|this._fs.constants.O_CREAT)}catch(i){return this.rejectAll(i)}await this.borrowQueue[0]?.(this.handle),this.borrowQueue.shift()}this.handle&&(this.disposeTimeout=setTimeout(()=>{this.handle?.close(),this.handle=void 0},1e3))}},qg=vf.Policy.handleWhen(e=>e.code==="ENOENT").retry().attempts(10).delay(50),mf=128*1024,qs=class{constructor(i,t){this.fs=t;this.supportsIncremetalAccess=!0;this.pageSize=mf;this.uri=i.toString(),this.handle=new Hs(i.fsPath,t)}watch(i,t){return zs(this.uri,i,t)}async getSize(){return this.handle.borrow(async i=>(await i.stat()).size)}async read(i,t){return this.handle.borrow(async n=>{let{bytesRead:u}=await n.read(t,0,t.byteLength,i);return u})}writeBulk(i){return this.handle.borrow(async t=>{for(let{data:n,offset:u}of i)t.write(n,0,n.byteLength,u)})}async writeStream(i,t){let n=`${this.handle.path}.tmp`,u=await this.fs.promises.open(n,this.fs.constants.O_WRONLY|this.fs.constants.O_CREAT|this.fs.constants.O_TRUNC);try{let a=0;for await(let o of i){if(t?.isCancellationRequested)return;await u.write(o,0,o.byteLength,a),a+=o.byteLength}}finally{await u.close()}return await this.handle.borrow(async()=>{await this.handle.close(),await qg.execute(()=>this.fs.promises.rename(n,this.handle.path))}),this.handle.borrow(async a=>{if(t?.isCancellationRequested)return;let o=0;for await(let r of i){if(t?.isCancellationRequested)return;await a.write(r,0,r.byteLength,o),o+=r.byteLength}})}dispose(){this.handle.dispose()}},Ao=class{constructor(i){this.pageSize=mf;this.uri=i.toString(),this.fsPath=i.fsPath,this.isReadonly=ir.workspace.fs.isWritableFileSystem(this.uri)===!1}watch(i,t){return zs(this.uri,i,t)}async getSize(){return(await ir.workspace.fs.stat(ir.Uri.parse(this.uri))).size}async read(i,t){let n=await this.getContents(),u=Math.min(t.length,n.length-i);return t.set(n.subarray(i,u+i)),u}async writeStream(i,t){let n=0,u=[];for await(let r of i){if(t?.isCancellationRequested)throw new ir.CancellationError;u.push(r),n+=r.length}let a=new Uint8Array(n),o=0;for(let r of u)a.set(r,o),o+=r.length;await ir.workspace.fs.writeFile(ir.Uri.parse(this.uri),a)}async writeBulk(i){let t=await this.getContents();for(let{data:n,offset:u}of i)t.set(n,u);return ir.workspace.fs.writeFile(ir.Uri.parse(this.uri),t)}invalidate(){this.contents=void 0}dispose(){this.contents=void 0}getContents(){return this.contents??(this.contents=ir.workspace.fs.readFile(ir.Uri.parse(this.uri))),this.contents}},Bs=class extends Ao{constructor(t,n){super(t);this.contents=n}getSize(){return Promise.resolve(this.contents.byteLength)}},Gs=class{constructor(i,t){this.isReadonly=t;this.supportsIncremetalAccess=!0;this.pageSize=4*1024;this.uri=i.toString()}watch(i,t){return zs(this.uri,i,t)}async getSize(){}async read(i,t){let n=await ir.workspace.fs.readFile(this.referenceRange(i,i+t.length)),u=Math.min(t.length,n.length);return t.set(n.subarray(0,u)),u}async writeStream(){throw new Error("Not supported")}async writeBulk(i){await Promise.all(i.map(t=>ir.workspace.fs.writeFile(this.referenceRange(t.offset,t.offset+t.data.length),t.data)))}referenceRange(i,t){return ir.Uri.parse(this.uri).with({query:`?range=${i}:${t}`})}invalidate(){}dispose(){}},zs=(e,i,t)=>{let n=e.split("/"),u=n.pop(),a=new ir.RelativePattern(ir.Uri.parse(n.join("/")),u),o=ir.workspace.createFileSystemWatcher(a);return o.onDidChange(i),o.onDidDelete(t),o};var Oo=class{start(i,t){this._request?.dispose(),this._request=t,(async()=>{for await(let n of t.search())i.sendEvent({type:2,data:n})})()}cancel(){this._request?.dispose(),this._request=void 0}};var Sn=class extends Wr{constructor(t,n,u){super();this.model=t;this.isLargeFile=n;this.baseAddress=u;this.lastSave=0;this._selectionState={selected:0};this.searchProvider=new Oo;this._onDidDispose=this._register(new Xr.EventEmitter);this.onDidDispose=this._onDidDispose.event;this._onDidChangeSelectionState=this._register(new Xr.EventEmitter);this.onDidChangeSelectionState=this._onDidChangeSelectionState.event;this._onDidRevert=this._register(new Xr.EventEmitter);this.onDidRevert=this._onDidRevert.event}static async create(t,{backupId:n,untitledDocumentData:u},a){let o=await Vs(t,u),r=new Ti({accessor:o,isFiniteSize:!0,supportsLengthChanges:!0,edits:n?{unsaved:await new wi(Xr.Uri.parse(n)).read(),saved:[]}:void 0}),s=Sn.parseQuery(t.query),l=s.baseAddress?Sn.parseHexOrDecInt(s.baseAddress):0,f=await o.getSize();a.sendTelemetryEvent("fileOpen",{},{fileSize:f??0});let c=Xr.workspace.getConfiguration().get("hexeditor.maxFileSize")*1e6,p=!n&&!o.supportsIncremetalAccess&&(f??0)>c;return{document:new Sn(r,p,l),accessor:o}}get pageSize(){return this.model.pageSize}get isReadonly(){return this.model.isReadonly}get uri(){return Xr.Uri.parse(this.model.uri)}readWithEdits(t){return this.model.readWithEdits(t)}async readBufferWithEdits(t,n){let u=new Uint8Array(n),a=0;for await(let o of this.model.readWithEdits(t)){let r=Math.min(o.length,u.length-a);if(u.set(o.subarray(0,r),a),a+=r,a===n)return u}return u.slice(0,a)}async readBuffer(t,n){let u=new Uint8Array(n),a=await this.model.readInto(t,u);return a===n?u:u.slice(0,a)}dispose(){this._onDidDispose.fire(),this.model.dispose(),super.dispose()}get selectionState(){return this._selectionState}set selectionState(t){this._selectionState=t,this._onDidChangeSelectionState.fire(t)}get isSynced(){return this.model.isSynced}get edits(){return this.model.edits}get unsavedEditIndex(){return this.model.unsavedEditIndex}makeEdits(t){return this.model.makeEdits(t)}insert(t,n){return this.model.makeEdits([{op:0,offset:t,value:n}])}async replace(t,n){let u=await this.readBufferWithEdits(t,n.length);return u.length===n.length?this.makeEdits([{op:2,offset:t,value:n,previous:u}]):this.makeEdits([{op:2,offset:t,value:n.subarray(0,u.length),previous:u},{op:0,offset:t+u.length,value:n.subarray(u.length)}])}size(){return this.model.size()}async save(t){this.lastSave=Date.now(),await this.model.save(),this.lastSave=Date.now()}async saveAs(t,n){if(n&&n.isCancellationRequested)return;if(!this.model.isFiniteSize)throw new Error("Cannot save a document without a finite size");let u=await Vs(t);this.lastSave=Date.now(),await u.writeStream(this.model.readWithEdits()),this.lastSave=Date.now(),this.model.dispose(),this.model=new Ti({accessor:u,isFiniteSize:!0,supportsLengthChanges:!0})}async revert(t){this.model.revert(),this._onDidRevert.fire()}async backup(t){return await new wi(t).write(this.model.unsavedEdits),{id:t.toString(),delete:async()=>{try{await Xr.workspace.fs.delete(t)}catch{}}}}static parseQuery(t){let n={};if(t){let u=(t[0]==="?"?t.substr(1):t).split("&");for(let a of u){let o=a.split("="),r=o.shift();r&&(n[r]=o.join("="))}}return n}static parseHexOrDecInt(t){return t=t.toLowerCase(),t.startsWith("0x")?parseInt(t.substring(2),16):parseInt(t,10)}};var Po=Symbol("Wildcard"),gf=new Uint8Array(255);for(let e=0;e<255;e++)gf[e]=e;var $s=new Uint8Array(255);for(let e=0;e<255;e++)$s[e]=String.fromCharCode(e).toUpperCase().charCodeAt(0);var Co=class{constructor(i,t,n=gf){this.needle=i;this.onMatch=t;this.equivalencyTable=n;this.needleLen=0;this.index=0;this.usableBuffer=0;for(let u of i)u===Po?this.needleLen++:this.needleLen+=u.length;this.buffer=new Uint8Array(this.needleLen)}push(i){let{needleLen:t,buffer:n}=this;for(let u=0;u<i.length;u++)n[this.index++%t]=i[u],this.usableBuffer++,this.attemptMatch()}attemptMatch(){let{needle:i,needleLen:t,buffer:n,index:u,equivalencyTable:a}=this;if(this.usableBuffer<t)return;let o=0;for(let s=0;s<i.length;s++){let l=i[s];if(l===Po){o++;continue}for(let f=0;f<l.length;f++){if(a[l[f]]!==a[n[(u+o)%t]])return;o++}}this.matchTmpBuf||(this.matchTmpBuf=new Uint8Array(t));let r=this.index%t;this.matchTmpBuf.set(n.subarray(r),0),this.matchTmpBuf.set(n.subarray(0,r),t-r),this.onMatch(this.index-t,this.matchTmpBuf),this.usableBuffer=0}};var Ws=class{constructor(i,t){this.filesize=i;this.cap=t;this.buffers=new $n;this.fileOffset=0;this.lastYieldedTime=Date.now();this.results=[]}get capped(){return this.cap===0}push(i,t,n){let u=this.buffers.set(i,()=>new Uint8Array(i));this.cap===void 0?this.results.push({from:t,to:n,previous:u}):this.cap>0&&(this.results.push({from:t,to:n,previous:u}),this.cap--)}toYield(){let i=Date.now();if(i-this.lastYieldedTime>Ws.targetUpdateInterval){this.lastYieldedTime=i;let t=this.results;return this.results=[],{progress:this.filesize?this.fileOffset/this.filesize:0,results:t}}}final(){return{progress:1,capped:this.capped,results:this.results}}},Ai=Ws;Ai.targetUpdateInterval=1e3;var Ro=class{constructor(i,t,n,u){this.document=i;this.query=t;this.isCaseSensitive=n;this.cap=u;this.cancelled=!1}dispose(){this.cancelled=!0}async*search(){let{isCaseSensitive:i,query:t,document:n,cap:u}=this,a=new Ai(await n.size(),u),o=new Co(t.literal.map(r=>r==="*"?Po:r),(r,s)=>a.push(s,r,r+s.length),i?void 0:$s);for await(let r of n.readWithEdits(0)){if(this.cancelled||a.capped){yield a.final();return}o.push(r),a.fileOffset+=r.length;let s=a.toYield();s&&(yield s)}yield a.final()}},Bg=8*1024,Do=class{constructor(i,t,n,u){this.document=i;this.cap=u;this.cancelled=!1;this.re=new RegExp(t.re,n?"g":"ig")}dispose(){this.cancelled=!0}async*search(){let i="",t=0,{re:n,document:u}=this,a=new TextDecoder,o=new TextEncoder,r=new Ai(await u.size(),this.cap);for await(let s of u.readWithEdits(0)){if(this.cancelled||r.capped){yield r.final();return}i+=a.decode(s);let l=0;for(let p of i.matchAll(n)){let v=t+Ua(i.slice(0,p.index)),m=Ua(p[0]);r.push(o.encode(p[0]),v,v+m),l=p.index+p[0].length}r.fileOffset+=s.length;let f=Math.max(i.length-Bg,l);f>0&&(t+=f,n.lastIndex=0,i=i.slice(f));let c=r.toYield();c&&(yield c)}yield r.final()}};var yf={columnWidth:16,showDecodedText:!0,defaultEndianness:"little",inspectorType:"aside"},_f=Object.keys(yf),xo=class{constructor(i,t,n,u){this._context=i;this._telemetryReporter=t;this._dataInspectorView=n;this._registry=u;this._onDidChangeCustomDocument=new Yt.EventEmitter;this.onDidChangeCustomDocument=this._onDidChangeCustomDocument.event}static register(i,t,n,u){return Yt.window.registerCustomEditorProvider(xo.viewType,new xo(i,t,n,u),{supportsMultipleEditorsPerDocument:!1})}async openCustomDocument(i,t,n){let{document:u,accessor:a}=await Sn.create(i,t,this._telemetryReporter),o=[];o.push(u.onDidRevert(async()=>{let l=await u.size()??null;for(let f of this._registry.getMessaging(u))f.sendEvent({type:3,edits:{edits:[],data:new Uint8Array},replaceFileSize:l}),f.sendEvent({type:5})}));let r=async()=>{if(u.isSynced){Date.now()-u.lastSave<5e3||u.revert();return}let l="This file has changed on disk, but you have unsaved changes. Saving now will overwrite the file on disk with your changes.",f="Overwrite",c="Revert",p=await Yt.window.showWarningMessage(l,f,c);p===f?Yt.commands.executeCommand("workbench.action.files.save"):p==="Revert"&&Yt.commands.executeCommand("workbench.action.files.revert")},s=()=>{Yt.window.showWarningMessage("This file has been deleted! Saving now will create a new file on disk.","Overwrite","Close Editor").then(l=>{l==="Overwrite"?Yt.commands.executeCommand("workbench.action.files.save"):l==="Close Editor"&&Yt.commands.executeCommand("workbench.action.closeActiveEditor")})};return o.push(a.watch(r,s)),u}async resolveCustomEditor(i,t,n){let u=new io(o=>this.onMessage(u,i,o),o=>t.webview.postMessage(o)),a=this._registry.add(i,u);t.onDidDispose(()=>a.dispose()),t.webview.options={enableScripts:!0},t.webview.html=this.getHtmlForWebview(t.webview),t.webview.onDidReceiveMessage(o=>u.handleMessage(o))}async saveCustomDocument(i,t){await i.save(t);for(let n of this._registry.getMessaging(i))n.sendEvent({type:4,unsavedEditIndex:i.unsavedEditIndex})}saveCustomDocumentAs(i,t,n){return i.saveAs(t,n)}revertCustomDocument(i,t){return i.revert(t)}backupCustomDocument(i,t,n){return i.backup(t.destination)}getHtmlForWebview(i){let t=i.asWebviewUri(Yt.Uri.joinPath(this._context.extensionUri,"dist","editor.js")),n=i.asWebviewUri(Yt.Uri.joinPath(this._context.extensionUri,"dist","editor.css")),u=ao();return`
			<!DOCTYPE html>
			<html lang="en">
			<head>
				<meta charset="UTF-8">

				<!--
				Use a content security policy to only allow loading images from https or from our extension directory,
				and only allow scripts that have a specific nonce.
				-->
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src ${i.cspSource} blob:; font-src ${i.cspSource}; style-src ${i.cspSource}; script-src 'nonce-${u}';">

				<meta name="viewport" content="width=device-width, initial-scale=1.0">

				<link href="${n}" rel="stylesheet" />
				<script nonce="${u}" src="${t}" defer><\/script>

				<title>Hex Editor</title>
			</head>
			<body>
			</body>
			</html>`}readCodeSettings(){return{scrollBeyondLastLine:Yt.workspace.getConfiguration("editor").get("scrollBeyondLastLine",!0)}}readEditorSettings(){let i=Yt.workspace.getConfiguration("hexeditor"),t={...yf};for(let n of _f)i.has(n)&&(t[n]=i.get(n));return t}writeEditorSettings(i){let t=Yt.workspace.getConfiguration("hexeditor");for(let n of _f){let u=t.inspect(n),a=u?u.workspaceFolderValue!==void 0?Yt.ConfigurationTarget.WorkspaceFolder:u.workspaceValue!==void 0?Yt.ConfigurationTarget.Workspace:Yt.ConfigurationTarget.Global:Yt.ConfigurationTarget.Global;t.update(n,i[n],a)}}async onMessage(i,t,n){switch(n.type){case 11:return{type:0,initialOffset:t.baseAddress,editorSettings:this.readEditorSettings(),codeSettings:this.readCodeSettings(),edits:Ii(t.edits),unsavedEditIndex:t.unsavedEditIndex,fileSize:await t.size(),pageSize:t.pageSize,isLargeFile:t.isLargeFile,isReadonly:t.isReadonly};case 9:t.selectionState=n;break;case 13:let u=await t.readBuffer(n.offset,n.bytes);return{type:1,data:Fa(u)};case 14:this.publishEdit(i,t,t.makeEdits(hf(n.edits)));return;case 20:this.publishEdit(i,t,n.mode==="insert"?t.insert(n.offset,n.data):await t.replace(n.offset,n.data)),i.sendEvent({type:3,edits:Ii(t.edits)});return;case 21:{let o=await Promise.all(n.selections.sort((l,f)=>l[0]-f[0]).map(l=>t.readBuffer(l[0],l[1]-l[0]))),r=xl(o),s=n.asText?new TextDecoder().decode(r):lo(r);Yt.env.clipboard.writeText(s);return}case 16:t.searchProvider.cancel();return;case 15:let a;"re"in n.query?a=new Do(t,n.query,n.caseSensitive,n.cap):a=new Ro(t,n.query,n.caseSensitive,n.cap),t.searchProvider.start(i,a);return;case 17:this._dataInspectorView.handleEditorMessage({method:"reset"});break;case 18:this._dataInspectorView.handleEditorMessage({method:"update",data:Fa(await t.readBufferWithEdits(n.offset,8))});break;case 19:this.writeEditorSettings(n.editorSettings);break}}publishEdit(i,t,n){this._onDidChangeCustomDocument.fire({document:t,undo:()=>i.sendEvent({type:3,edits:Ii(n.undo())}),redo:()=>i.sendEvent({type:3,edits:Ii(n.redo())})})}},Oi=xo;Oi.viewType="hexEditor.hexedit";var on=Nr(require("vscode"));var Ef=[],No=class extends Wr{constructor(){super();this.docs=new Map;this.onChangeEmitter=new on.EventEmitter;this.onDidChangeActiveDocument=this.onChangeEmitter.event;this._register(on.window.tabGroups.onDidChangeTabs(this.onChangedTabs,this)),this.onChangedTabs()}get activeDocument(){return this._activeDocument}get activeMessaging(){return this._activeDocument&&this.docs.get(this._activeDocument)||Ef}getMessaging(t){return this.docs.get(t)||Ef}add(t,n){let u=this.docs.get(t);return u?u.add(n):(u=new Set([n]),this.docs.set(t,u)),this.onChangedTabs(),{dispose:()=>{u.delete(n),u.size===0&&this.docs.delete(t)}}}onChangedTabs(){let t=on.window.tabGroups.activeTabGroup.activeTab?.input,n=t instanceof on.TabInputCustom?t.uri:void 0,u;if(n){for(let a of this.docs.keys())if(a.uri.toString()===n.toString()){u=a;break}}u!==this._activeDocument&&(this._activeDocument=u,on.commands.executeCommand("setContext","hexEditor:isActive",!!u),this.onChangeEmitter.fire(u))}};var Mo=Nr(require("vscode"));var bf=new Intl.NumberFormat,Pi=class extends Wr{constructor(t){super();this.docChangeListener=this._register(new oo);this.item=this._register(Mo.window.createStatusBarItem(Mo.StatusBarAlignment.Right,100));let n=u=>{u?(this.docChangeListener.value=u.onDidChangeSelectionState(a=>this.update(a)),this.update(u.selectionState),this.show()):this.hide()};this._register(t.onDidChangeActiveDocument(n)),n(t.activeDocument)}update({focused:t,selected:n}){if(t===void 0&&n===0)return;let u=t!==void 0?bf.format(t):void 0,a=n>1?bf.format(n):void 0;if(u&&a)this.item.text=`Byte ${u} (${a} selected)`;else if(a)this.item.text=`${a} selected`;else if(u)this.item.text=`Byte ${u}`;else{this.item.hide();return}this.item.show()}show(){this.item.show()}hide(){this.item.hide()}};function Gg(e){let i=e.packageJSON;return{extId:`${i.publisher}.${i.name}`,version:i.version,aiKey:i.aiKey}}function Vg(){let e=Cn.window.tabGroups.activeTabGroup.activeTab?.input;e.uri&&Cn.commands.executeCommand("vscode.openWith",e.uri,"hexEditor.hexedit")}function zg(e){let i=new No,t=new Bn(e.extensionUri,i),n=Gg(e.extension);e.subscriptions.push(i,t,Cn.window.registerWebviewViewProvider(Bn.viewType,t));let u=new Sf.default(n.extId,n.version,n.aiKey);e.subscriptions.push(u);let a=Cn.commands.registerCommand("hexEditor.openFile",Vg),o=Cn.commands.registerCommand("hexEditor.goToOffset",()=>{let r=i.activeMessaging[Symbol.iterator]().next();r.value&&kl(r.value)});e.subscriptions.push(new Pi(i)),e.subscriptions.push(o),e.subscriptions.push(a),e.subscriptions.push(u),e.subscriptions.push(Oi.register(e,u,t,i))}function $g(){}0&&(module.exports={activate,deactivate});
/*!
 * 1DS JS SDK Core, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
/*!
 * 1DS JS SDK POST plugin, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
/*!
 * Application Insights JavaScript SDK - Core, 2.8.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*!
 * Microsoft Application Insights JavaScript SDK - Shim functions, 2.0.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
